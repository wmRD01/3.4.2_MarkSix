{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/LineChart.ts"],"names":["_decorator","Component","Node","PageView","Graphics","Color","log","Label","v3","UITransform","ccclass","property","pagetest","onLoad","pageView","getComponent","node","on","EventType","PAGE_TURNING","onPageTurning","event","start","paint","addComponent","list","i","roundMax","push","Math","random","drawLineChart","listY","listX","color","max","apply","min","yd","height","xd","width","length","lineWidth","strokeColor","moveTo","_leve","lineTo","putLabel","floor","stroke","x","y","str","size","textNode","text","addChild","string","position","layer","orgSize","contentSize","setContentSize","fontSize","BLACK","putPoint","r","fillColor","circle","fill"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, Node, PageView, ScrollView, Graphics, Color, log, Label, v3, UITransform } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = pagetest\n * DateTime = Mon Aug 28 2023 18:45:36 GMT+0800 (台北標準時間)\n * Author = sboy61017\n * FileBasename = pagetest.ts\n * FileBasenameNoExtension = pagetest\n * URL = db://assets/pagetest.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n\n@ccclass('pagetest')\nexport class pagetest extends Component {\n    pageView: PageView;\n\n    paint: Graphics;\n    _leve: number = 10;\n    height: number = 400;\n    width: number = 5000;\n    roundMax: number = 100;\n\n    onLoad() {\n        this.pageView = this.getComponent(PageView)\n        // this.pageView.node.on(PageView.EventType.PAGE_TURNING, this.onPageTurning, this)\n        this.pageView.node.on(PageView.EventType.PAGE_TURNING, this.onPageTurning, this)\n    }\n    onPageTurning(event: PageView) {\n\n        // console.log(event);\n        // console.log(event.getCurrentPageIndex());\n\n    }\n\n    start() {\n        this.paint = this.node.addComponent(Graphics);\n        // this.width = 300 * 100\n        let list = [];\n        for (let i = 0; i < this.roundMax; i++) {\n            list.push(Math.random() * 100);\n        }\n        this.drawLineChart(list, null, new Color(255, 66, 66, 255));\n    }\n\n    drawLineChart(listY, listX, color) {\n        //计算数据\n        // let max = 150\n        let max = Math.max.apply(null, listY);\n        let min = Math.min.apply(null, listY);\n        let yd = this.height / (max - min);\n        let xd = this.width / listY.length;\n\n        //画横轴\n        this.paint.lineWidth = 5;//设置宽度\n        this.paint.strokeColor = new Color(66, 66, 66, 66);\n        this.paint.moveTo(0, 0);\n        for (let i = 0; i <= this._leve; i++) {\n            this.paint.moveTo(0, i * this.height / this._leve);\n            this.paint.lineTo(this.width, i * this.height / this._leve);\n            this.putLabel(-20, i * this.height / this._leve - 15, Math.floor((i * (max - min) / this._leve) + min), 25)\n        }\n        this.paint.stroke();\n\n\n        //画数据线\n        this.paint.lineWidth = 5;//设置宽度\n        this.paint.strokeColor = color;\n        this.paint.moveTo(0, (listY[0] - min) * yd);\n        for (let i = 1; i < listY.length; i++) {\n            this.paint.lineTo(i * xd, (listY[i] - min) * yd);\n        }\n        this.paint.stroke();\n\n\n        //画 刻度,点,字\n        this.paint.lineWidth = 4;//设置宽度\n        this.paint.strokeColor = new Color(66, 66, 66, 66);\n        for (let i = 0; i < listY.length; i++) {\n            this.paint.moveTo(i * xd, 0);\n            this.paint.lineTo(i * xd, -10);\n            this.paint.stroke();\n\n            // this.putPoint(i * xd, (listY[i] - min) * yd, 7, color)\n            if (!!listX && !!listX[i]) {\n                this.putLabel(i * xd, -40, listX[i], 25)\n            }\n            else {\n                this.putLabel(i * xd, -40, i, 25)\n            }\n\n        }\n        log(listY);\n    }\n\n    //字\n    putLabel(x, y, str, size) {\n        let textNode = new Node();\n        let text = textNode.addComponent(Label);\n        this.node.addChild(textNode);\n        text.string = str;\n        textNode.position = v3(x, y)\n        textNode.layer = this.node.layer;\n        let orgSize = textNode.getComponent(UITransform).contentSize\n        textNode.getComponent(UITransform).setContentSize(orgSize.width, size);\n        text.fontSize = textNode.getComponent(UITransform).contentSize.height - 3;\n        text.color = Color.BLACK;\n    }\n\n    //画实心点\n    putPoint(x, y, r, color) {\n        this.paint.fillColor = color;\n        this.paint.circle(x, y, r);\n        this.paint.fill();\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}
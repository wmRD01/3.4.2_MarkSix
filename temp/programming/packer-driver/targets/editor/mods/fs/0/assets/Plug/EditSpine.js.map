{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Plug/EditSpine.js"],"names":["CC_EDITOR","cc","internal","SpineSkeleton","prototype","update","game","once","Game","EVENT_ENGINE_INITED","js","mixin","dt","_timeScale","isAnimationCached","_isAniComplete","_animationQueue","length","_headAniInfo","frameCache","_frameCache","isInvalid","updateToFrame","frames","_curFrame","shift","_accTime","delay","aniInfo","setAnimation","animationName","loop","_updateCache","_updateRealtime"],"mappings":";;;;;;;;;;;;;;;;AAAA;AAEA,cAAIA,SAAJ,EAAe;AACXC,YAAAA,EAAE,CAACC,QAAH,CAAYC,aAAZ,CAA0BC,SAA1B,CAAoCC,MAApC,GAA6C,IAA7C;AACAJ,YAAAA,EAAE,CAACK,IAAH,CAAQC,IAAR,CAAaN,EAAE,CAACO,IAAH,CAAQC,mBAArB,EAA0C,YAAY;AAClDR,cAAAA,EAAE,CAACS,EAAH,CAAMC,KAAN,CAAYV,EAAE,CAACC,QAAH,CAAYC,aAAZ,CAA0BC,SAAtC,EAAiD;AAC7CC,gBAAAA,MAAM,CAACO,EAAD,EAAK;AACP;AACAA,kBAAAA,EAAE,IAAI,KAAKC,UAAL,GAAkB,GAAxB;;AACA,sBAAI,KAAKC,iBAAL,EAAJ,EAA8B;AAC1B;AACA,wBAAI,KAAKC,cAAT,EAAyB;AACrB,0BAAI,KAAKC,eAAL,CAAqBC,MAArB,KAAgC,CAAhC,IAAqC,CAAC,KAAKC,YAA/C,EAA6D;AACzD,8BAAMC,UAAU,GAAG,KAAKC,WAAxB;;AAEA,4BAAID,UAAU,IAAIA,UAAU,CAACE,SAAX,EAAlB,EAA0C;AACtCF,0BAAAA,UAAU,CAACG,aAAX;AACA,gCAAMC,MAAM,GAAGJ,UAAU,CAACI,MAA1B;AACA,+BAAKC,SAAL,GAAiBD,MAAM,CAACA,MAAM,CAACN,MAAP,GAAgB,CAAjB,CAAvB;AACH;;AAED;AACH;;AAED,0BAAI,CAAC,KAAKC,YAAV,EAAwB;AACpB,6BAAKA,YAAL,GAAoB,KAAKF,eAAL,CAAqBS,KAArB,EAApB;AACH;;AAED,2BAAKC,QAAL,IAAiBd,EAAjB;;AAEA,0BAAI,KAAKc,QAAL,GAAgB,KAAKR,YAAL,CAAkBS,KAAtC,EAA6C;AACzC,8BAAMC,OAAO,GAAG,KAAKV,YAArB;AACA,6BAAKA,YAAL,GAAoB,IAApB;AACA,6BAAKW,YAAL,CAAkB,CAAlB,EAAqBD,OAAO,CAACE,aAA7B,EAA4CF,OAAO,CAACG,IAApD;AACH;;AAED;AACH;;AACD,yBAAKC,YAAL,CAAkBpB,EAAlB;AACH,mBA9BD,MA8BO;AACH,yBAAKqB,eAAL,CAAqBrB,EAArB;AACH;AACJ;;AArC4C,eAAjD;AAuCH,aAxCD;AAyCH","sourcesContent":["/*jshint esversion: 6 */\r\n\r\nif (CC_EDITOR) {\r\n    cc.internal.SpineSkeleton.prototype.update = null;\r\n    cc.game.once(cc.Game.EVENT_ENGINE_INITED, function () {\r\n        cc.js.mixin(cc.internal.SpineSkeleton.prototype, {\r\n            update(dt) {\r\n                // if (this.paused) return;\r\n                dt *= this._timeScale * 1.0;\r\n                if (this.isAnimationCached()) {\r\n                    // Cache mode and has animation queue.\r\n                    if (this._isAniComplete) {\r\n                        if (this._animationQueue.length === 0 && !this._headAniInfo) {\r\n                            const frameCache = this._frameCache;\r\n\r\n                            if (frameCache && frameCache.isInvalid()) {\r\n                                frameCache.updateToFrame();\r\n                                const frames = frameCache.frames;\r\n                                this._curFrame = frames[frames.length - 1];\r\n                            }\r\n\r\n                            return;\r\n                        }\r\n\r\n                        if (!this._headAniInfo) {\r\n                            this._headAniInfo = this._animationQueue.shift();\r\n                        }\r\n\r\n                        this._accTime += dt;\r\n\r\n                        if (this._accTime > this._headAniInfo.delay) {\r\n                            const aniInfo = this._headAniInfo;\r\n                            this._headAniInfo = null;\r\n                            this.setAnimation(0, aniInfo.animationName, aniInfo.loop);\r\n                        }\r\n\r\n                        return;\r\n                    }\r\n                    this._updateCache(dt);\r\n                } else {\r\n                    this._updateRealtime(dt);\r\n                }\r\n            }\r\n        });\r\n    });\r\n}"]}
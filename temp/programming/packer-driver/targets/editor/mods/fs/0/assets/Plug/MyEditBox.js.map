{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Plug/MyEditBox.ts"],"names":["_decorator","Node","EditBox","Label","Sprite","ccclass","property","LEFT_PADDING","MyEditBox","_updateLabelPosition","size","isAutoOff","trans","node","_uiProps","uiTransformComp","offX","anchorX","width","offY","anchorY","height","placeholderLabel","_placeholderLabel","textLabel","_textLabel","setContentSize","setPosition","position","z","_inputMode","enableWrapText","lineHeight","_updateTextLabel","getChildByName","layer","getComponent","addComponent","overflow","Overflow","CLAMP","parent","transformComp","setAnchorPoint","string","_updateLabelStringStyle","_string","_updatePlaceholderLabel","transform","placeholder"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, EditBox, Label, VerticalTextAlignment, Size, Sprite } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\nconst LEFT_PADDING = 2;\r\n@ccclass('MyEditBox')\r\nexport class MyEditBox extends EditBox {\r\n    @property(Sprite)\r\n    spriteBG:Sprite;\r\n    @property\r\n    isAutoOff: boolean = true;\r\n    protected _updateLabelPosition(size: Size): void {\r\n        if (!this.isAutoOff) return\r\n        const trans = this.node._uiProps.uiTransformComp!;\r\n        const offX = -trans.anchorX * trans.width;\r\n        const offY = -trans.anchorY * trans.height;\r\n\r\n        const placeholderLabel = this._placeholderLabel;\r\n        const textLabel = this._textLabel;\r\n        if (textLabel) {\r\n            textLabel.node._uiProps.uiTransformComp!.setContentSize(size.width - LEFT_PADDING, size.height);\r\n            textLabel.node.setPosition(offX + LEFT_PADDING, offY + size.height, textLabel.node.position.z);\r\n            if (this._inputMode === 0) {\r\n                // textLabel.verticalAlign = VerticalTextAlignment.TOP;\r\n            }\r\n            // textLabel.enableWrapText = this._inputMode === InputMode.ANY;\r\n            textLabel.enableWrapText = this._inputMode === 0;\r\n        }\r\n\r\n        if (placeholderLabel) {\r\n            placeholderLabel.node._uiProps.uiTransformComp!.setContentSize(size.width - LEFT_PADDING, size.height);\r\n            placeholderLabel.lineHeight = size.height;\r\n            placeholderLabel.node.setPosition(offX + LEFT_PADDING, offY + size.height, placeholderLabel.node.position.z);\r\n            // placeholderLabel.enableWrapText = this._inputMode === InputMode.ANY;\r\n            placeholderLabel.enableWrapText = this._inputMode === 0;\r\n        }\r\n    }\r\n    _updateTextLabel() {\r\n        let textLabel = this._textLabel; // If textLabel doesn't exist, create one.\r\n\r\n        if (!textLabel) {\r\n            let node = this.node.getChildByName('TEXT_LABEL');\r\n\r\n            if (!node) {\r\n                node = new Node('TEXT_LABEL');\r\n                node.layer = this.node.layer;\r\n            }\r\n\r\n            textLabel = node.getComponent(Label);\r\n\r\n            if (!textLabel) {\r\n                textLabel = node.addComponent(Label);\r\n            }\r\n\r\n            textLabel.overflow = Label.Overflow.CLAMP;\r\n            node.parent = this.node;\r\n            this._textLabel = textLabel;\r\n        } // update\r\n\r\n\r\n        const transformComp = this._textLabel.node._uiProps.uiTransformComp;\r\n        transformComp.setAnchorPoint(0, 1);\r\n\r\n        if (this._inputMode === 0) {\r\n            //   textLabel.verticalAlign = VerticalTextAlignment.TOP;\r\n            textLabel.enableWrapText = true;\r\n        } else {\r\n            textLabel.enableWrapText = false;\r\n        }\r\n\r\n        textLabel.string = this._updateLabelStringStyle(this._string);\r\n    }\r\n    _updatePlaceholderLabel() {\r\n        let placeholderLabel = this._placeholderLabel; // If placeholderLabel doesn't exist, create one.\r\n\r\n        if (!placeholderLabel) {\r\n            let node = this.node.getChildByName('PLACEHOLDER_LABEL');\r\n\r\n            if (!node) {\r\n                node = new Node('PLACEHOLDER_LABEL');\r\n                node.layer = this.node.layer;\r\n            }\r\n\r\n            placeholderLabel = node.getComponent(Label);\r\n\r\n            if (!placeholderLabel) {\r\n                placeholderLabel = node.addComponent(Label);\r\n            }\r\n            placeholderLabel.overflow = Label.Overflow.CLAMP;\r\n            node.parent = this.node;\r\n            this._placeholderLabel = placeholderLabel;\r\n        } // update\r\n\r\n        const transform = this._placeholderLabel.node._uiProps.uiTransformComp;\r\n        transform.setAnchorPoint(0, 1);\r\n\r\n        if (this._inputMode === 0) {\r\n            // placeholderLabel.verticalAlign = VerticalTextAlignment.TOP;\r\n            placeholderLabel.enableWrapText = true;\r\n        } else {\r\n            placeholderLabel.enableWrapText = false;\r\n        }\r\n\r\n        placeholderLabel.string = this.placeholder;\r\n    }\r\n\r\n\r\n}\r\n\r\n"]}
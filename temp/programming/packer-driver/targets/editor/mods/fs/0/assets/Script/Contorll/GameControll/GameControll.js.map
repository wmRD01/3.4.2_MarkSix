{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/GameControll/GameControll.ts"],"names":["GameControll","Game","game","CommandType","GameEvent","EventMng","PublicData","GameState","LobbyState","MessageState","PlayerState","ViewState","AccountLogIn","ChangeNickname","InGame","InLobby","InRoomLevel","BackBet","ClearBet","OwnerBet","ReferLastBet","SquintEnd","SquintProcess","UpdateCoin","GameCloseView","GameOpenView","LobbyCloseView","LobbyOpenView","PlayerInRoom","PlayerExitRoom","RefreshBankerBetList","RefreshPlayerBetList","GetGameRoomData","BackHomeMessage","ShowConfirmMessage","MessageCommend","LangType","ServerGameSenceType","BaseSingleton","SocketSetting","CloseBet","OpenNewGame","PlayerSendCardSquintStart","PlayerSendCardSquintEnd","ReadyBet","SendCards","ShuffleCrads","WaitOrEnd","BankerSendCardSquintStart","BankerSendCardSquintEnd","PlayerRepairCard","PlayerRepairCardSquintStart","PlayerRepairCardSquintEnd","BankerRepairCard","BankerRepairCardSquintStart","BankerRepairCardSquintEnd","ShowResoult","EndRound","EndBoot","StartBoot","RefreshRoomState","RefreshTabelData","GameSceneName","RoomData","PanelLoading","GameStateEvent","GameSenceText","GameData","CheckLoading","CheckLoadingType","setControllEvent","on","EVENT_HIDE","resetView","bind","EVENT_SHOW","resetWait","ControllSandCommend","serverRespond","cmd","data","code","messaggeState","gori","grre","grrl","gbop","gbob","viewState","ln","lbll","lbrl","lbsr","goin","ucnn","vlcr","lobbyState","gonm","gbet","gbbk","gbcl","gbrt","gpp","gpe","getInstance","isResetView","playerState","ggs","gbal","gs1","gs8","gs9","gs10","gs11","gs12","gs13","gs14","gs15","gs16","gs17","gs19","gs18","gs20","gs21","gs22","gs23","gs24","gs25","gs30","isResetProcessing","instance","closeLoading","gameState","transitionTo","roomNo","nowStage","senceText","change","undefined","emit","UpdataSence","checkError","message","serverErrorCode","ssdis","resetState","isWebSocketOpen","caption","transformStr","BackHome","transitionTo_Old","requestChange","excr","excc","isNaN","Number","t","Server","currentScene","Lobby","GameRoom"],"mappings":";;;2iCAyBqBA,Y;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAVZC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;AAfNC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,S,iBAAAA,S;;AACFC,MAAAA,Q;;AACAC,MAAAA,U;;AACEC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,W,iBAAAA,W;AAAaC,MAAAA,S,iBAAAA,S;;AAClDC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,c,iBAAAA,c;AAAgBC,MAAAA,M,iBAAAA,M;AAAQC,MAAAA,O,iBAAAA,O;AAASC,MAAAA,W,iBAAAA,W;;AAC/CC,MAAAA,O,iBAAAA,O;AAASC,MAAAA,Q,iBAAAA,Q;AAAUC,MAAAA,Q,iBAAAA,Q;AAAUC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,a,iBAAAA,a;AAAeC,MAAAA,U,iBAAAA,U;;AACrEC,MAAAA,a,iBAAAA,a;AAAeC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,c,iBAAAA,c;AAAgBC,MAAAA,a,iBAAAA,a;AAAeC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,c,iBAAAA,c;AAAgBC,MAAAA,oB,iBAAAA,oB;AAAsBC,MAAAA,oB,iBAAAA,oB;AAAsBC,MAAAA,e,iBAAAA,e;;AACtIC,MAAAA,e,kBAAAA,e;AAAiBC,MAAAA,kB,kBAAAA,kB;;AACjBC,MAAAA,c,kBAAAA,c;;AACAC,MAAAA,Q,kBAAAA,Q;;AACAC,MAAAA,mB,kBAAAA,mB;;AACFC,MAAAA,a;;AACAC,MAAAA,a;;AACEC,MAAAA,Q,kBAAAA,Q;AAAUC,MAAAA,W,kBAAAA,W;AAAaC,MAAAA,yB,kBAAAA,yB;AAA2BC,MAAAA,uB,kBAAAA,uB;AAAyBC,MAAAA,Q,kBAAAA,Q;AAAUC,MAAAA,S,kBAAAA,S;AAAWC,MAAAA,Y,kBAAAA,Y;AAAcC,MAAAA,S,kBAAAA,S;AAAWC,MAAAA,yB,kBAAAA,yB;AAA2BC,MAAAA,uB,kBAAAA,uB;AAAyBC,MAAAA,gB,kBAAAA,gB;AAAkBC,MAAAA,2B,kBAAAA,2B;AAA6BC,MAAAA,yB,kBAAAA,yB;AAA2BC,MAAAA,gB,kBAAAA,gB;AAAkBC,MAAAA,2B,kBAAAA,2B;AAA6BC,MAAAA,yB,kBAAAA,yB;AAA2BC,MAAAA,W,kBAAAA,W;AAAaC,MAAAA,Q,kBAAAA,Q;AAAUC,MAAAA,O,kBAAAA,O;AAASC,MAAAA,S,kBAAAA,S;AAAWC,MAAAA,gB,kBAAAA,gB;AAAkBC,MAAAA,gB,kBAAAA,gB;;AAE9XC,MAAAA,a,kBAAAA,a;;AACFC,MAAAA,Q;;AACAC,MAAAA,Y;;AACEC,MAAAA,c,kBAAAA,c;;AACFC,MAAAA,a;;AACAC,MAAAA,Q;;AACAC,MAAAA,Y;;AACEC,MAAAA,gB,kBAAAA,gB;;;;;;;yBAEYrE,Y,GAAN,MAAMA,YAAN,SAA2B;AAAA;AAAA,2CAA3B,CAAyD;AACpE;AACAsE,QAAAA,gBAAgB,GAAG;AACfpE,UAAAA,IAAI,CAACqE,EAAL,CAAQtE,IAAI,CAACuE,UAAb,EAAyB,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAzB;AACAxE,UAAAA,IAAI,CAACqE,EAAL,CAAQtE,IAAI,CAAC0E,UAAb,EAAyB,KAAKC,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAzB;AACA;AAAA;AAAA,oCAASH,EAAT,CAAY;AAAA;AAAA,sCAAUM,mBAAtB,EAA2C,KAAKC,aAAhD,EAA+D,IAA/D;AACH;;AACDA,QAAAA,aAAa,CAACC,GAAD,EAAcC,IAAd,EAAyB;AAClC;AACA,cAAIA,IAAI,CAACC,IAAL,IAAaD,IAAI,CAACC,IAAL,IAAa,CAA9B,EAAiC;AAC7B,iBAAKC,aAAL,CAAmBH,GAAnB,EAAwBC,IAAI,CAACC,IAA7B,EAD6B,CAG7B;AACA;AACH,WAPiC,CAQlC;AACA;;;AACA,kBAAQF,GAAR;AACI,iBAAK;AAAA;AAAA,4CAAYI,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACI,mBAAKC,SAAL,CAAeT,GAAf,EAAoBC,IAApB;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYS,EAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACI,mBAAKC,UAAL,CAAgBjB,GAAhB,EAAqBC,IAArB;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYiB,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,GAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,GAAjB;AACI,kBAAI;AAAA;AAAA,4CAAWC,WAAX,CAAuBC,WAA3B,EAAwC;AACxC,mBAAKC,WAAL,CAAiB3B,GAAjB,EAAsBC,IAAtB;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB2B,GAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,GAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,GAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,GAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACA,iBAAK;AAAA;AAAA,4DAAoBC,IAAzB;AACI;AACA;AACA,kBAAI;AAAA;AAAA,4CAAWxB,WAAX,CAAuBC,WAA3B,EAAwC;;AACxC,kBAAI,CAAC;AAAA;AAAA,4CAAWD,WAAX,CAAuBC,WAAxB,IAAuC;AAAA;AAAA,4CAAWD,WAAX,CAAuByB,iBAAlE,EAAqF;AACjF;AAAA;AAAA,kDAAaC,QAAb,CAAsBC,YAAtB;AACA;AAAA;AAAA,8CAAW3B,WAAX,CAAuByB,iBAAvB,GAA2C,KAA3C;AACH;;AAED,mBAAKG,SAAL,CAAerD,GAAf,EAAoBC,IAApB;AACA;AA1DR;AA4DH;;AACDQ,QAAAA,SAAS,CAACT,GAAD,EAAcC,IAAd,EAAyB;AAC9B,kBAAQD,GAAR;AACI,iBAAK;AAAA;AAAA,4CAAYI,IAAjB;AACI;AAAA;AAAA,0CAAUqB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,sDAAoDrD,IAApD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYI,IAAjB;AACI;AAAA;AAAA,0CAAUoB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,gDAAiDrD,IAAjD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYK,IAAjB;AACI;AAAA;AAAA,0CAAUmB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,oDAAmDrD,IAAnD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYM,IAAjB;AACI;AAAA;AAAA,0CAAUkB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,gEAAyDrD,IAAzD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYO,IAAjB;AACI;AAAA;AAAA,0CAAUiB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,gEAAyDrD,IAAzD;AACA;AAfR;AAkBH;;AACDgB,QAAAA,UAAU,CAACjB,GAAD,EAAcC,IAAd,EAAyB;AAC/B,kBAAQD,GAAR;AACI,iBAAK;AAAA;AAAA,4CAAYU,EAAjB;AACI;AAAA;AAAA,4CAAWe,WAAX,CAAuB6B,YAAvB;AAAA;AAAA,gDAAkDrD,IAAlD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYY,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACI;AAAA;AAAA,4CAAWW,WAAX,CAAuB6B,YAAvB;AAAA;AAAA,oCAA4CrD,IAA5C;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYU,IAAjB;AACI;AAAA;AAAA,4CAAWc,WAAX,CAAuB6B,YAAvB;AAAA;AAAA,sCAA6CrD,IAA7C;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYW,IAAjB;AACI;AAAA;AAAA,4CAAWa,WAAX,CAAuB6B,YAAvB;AAAA;AAAA,8CAAiDrD,IAAjD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYc,IAAjB;AACI;AAAA;AAAA,4CAAWU,WAAX,CAAuB6B,YAAvB;AAAA;AAAA,oDAAoDrD,IAApD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYe,IAAjB;AACI;AAAA;AAAA,wCAASS,WAAT,CAAqB8B,MAArB,GAA8BtD,IAAI,CAACsD,MAAnC;AACA;AAAA;AAAA,4CAAW9B,WAAX,CAAuB6B,YAAvB;AAAA;AAAA,sCAA6CrD,IAA7C;AACA;AApBR;AAsBH;;AACD0B,QAAAA,WAAW,CAAC3B,GAAD,EAAcC,IAAd,EAAyB;AAChC;AAEA,kBAAQD,GAAR;AACI,iBAAK;AAAA;AAAA,4CAAYkB,IAAjB;AACI;AAAA;AAAA,8CAAYO,WAAZ,CAAwB6B,YAAxB;AAAA;AAAA,4CAAiDrD,IAAjD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYkB,IAAjB;AACI;AAAA;AAAA,8CAAYM,WAAZ,CAAwB6B,YAAxB;AAAA;AAAA,wCAA+CrD,IAA/C;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYmB,IAAjB;AACI;AAAA;AAAA,8CAAYK,WAAZ,CAAwB6B,YAAxB;AAAA;AAAA,sCAA8CrD,IAA9C;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYoB,IAAjB;AACI;AAAA;AAAA,8CAAYI,WAAZ,CAAwB6B,YAAxB;AAAA;AAAA,wCAA+CrD,IAA/C;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYqB,IAAjB;AACI;AAAA;AAAA,8CAAYG,WAAZ,CAAwB6B,YAAxB;AAAA;AAAA,gDAAmDrD,IAAnD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYsB,GAAjB;AACI;AAAA;AAAA,8CAAYE,WAAZ,CAAwB6B,YAAxB;AAAA;AAAA,kDAAoDrD,IAApD;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYuB,GAAjB;AACI;AAAA;AAAA,8CAAYC,WAAZ,CAAwB6B,YAAxB;AAAA;AAAA,0CAAgDrD,IAAhD;AACA;AArBR;AAuBH;;AACDoD,QAAAA,SAAS,CAACrD,GAAD,EAAcC,IAAd,EAAyB;AAC9B;AACA;AAAA;AAAA,oCAASwB,WAAT,CAAqB+B,QAArB,GAAgCxD,GAAhC;AACA,cAAIyD,SAAS,GAAG;AAAA;AAAA,gDAAoBC,MAApB,CAA2B1D,GAA3B,CAAhB,CAH8B,CAI9B;;AACA,cAAIyD,SAAS,IAAIE,SAAjB,EACI;AAAA;AAAA,oCAASC,IAAT,CAAc;AAAA;AAAA,gDAAeC,WAA7B,EAA0CJ,SAA1C;;AACJ,kBAAQzD,GAAR;AAEI,iBAAK;AAAA;AAAA,4DAAoB4B,GAAzB;AACI;AAAA;AAAA,0CAAUH,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,wDAAqDrD,IAArD;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB4B,IAAzB;AACI;AAAA;AAAA,0CAAUJ,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,wDAAqDrD,IAArD;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB6B,GAAzB;AACI;AAAA;AAAA,0CAAUL,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,0CAA8CrD,IAA9C;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB8B,GAAzB;AACI;AAAA;AAAA,0CAAUN,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,0CAA8CrD,IAA9C;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB+B,GAAzB;AACI;AAAA;AAAA,0CAAUP,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,gDAAiDrD,IAAjD;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBgC,IAAzB;AACI;AAAA;AAAA,0CAAUR,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,8CAAgDrD,IAAhD;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBiC,IAAzB;AACI;AAAA;AAAA,0CAAUT,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,wCAA6CrD,IAA7C;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBkC,IAAzB;AACI;AAAA;AAAA,0CAAUV,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,wCAA6CrD,IAA7C;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBmC,IAAzB;AACI;AAAA;AAAA,0CAAUX,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,0CAA8CrD,IAA9C;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBoC,IAAzB;AACI;AAAA;AAAA,0CAAUZ,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,0EAA8DrD,IAA9D;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBqC,IAAzB;AACI;AAAA;AAAA,0CAAUb,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,sEAA4DrD,IAA5D;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBsC,IAAzB;AACI;AAAA;AAAA,0CAAUd,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,0EAA8DrD,IAA9D;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBuC,IAAzB;AACI;AAAA;AAAA,0CAAUf,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,sEAA4DrD,IAA5D;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoByC,IAAzB;AACI;AAAA;AAAA,0CAAUjB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,wDAAqDrD,IAArD;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBwC,IAAzB;AACI;AAAA;AAAA,0CAAUhB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,8EAAgErD,IAAhE;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB0C,IAAzB;AACI;AAAA;AAAA,0CAAUlB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,0EAA8DrD,IAA9D;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB2C,IAAzB;AACI;AAAA;AAAA,0CAAUnB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,wDAAqDrD,IAArD;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB4C,IAAzB;AACI;AAAA;AAAA,0CAAUpB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,8EAAgErD,IAAhE;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB6C,IAAzB;AACI;AAAA;AAAA,0CAAUrB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,0EAA8DrD,IAA9D;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB8C,IAAzB;AACI;AAAA;AAAA,0CAAUtB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,8CAAgDrD,IAAhD;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoB+C,IAAzB;AACI;AAAA;AAAA,0CAAUvB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,wCAA6CrD,IAA7C;AACA;;AACJ,iBAAK;AAAA;AAAA,4DAAoBgD,IAAzB;AACI;AAAA;AAAA,0CAAUxB,WAAV,CAAsB6B,YAAtB;AAAA;AAAA,sCAA4CrD,IAA5C;AACA;AAnER,WAP8B,CA6E9B;AACA;AACA;;AACH;;AAGD6D,QAAAA,UAAU,CAAC9D,GAAD,EAAcC,IAAd,EAAyB;AAC/B,cAAI8D,OAAJ;AACAA,UAAAA,OAAO,GAAG,KAAKC,eAAL,CAAqB/D,IAAI,CAACC,IAA1B,CAAV;;AACA,kBAAQF,GAAR;AACI,iBAAK;AAAA;AAAA,4CAAYiE,KAAjB;AAAuB;AACnB;AAAA;AAAA,gDAAaxC,WAAb,CAAyByC,UAAzB,CAAoC;AAAA;AAAA,wDAAiBC,eAArD;AACA,oBAFJ,CAGI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAZR;;AAcA,eAAKhE,aAAL,CAAmBH,GAAnB,EAAwB+D,OAAxB;AACH;;AACD5D,QAAAA,aAAa,CAACH,GAAW,GAAG,EAAf,EAAmBoE,OAAnB,EAAoC;AAC7C;AACA,cAAIC,YAAY,GAAG,KAAKL,eAAL,CAAqBI,OAArB,CAAnB,CAF6C,CAEG;;AAChD,kBAAQpE,GAAR;AACI,iBAAK;AAAA;AAAA,kDAAesE,QAApB;AACI;AAAA;AAAA,gDAAa7C,WAAb,CAAyB8C,gBAAzB,CAA0C;AAAA;AAAA,uDAA1C,EAAiEF,YAAjE,EAA+EG,aAA/E;AACA;;AACJ,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACA,iBAAK;AAAA;AAAA,4CAAYC,IAAjB;AACI;AAAA;AAAA,gDAAajD,WAAb,CAAyB8C,gBAAzB,CAA0C;AAAA;AAAA,6DAA1C,EAAoEF,YAApE,EAAkFG,aAAlF;AACA;AAAA;AAAA,gDAAarB,QAAb,CAAsBC,YAAtB;AACA;;AACJ;AACI;AAAA;AAAA,gDAAa3B,WAAb,CAAyB8C,gBAAzB,CAA0C;AAAA;AAAA,6DAA1C,EAAoEF,YAApE,EAAkFG,aAAlF;AACA;AAXR;AAcH;;AACDR,QAAAA,eAAe,CAAC9D,IAAD,EAAe;AAC1B,cAAIyE,KAAK,CAACC,MAAM,CAAC1E,IAAD,CAAP,CAAT,EACI,OAAOA,IAAP,CADJ,KAGI,OAAO;AAAA;AAAA,8CAAc2E,CAAd,CAAgB3E,IAAhB,EAAsB;AAAA;AAAA,oCAAS4E,MAA/B,CAAP;AAEP;;AACDpF,QAAAA,SAAS,GAAG;AACR,kBAAQ;AAAA;AAAA,wCAAW+B,WAAX,CAAuBsD,YAA/B;AACI,iBAAK;AAAA;AAAA,gDAAcC,KAAnB;AACI;AAAA;AAAA,0CAAUvD,WAAV,CAAsB6B,YAAtB;AAAA;AAAA;AACA;;AACJ,iBAAK;AAAA;AAAA,gDAAc2B,QAAnB;AACI;AAAA;AAAA,0CAAUxD,WAAV,CAAsB6B,YAAtB;AAAA;AAAA;AACA;AANR;AASH;;AAEDzD,QAAAA,SAAS,GAAG;AACR,kBAAQ;AAAA;AAAA,wCAAW4B,WAAX,CAAuBsD,YAA/B;AACI,iBAAK;AAAA;AAAA,gDAAcC,KAAnB;AACI;AAAA;AAAA,0CAAUvD,WAAV,CAAsB6B,YAAtB;AAAA;AAAA;AACA;;AACJ,iBAAK;AAAA;AAAA,gDAAc2B,QAAnB;AACI;AAAA;AAAA,0CAAUxD,WAAV,CAAsB6B,YAAtB;AAAA;AAAA;AACA;AANR;AAQH;;AAzSmE,O","sourcesContent":["import { CommandType } from \"../../Enum/CommandType\";\r\nimport { GameEvent } from \"../../Enum/GameEvent\";\r\nimport EventMng from \"../../Manager/EventMng\";\r\nimport PublicData from \"../../Model/PublicData\";\r\nimport { GameState, LobbyState, MessageState, PlayerState, ViewState } from \"../../../Patten/StatePatten\";\r\nimport { AccountLogIn, ChangeNickname, InGame, InLobby, InRoomLevel } from \"../../State/LobbyState\";\r\nimport { BackBet, ClearBet, OwnerBet, ReferLastBet, SquintEnd, SquintProcess, UpdateCoin } from \"../../State/PlayState\";\r\nimport { GameCloseView, GameOpenView, LobbyCloseView, LobbyOpenView, PlayerInRoom, PlayerExitRoom, RefreshBankerBetList, RefreshPlayerBetList, GetGameRoomData } from \"../../State/ViewState\";\r\nimport { BackHomeMessage, ShowConfirmMessage } from \"../../State/MessageState\";\r\nimport { MessageCommend } from \"../../Enum/MessageCommend\";\r\nimport { LangType } from \"../../Enum/LangType\";\r\nimport { ServerGameSenceType } from \"../../Enum/ServerGameSenceType\";\r\nimport BaseSingleton from \"../../../Patten/Singleton/BaseSingleton\";\r\nimport SocketSetting from \"../../Socket/SocketSetting\";\r\nimport { CloseBet, OpenNewGame, PlayerSendCardSquintStart, PlayerSendCardSquintEnd, ReadyBet, SendCards, ShuffleCrads, WaitOrEnd, BankerSendCardSquintStart, BankerSendCardSquintEnd, PlayerRepairCard, PlayerRepairCardSquintStart, PlayerRepairCardSquintEnd, BankerRepairCard, BankerRepairCardSquintStart, BankerRepairCardSquintEnd, ShowResoult, EndRound, EndBoot, StartBoot, RefreshRoomState, RefreshTabelData } from \"../../State/GameState\";\r\nimport { Game, game } from \"cc\";\r\nimport { GameSceneName } from \"../../Enum/GameSenceName\";\r\nimport RoomData from \"../../Model/RoomData\";\r\nimport PanelLoading from \"../NoClearNode/PanelLoading\";\r\nimport { GameStateEvent } from \"../../Enum/GameStateEvent\";\r\nimport GameSenceText from \"../../Model/GameSenceText\";\r\nimport GameData from \"../../Model/GameData\";\r\nimport CheckLoading from \"../../Model/CheckLoading\";\r\nimport { CheckLoadingType } from \"../../Enum/CheckLoadingType\";\r\n\r\nexport default class GameControll extends BaseSingleton<GameControll>() {\r\n    //利用推波方式去call Function \r\n    setControllEvent() {\r\n        game.on(Game.EVENT_HIDE, this.resetView.bind(this))\r\n        game.on(Game.EVENT_SHOW, this.resetWait.bind(this))\r\n        EventMng.on(GameEvent.ControllSandCommend, this.serverRespond, this)\r\n    }\r\n    serverRespond(cmd: string, data: any) {\r\n        // console.log(cmd, data);\r\n        if (data.code && data.code != 0) {\r\n            this.messaggeState(cmd, data.code)\r\n\r\n            // if (data.code > 0)   // console.log(\"出現錯誤啦!!!!!!!!!!\");\r\n            //     return;\r\n        }\r\n        // console.log(cmd);\r\n        // console.log(MainModel.isResetView);\r\n        switch (cmd) {\r\n            case CommandType.gori:\r\n            case CommandType.grre:\r\n            case CommandType.grrl:\r\n            case CommandType.gbop:\r\n            case CommandType.gbob:\r\n                this.viewState(cmd, data)\r\n                break\r\n            case CommandType.ln:\r\n            case CommandType.lbll:\r\n            case CommandType.lbrl:\r\n            case CommandType.lbsr:\r\n            case CommandType.goin:\r\n            case CommandType.ucnn:\r\n            case CommandType.vlcr:\r\n                this.lobbyState(cmd, data)\r\n                break;\r\n            case CommandType.gonm:\r\n            case CommandType.gbet:\r\n            case CommandType.gbbk:\r\n            case CommandType.gbcl:\r\n            case CommandType.gbrt:\r\n            case CommandType.gpp:\r\n            case CommandType.gpe:\r\n                if (PublicData.getInstance.isResetView) return\r\n                this.playerState(cmd, data)\r\n                break;\r\n            case ServerGameSenceType.ggs:\r\n            case ServerGameSenceType.gbal:\r\n            case ServerGameSenceType.gs1:\r\n            case ServerGameSenceType.gs8:\r\n            case ServerGameSenceType.gs9:\r\n            case ServerGameSenceType.gs10:\r\n            case ServerGameSenceType.gs11:\r\n            case ServerGameSenceType.gs12:\r\n            case ServerGameSenceType.gs13:\r\n            case ServerGameSenceType.gs14:\r\n            case ServerGameSenceType.gs15:\r\n            case ServerGameSenceType.gs16:\r\n            case ServerGameSenceType.gs17:\r\n            case ServerGameSenceType.gs19:\r\n            case ServerGameSenceType.gs18:\r\n            case ServerGameSenceType.gs20:\r\n            case ServerGameSenceType.gs21:\r\n            case ServerGameSenceType.gs22:\r\n            case ServerGameSenceType.gs23:\r\n            case ServerGameSenceType.gs24:\r\n            case ServerGameSenceType.gs25:\r\n            case ServerGameSenceType.gs30:\r\n                // console.log(\"???uisReaaset?\");\r\n                // console.log(PublicData.getInstance.isResetView);\r\n                if (PublicData.getInstance.isResetView) return\r\n                if (!PublicData.getInstance.isResetView && PublicData.getInstance.isResetProcessing) {\r\n                    PanelLoading.instance.closeLoading()\r\n                    PublicData.getInstance.isResetProcessing = false\r\n                }\r\n\r\n                this.gameState(cmd, data)\r\n                break;\r\n        }\r\n    }\r\n    viewState(cmd: string, data: any) {\r\n        switch (cmd) {\r\n            case CommandType.gori:\r\n                ViewState.getInstance.transitionTo(GetGameRoomData, data)\r\n                break;\r\n            case CommandType.grre:\r\n                ViewState.getInstance.transitionTo(PlayerInRoom, data)\r\n                break;\r\n            case CommandType.grrl:\r\n                ViewState.getInstance.transitionTo(PlayerExitRoom, data)\r\n                break;\r\n            case CommandType.gbop:\r\n                ViewState.getInstance.transitionTo(RefreshPlayerBetList, data)\r\n                break;\r\n            case CommandType.gbob:\r\n                ViewState.getInstance.transitionTo(RefreshBankerBetList, data)\r\n                break;\r\n\r\n        }\r\n    }\r\n    lobbyState(cmd: string, data: any) {\r\n        switch (cmd) {\r\n            case CommandType.ln:\r\n                LobbyState.getInstance.transitionTo(AccountLogIn, data)\r\n                break;\r\n            case CommandType.lbsr:\r\n            case CommandType.goin:\r\n                LobbyState.getInstance.transitionTo(InGame, data)\r\n                break;\r\n            case CommandType.lbll:\r\n                LobbyState.getInstance.transitionTo(InLobby, data)\r\n                break;\r\n            case CommandType.lbrl:\r\n                LobbyState.getInstance.transitionTo(InRoomLevel, data)\r\n                break;\r\n            case CommandType.ucnn:\r\n                LobbyState.getInstance.transitionTo(ChangeNickname, data)\r\n                break;\r\n            case CommandType.vlcr:\r\n                GameData.getInstance.roomNo = data.roomNo\r\n                LobbyState.getInstance.transitionTo(InLobby, data)\r\n                break;\r\n        }\r\n    }\r\n    playerState(cmd: string, data: any) {\r\n        // console.log(cmd);\r\n\r\n        switch (cmd) {\r\n            case CommandType.gonm:\r\n                PlayerState.getInstance.transitionTo(UpdateCoin, data)\r\n                break;\r\n            case CommandType.gbet:\r\n                PlayerState.getInstance.transitionTo(OwnerBet, data)\r\n                break;\r\n            case CommandType.gbbk:\r\n                PlayerState.getInstance.transitionTo(BackBet, data)\r\n                break;\r\n            case CommandType.gbcl:\r\n                PlayerState.getInstance.transitionTo(ClearBet, data)\r\n                break;\r\n            case CommandType.gbrt:\r\n                PlayerState.getInstance.transitionTo(ReferLastBet, data)\r\n                break;\r\n            case CommandType.gpp:\r\n                PlayerState.getInstance.transitionTo(SquintProcess, data)\r\n                break;\r\n            case CommandType.gpe:\r\n                PlayerState.getInstance.transitionTo(SquintEnd, data)\r\n                break;\r\n        }\r\n    }\r\n    gameState(cmd: string, data: any) {\r\n        //紀錄場景\r\n        RoomData.getInstance.nowStage = cmd\r\n        let senceText = new GameSenceText().change(cmd)\r\n        // console.log(senceText);\r\n        if (senceText != undefined)\r\n            EventMng.emit(GameStateEvent.UpdataSence, senceText)\r\n        switch (cmd) {\r\n\r\n            case ServerGameSenceType.ggs:\r\n                GameState.getInstance.transitionTo(RefreshRoomState, data)\r\n                break\r\n            case ServerGameSenceType.gbal:\r\n                GameState.getInstance.transitionTo(RefreshTabelData, data)\r\n                break\r\n            case ServerGameSenceType.gs1:\r\n                GameState.getInstance.transitionTo(WaitOrEnd, data)\r\n                break\r\n            case ServerGameSenceType.gs8:\r\n                GameState.getInstance.transitionTo(StartBoot, data)\r\n                break\r\n            case ServerGameSenceType.gs9:\r\n                GameState.getInstance.transitionTo(ShuffleCrads, data)\r\n                break\r\n            case ServerGameSenceType.gs10:\r\n                GameState.getInstance.transitionTo(OpenNewGame, data)\r\n                break\r\n            case ServerGameSenceType.gs11:\r\n                GameState.getInstance.transitionTo(ReadyBet, data)\r\n                break\r\n            case ServerGameSenceType.gs12:\r\n                GameState.getInstance.transitionTo(CloseBet, data)\r\n                break\r\n            case ServerGameSenceType.gs13:\r\n                GameState.getInstance.transitionTo(SendCards, data)\r\n                break\r\n            case ServerGameSenceType.gs14:\r\n                GameState.getInstance.transitionTo(PlayerSendCardSquintStart, data)\r\n                break\r\n            case ServerGameSenceType.gs15:\r\n                GameState.getInstance.transitionTo(PlayerSendCardSquintEnd, data)\r\n                break\r\n            case ServerGameSenceType.gs16:\r\n                GameState.getInstance.transitionTo(BankerSendCardSquintStart, data)\r\n                break\r\n            case ServerGameSenceType.gs17:\r\n                GameState.getInstance.transitionTo(BankerSendCardSquintEnd, data)\r\n                break\r\n            case ServerGameSenceType.gs18:\r\n                GameState.getInstance.transitionTo(PlayerRepairCard, data)\r\n                break\r\n            case ServerGameSenceType.gs19:\r\n                GameState.getInstance.transitionTo(PlayerRepairCardSquintStart, data)\r\n                break\r\n            case ServerGameSenceType.gs20:\r\n                GameState.getInstance.transitionTo(PlayerRepairCardSquintEnd, data)\r\n                break\r\n            case ServerGameSenceType.gs21:\r\n                GameState.getInstance.transitionTo(BankerRepairCard, data)\r\n                break\r\n            case ServerGameSenceType.gs22:\r\n                GameState.getInstance.transitionTo(BankerRepairCardSquintStart, data)\r\n                break\r\n            case ServerGameSenceType.gs23:\r\n                GameState.getInstance.transitionTo(BankerRepairCardSquintEnd, data)\r\n                break\r\n            case ServerGameSenceType.gs24:\r\n                GameState.getInstance.transitionTo(ShowResoult, data)\r\n                break\r\n            case ServerGameSenceType.gs25:\r\n                GameState.getInstance.transitionTo(EndRound, data)\r\n                break\r\n            case ServerGameSenceType.gs30:\r\n                GameState.getInstance.transitionTo(EndBoot, data)\r\n                break\r\n\r\n        }\r\n        // if (!GameState.isStateing)\r\n        // else\r\n        //     GameState.requestStay()\r\n    }\r\n\r\n\r\n    checkError(cmd: string, data: any) {\r\n        let message: string;\r\n        message = this.serverErrorCode(data.code)\r\n        switch (cmd) {\r\n            case CommandType.ssdis://系統踢出\r\n                CheckLoading.getInstance.resetState(CheckLoadingType.isWebSocketOpen)\r\n                break;\r\n                // case CommandType.ssntf://系統通知\r\n                //     // Panel_Message.showConfirm(this, 0, message)\r\n                //     break;\r\n                // case CommandType.sschk://逾時檢查\r\n                //     break;\r\n                // default:\r\n                //     message = this.serverErrorCode(data.code)\r\n\r\n                break;\r\n        }\r\n        this.messaggeState(cmd, message);\r\n    }\r\n    messaggeState(cmd: string = \"\", caption: string) {\r\n        // console.log(caption, cmd);\r\n        let transformStr = this.serverErrorCode(caption)//error code代碼轉換文字\r\n        switch (cmd) {\r\n            case MessageCommend.BackHome:\r\n                MessageState.getInstance.transitionTo_Old(new BackHomeMessage(), transformStr).requestChange();\r\n                break;\r\n            case CommandType.excr:\r\n            case CommandType.excc:\r\n                MessageState.getInstance.transitionTo_Old(new ShowConfirmMessage(), transformStr).requestChange();\r\n                PanelLoading.instance.closeLoading()\r\n                break\r\n            default:\r\n                MessageState.getInstance.transitionTo_Old(new ShowConfirmMessage(), transformStr).requestChange();\r\n                break;\r\n        }\r\n\r\n    }\r\n    serverErrorCode(code: string) {\r\n        if (isNaN(Number(code)))\r\n            return code\r\n        else\r\n            return SocketSetting.t(code, LangType.Server);\r\n\r\n    }\r\n    resetView() {\r\n        switch (PublicData.getInstance.currentScene) {\r\n            case GameSceneName.Lobby:\r\n                ViewState.getInstance.transitionTo(LobbyCloseView)\r\n                break\r\n            case GameSceneName.GameRoom:\r\n                ViewState.getInstance.transitionTo(GameCloseView)\r\n                break\r\n        }\r\n\r\n    }\r\n\r\n    resetWait() {\r\n        switch (PublicData.getInstance.currentScene) {\r\n            case GameSceneName.Lobby:\r\n                ViewState.getInstance.transitionTo(LobbyOpenView)\r\n                break\r\n            case GameSceneName.GameRoom:\r\n                ViewState.getInstance.transitionTo(GameOpenView)\r\n                break\r\n        }\r\n    }\r\n\r\n\r\n}\r\n"]}
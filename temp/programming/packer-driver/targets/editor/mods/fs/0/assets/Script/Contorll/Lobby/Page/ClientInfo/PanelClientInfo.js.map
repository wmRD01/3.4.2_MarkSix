{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/Page/ClientInfo/PanelClientInfo.ts"],"names":["assetManager","Button","Label","Sprite","SpriteFrame","_decorator","EditMenu","LangType","LobbyStateEvent","NotificationType","EventMng","BaseComponent","CreateFileSprite","Player","PublicData","PublicModel","SocketSetting","RequestGPG","PanelLoading","PanelSystemMessage","ccclass","property","PanelClientInfo","onLoad","show","getInstance","mapEvnet","get","PanelClient","on","EditUpdate","onEditUpData","setEvent","NextIssueID","resetButton","labelPhone","string","labelNickName","labelMail","onEnable","startDelay","requestMyInfo","requesMyScore","stopDelay","setTimeout","instance","closeLoading","bind","onDisable","onEditTarget","e","customEventData","closeButton","Number","Nickname","emit","EditNickname","Phone","EditPhone","Email","EditEmail","str","type","checkStringNull","onSelectPhoto","onUploadAvatar","responError","_spriteFrame","file","fileData","FormData","append","Request","setMethod","Method","POST","deletContentType","setBody","setToken","gpgToken","fetchData","gpgUrlPlayApi","API","UploadAvatar","response","responseUploadAvatar","console","log","Status","Code","spritePlayer","spriteFrame","errorCode","showSingleConfirm","t","Game","Promise","resolve","reject","body","Body","NeedToken","MyInfo","sign","convertMD5","gpgApiKey","convert","URLSearchParams","toString","responseMyInfo","gpgInfo","data","nickName","email","photo","headPhoto","loadPicture","getplatform","split","replace","phoneNumber","url","loadRemote","err","image","error","message","createWithImage","MyScore","getDate","Date","today","sDate","getFullYear","getMonth","eDate","getMonthAllDay","convertSign","My_Score","responseMyScore","labelRank","rank","labelBetCount","betTimes","labelPointCount","totalScore","buttonEditNickname","node","active"],"mappings":"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","sourcesContent":["import { assetManager, Button, EventTouch, ImageAsset, Label, Sprite, SpriteFrame, _decorator } from 'cc';\r\nimport { EditMenu } from '../../../../Enum/EditMenu';\r\nimport { LangType } from '../../../../Enum/LangType';\r\nimport { LobbyStateEvent } from '../../../../Enum/LobbyStateEvent';\r\nimport { NotificationType } from '../../../../Enum/NotificationType';\r\nimport EventMng from '../../../../Manager/EventMng';\r\nimport BaseComponent from '../../../../Model/ComponentBase';\r\nimport CreateFileSprite from '../../../../Model/CreateFileSprite';\r\nimport Player from '../../../../Model/Player';\r\nimport PublicData from '../../../../Model/PublicData';\r\nimport PublicModel from '../../../../Model/PublicModel';\r\nimport SocketSetting from '../../../../Socket/SocketSetting';\r\nimport { RequestGPG } from '../../../Api/GPGAPI/RequestGPG';\r\nimport { ResponseGPG } from '../../../Api/GPGAPI/ResponseGPG';\r\nimport PanelLoading from '../../../NoClearNode/PanelLoading';\r\nimport PanelSystemMessage from '../../../NoClearNode/PanelSystemMessage';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PanelClientInfo')\r\nexport default class PanelClientInfo extends BaseComponent {\r\n    //#region  propty\r\n    isNeedUpdate: boolean = true;\r\n    isLoading: boolean = false;\r\n    @property(Sprite)\r\n    spritePlayer: Sprite;\r\n    @property(Label)\r\n    labelPhone: Label\r\n    @property(Label)\r\n    labelMail: Label\r\n    @property(Label)\r\n    labelNickName: Label\r\n    @property(Label)\r\n    labelBetCount: Label;\r\n    @property(Label)\r\n    labelPointCount: Label;\r\n    @property(Label)\r\n    labelRank: Label;\r\n\r\n    @property(Button)\r\n    buttonEditNickname: Button;\r\n    @property(Button)\r\n    buttonEditPicture: Button;\r\n\r\n    getplatform: string;\r\n\r\n    //#endregion\r\n    onLoad() {\r\n        super.onLoad()\r\n        this.show()\r\n        EventMng.getInstance.mapEvnet.get(NotificationType.PanelClient).on(LobbyStateEvent.EditUpdate, this.onEditUpData, this)\r\n        this.setEvent(LobbyStateEvent.NextIssueID, this.resetButton)\r\n        this.labelPhone.string = \"\"\r\n        this.labelNickName.string = \"\"\r\n        this.labelMail.string = \"\"\r\n    }\r\n    async onEnable() {\r\n        this.startDelay()\r\n        await this.requestMyInfo()\r\n        await this.requesMyScore()\r\n        if (this.stopDelay() < 1)\r\n            setTimeout(PanelLoading.instance.closeLoading.bind(PanelLoading.instance), 1000);\r\n        else\r\n            PanelLoading.instance.closeLoading()\r\n    }\r\n    onDisable() {\r\n        this.resetButton()\r\n    }\r\n    onEditTarget(e: EventTouch, customEventData?: string) {\r\n        this.closeButton()\r\n        switch (Number(customEventData)) {\r\n            case EditMenu.Nickname:\r\n                EventMng.getInstance.mapEvnet.get(NotificationType.PanelClient).emit(LobbyStateEvent.EditNickname)\r\n                break;\r\n            case EditMenu.Phone:\r\n                EventMng.getInstance.mapEvnet.get(NotificationType.PanelClient).emit(LobbyStateEvent.EditPhone)\r\n                break;\r\n            case EditMenu.Email:\r\n                EventMng.getInstance.mapEvnet.get(NotificationType.PanelClient).emit(LobbyStateEvent.EditEmail)\r\n                break;\r\n        }\r\n    }\r\n    onEditUpData(str: string, type: EditMenu) {\r\n        if (!PublicModel.getInstance.checkStringNull(str)) {\r\n            switch (type) {\r\n                case EditMenu.Nickname:\r\n                    this.labelNickName.string = str\r\n                    break;\r\n                case EditMenu.Phone:\r\n                    this.labelPhone.string = str\r\n                    break;\r\n            }\r\n        }\r\n        this.resetButton()\r\n        PanelLoading.instance.closeLoading()\r\n    }\r\n    //#region UploadAvatar\r\n    onSelectPhoto() {\r\n        new CreateFileSprite(this.onUploadAvatar.bind(this), this.responError.bind(this))\r\n    }\r\n    async onUploadAvatar(_spriteFrame: SpriteFrame, file: File) {\r\n        // PublicModel.getInstance.convertByteToBinary(PublicModel.getInstance._base64ToBytes(base64))\r\n        let fileData = new FormData()\r\n        fileData.append('file', file)\r\n        await new RequestGPG.Request()\r\n            .setMethod(RequestGPG.Method.POST)\r\n            .deletContentType()\r\n            .setBody(fileData)\r\n            .setToken(Player.getInstance.gpgToken)\r\n            .fetchData(`${PublicData.getInstance.gpgUrlPlayApi}${RequestGPG.API.UploadAvatar}`, (response: ResponseGPG.UploadAvatar.DataClass) => {\r\n                this.responseUploadAvatar(response, _spriteFrame)\r\n            })\r\n    }\r\n    responseUploadAvatar(response: ResponseGPG.UploadAvatar.DataClass, _spriteFrame: SpriteFrame) {\r\n        console.log(\"圖片上傳成功?\", response);\r\n        if (response.Status.Code == \"0\") {\r\n            this.spritePlayer.spriteFrame = _spriteFrame\r\n            this.responError(\"047\")\r\n        }\r\n        else {\r\n\r\n        }\r\n    }\r\n    responError(errorCode: string) {\r\n        PanelSystemMessage.instance.showSingleConfirm(SocketSetting.t(errorCode, LangType.Game))\r\n    }\r\n    //#endregion\r\n    //#region  MyInfo\r\n    async requestMyInfo() {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            const body = new RequestGPG.Body.NeedToken.MyInfo()\r\n            body.sign = PublicModel.getInstance.convertMD5(PublicData.getInstance.gpgApiKey)\r\n            let convert = new URLSearchParams(body).toString()\r\n            await new RequestGPG.Request()\r\n                .setToken(Player.getInstance.gpgToken)\r\n                .fetchData(`${PublicData.getInstance.gpgUrlPlayApi}${RequestGPG.API.MyInfo}?${convert}`, this.responseMyInfo.bind(this))\r\n            resolve();\r\n        })\r\n    }\r\n    async responseMyInfo(response: ResponseGPG.MyInfo.DataClass) {\r\n        console.log(\"MyInfo\", response)\r\n        Player.getInstance.gpgInfo = response;\r\n\r\n        // response.data.photo\r\n        // console.log(Player.getInstance.gpgInfo);\r\n        if (!PublicModel.getInstance.checkStringNull(response.data.nickName))\r\n            this.labelMail.string = response.data.email\r\n        // /*上傳圖片功能暫時隱藏 */\r\n        if (!PublicModel.getInstance.checkStringNull(response.data.photo.headPhoto))\r\n            await this.loadPicture(response.data.photo.headPhoto)\r\n        if (!PublicModel.getInstance.checkStringNull(response.data.nickName)) {\r\n            this.getplatform = response.data.nickName?.split(\"_\")[0]/**因為前面會有註冊會員的文字，要刪除掉 */\r\n            this.labelNickName.string = response.data.nickName.replace(`${this.getplatform}_`, \"\")\r\n        }\r\n        else\r\n            this.labelNickName.string = response.data.nickName\r\n        this.labelPhone.string = PublicModel.getInstance.checkStringNull(response.data.phoneNumber) ? \"\" : response.data.phoneNumber\r\n    }\r\n    async loadPicture(url: string) {\r\n        return new Promise<void>((resolve, reject) => {\r\n            assetManager.loadRemote(url, (err, image: ImageAsset) => {\r\n                if (err) {\r\n                    console.error(err.message);\r\n                    return\r\n                }\r\n                this.spritePlayer.spriteFrame = SpriteFrame.createWithImage(image)\r\n                resolve()\r\n            })\r\n        })\r\n    }\r\n    //#endregion\r\n    //#region Betlog\r\n    async requesMyScore() {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            const body = new RequestGPG.Body.NeedToken.MyScore()\r\n            const getDate = new Date(PublicData.getInstance.today)\r\n            body.sDate = `${getDate.getFullYear()}-${getDate.getMonth() + 1}-01`\r\n            body.eDate = `${getDate.getFullYear()}-${getDate.getMonth() + 1}-${PublicModel.getInstance.getMonthAllDay(PublicData.getInstance.today)}`\r\n            body.sign = PublicModel.getInstance.convertSign(body, RequestGPG.Body.NeedToken.MyScore)\r\n            console.log(body);\r\n\r\n            let convert = new URLSearchParams(body).toString()\r\n            await new RequestGPG.Request()\r\n                .setToken(Player.getInstance.gpgToken)\r\n                .fetchData(`${PublicData.getInstance.gpgUrlPlayApi}${RequestGPG.API.My_Score}?${convert}`, this.responseMyScore.bind(this))\r\n            resolve()\r\n        })\r\n    }\r\n    responseMyScore(response?: ResponseGPG.My_Score.DataClass) {\r\n        console.log(\"玩家紀錄\", response);\r\n        if (response.data) {\r\n            this.labelRank.string = response.data.rank.toString()\r\n            this.labelBetCount.string = response.data.betTimes.toString()\r\n            this.labelPointCount.string = response.data.totalScore.toString()\r\n        }\r\n        else {\r\n            this.labelRank.string = \"0\"\r\n            this.labelBetCount.string = \"0\"\r\n            this.labelPointCount.string = \"0\"\r\n        }\r\n    }\r\n    //#endregion\r\n    resetButton() {\r\n        this.buttonEditNickname.node.active = true\r\n        // this.buttonEditPicture.node.active = true\r\n    }\r\n    closeButton() {\r\n        this.buttonEditNickname.node.active = false\r\n        // this.buttonEditPicture.node.active = false\r\n    }\r\n}\r\n"]}
{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/Page/PageControll.ts"],"names":["_decorator","EventTarget","PageView","Node","BaseSingletonComponent","PageAction","ccclass","property","PageControll","onLoad","pageView","getComponent","pageEvnet","on","ChangeTo","onToPage","start","closeTouch","index","page","length","active","target","node","off","EventType","TOUCH_START","_onTouchBegan","TOUCH_MOVE","_onTouchMoved","TOUCH_END","_onTouchEnded","TOUCH_CANCEL","_onTouchCancelled","currnetIndex","scrollToPage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,I,OAAAA,I;;AACrCC,MAAAA,sB;;AACEC,MAAAA,U,iBAAAA,U;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;yBAETQ,Y,WADpBF,OAAO,CAAC,cAAD,C,UAGHC,QAAQ,CAACJ,IAAD,C,oCAHb,MACqBK,YADrB,SAC0C;AAAA;AAAA,6DAD1C,CACiF;AAAA;AAAA;;AAAA;;AAAA;;AAAA,6CAIpD,IAAIP,WAAJ,EAJoD;;AAAA,gDAMtD,CANsD;AAAA;;AAO7EQ,QAAAA,MAAM,GAAG;AACL,gBAAMA,MAAN,GADK,CAEL;;AACA,eAAKC,QAAL,GAAgB,KAAKC,YAAL,CAAkBT,QAAlB,CAAhB;AACA,eAAKU,SAAL,CAAeC,EAAf,CAAkB;AAAA;AAAA,wCAAWC,QAA7B,EAAuC,KAAKC,QAA5C,EAAsD,IAAtD,EAJK,CAKL;AACH;;AACDC,QAAAA,KAAK,GAAG;AACJ,eAAKC,UAAL,CAAgB,KAAKP,QAArB;;AACA,eAAK,IAAIQ,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKC,IAAL,CAAUC,MAAtC,EAA8CF,KAAK,EAAnD,EAAuD;AACnD,iBAAKC,IAAL,CAAUD,KAAV,EAAiBG,MAAjB,GAA0B,KAA1B;AAEH;;AACD,eAAKN,QAAL,CAAc,CAAd;AAEH;;AACDE,QAAAA,UAAU,CAACK,MAAD,EAAmB;AACzB;AACAA,UAAAA,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBrB,IAAI,CAACsB,SAAL,CAAeC,WAA/B,EAA4CJ,MAAM,CAACK,aAAnD,EAAkEL,MAAlE,EAA0E,IAA1E,EAFyB,CAGzB;;AACAA,UAAAA,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBrB,IAAI,CAACsB,SAAL,CAAeG,UAA/B,EAA2CN,MAAM,CAACO,aAAlD,EAAiEP,MAAjE,EAAyE,IAAzE,EAJyB,CAKzB;;AACAA,UAAAA,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBrB,IAAI,CAACsB,SAAL,CAAeK,SAA/B,EAA0CR,MAAM,CAACS,aAAjD,EAAgET,MAAhE,EAAwE,IAAxE,EANyB,CAOzB;;AACAA,UAAAA,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBrB,IAAI,CAACsB,SAAL,CAAeO,YAA/B,EAA6CV,MAAM,CAACW,iBAApD,EAAuEX,MAAvE,EAA+E,IAA/E;AACH;AACD;;;AACAP,QAAAA,QAAQ,CAACG,KAAD,EAAkB;AACtB,eAAKC,IAAL,CAAU,KAAKe,YAAf,EAA6Bb,MAA7B,GAAsC,KAAtC;AACA,eAAKa,YAAL,GAAoBhB,KAApB;AACA,eAAKC,IAAL,CAAU,KAAKe,YAAf,EAA6Bb,MAA7B,GAAsC,IAAtC;AACA,eAAKX,QAAL,CAAcyB,YAAd,CAA2BjB,KAA3B,EAAkC,CAAlC;AAEH;;AAxC4E,O;;;;;iBAG9D,E","sourcesContent":["import { _decorator, EventTarget, PageView, Node } from 'cc';\r\nimport BaseSingletonComponent from '../../../../Patten/Singleton/BaseSingletonComponent';\r\nimport { PageAction } from '../../../Enum/PageAction';\r\nimport { PageMenu } from '../../../Enum/PageMenu';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PageControll')\r\nexport default class PageControll extends BaseSingletonComponent<PageControll>() {\r\n    pageView: PageView;\r\n    @property(Node)\r\n    page: Node[] = []\r\n    pageEvnet: EventTarget = new EventTarget();\r\n\r\n    currnetIndex: number = 0;\r\n    onLoad() {\r\n        super.onLoad()\r\n        // console.log(this.pageEvnet);\r\n        this.pageView = this.getComponent(PageView)\r\n        this.pageEvnet.on(PageAction.ChangeTo, this.onToPage, this)\r\n        // console.log(this.pageEvnet);\r\n    }\r\n    start() {\r\n        this.closeTouch(this.pageView)\r\n        for (let index = 0; index < this.page.length; index++) {\r\n            this.page[index].active = false\r\n\r\n        }\r\n        this.onToPage(1)\r\n\r\n    }\r\n    closeTouch(target: PageView) {\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_START, target._onTouchBegan, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_MOVE, target._onTouchMoved, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_END, target._onTouchEnded, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_CANCEL, target._onTouchCancelled, target, true);\r\n    }\r\n    /**接收的值也是number，只是PageMenu是enum內存number */\r\n    onToPage(index: PageMenu) {\r\n        this.page[this.currnetIndex].active = false\r\n        this.currnetIndex = index\r\n        this.page[this.currnetIndex].active = true\r\n        this.pageView.scrollToPage(index, 0)\r\n\r\n    }\r\n}"]}
{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/PageControll.ts"],"names":["_decorator","PageView","Node","DEV","BaseSingletonComponent","NotificationType","PageAction","EventMng","PanelLoading","ccclass","property","PageControll","onLoad","pageView","getComponent","getInstance","mapEvnet","get","Page","on","ChangeTo","onToPage","index","page","length","active","start","closeTouch","console","log","emit","target","node","off","EventType","TOUCH_START","_onTouchBegan","TOUCH_MOVE","_onTouchMoved","TOUCH_END","_onTouchEnded","TOUCH_CANCEL","_onTouchCancelled","instance","openLoading","currnetIndex","scrollToPage"],"mappings":"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","sourcesContent":["import { _decorator, EventTarget, PageView, Node } from 'cc';\r\nimport { DEV } from 'cc/env';\r\nimport BaseSingletonComponent from '../../../Patten/Singleton/BaseSingletonComponent';\r\nimport { NotificationType } from '../../Enum/NotificationType';\r\nimport { PageAction } from '../../Enum/PageAction';\r\nimport { PageMenu } from '../../Enum/PageMenu';\r\nimport AssetMng from '../../Manager/AssetMng';\r\nimport EventMng from '../../Manager/EventMng';\r\nimport MusicMng from '../../Manager/MusicMng';\r\nimport PublicModel from '../../Model/PublicModel';\r\nimport PanelLoading from '../NoClearNode/PanelLoading';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PageControll')\r\nexport default class PageControll extends BaseSingletonComponent<PageControll>() {\r\n    pageView: PageView;\r\n    @property(Node)\r\n    page: Node[] = []\r\n\r\n    currnetIndex: number = 0;\r\n    onLoad() {\r\n        /**現階段測試 正是要往Loading移動 */\r\n\r\n        super.onLoad()\r\n        // console.log(this.pageEvnet);\r\n        this.pageView = this.getComponent(PageView)\r\n\r\n        EventMng.getInstance.mapEvnet.get(NotificationType.Page).on(PageAction.ChangeTo, this.onToPage, this)\r\n        for (let index = 0; index < this.page.length; index++) {\r\n            this.page[index].active = false\r\n        }\r\n        // console.log(this.pageEvnet);\r\n    }\r\n    start() {\r\n        this.closeTouch(this.pageView)\r\n        console.log(\"欸我已經送了欸\");\r\n\r\n        if (DEV)\r\n            EventMng.getInstance.mapEvnet.get(NotificationType.Page).emit(PageAction.ChangeTo, 0);\r\n        else\r\n            EventMng.getInstance.mapEvnet.get(NotificationType.Page).emit(PageAction.ChangeTo, 0);\r\n    }\r\n    closeTouch(target: PageView) {\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_START, target._onTouchBegan, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_MOVE, target._onTouchMoved, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_END, target._onTouchEnded, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_CANCEL, target._onTouchCancelled, target, true);\r\n    }\r\n    /**接收的值也是number，只是PageMenu是enum內存number */\r\n    onToPage(index: PageMenu) {\r\n        PanelLoading.instance.openLoading(\"資料讀取中\")\r\n        this.page[this.currnetIndex].active = false\r\n        this.currnetIndex = index\r\n        this.page[this.currnetIndex].active = true\r\n        this.pageView.scrollToPage(index, 0)\r\n    }\r\n}\r\n\r\n\r\n"]}
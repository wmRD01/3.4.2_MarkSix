{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/PanelBottomNavigationBar.ts"],"names":["Button","Node","UITransform","v3","_decorator","PageAction","BaseComponent","PublicData","PublicModel","PageControll","ccclass","property","PanelBottomNavigationBar","Map","ActionDic","縮","onLoad","mapButton","set","btnHome","btnPoint","btnChooeseBall","btnClientInfo","btnSetting","circleY","getInstance","BaseViewHeight","nodeCircle","getComponent","height","onEnable","instance","pageEvnet","on","ChangeTo","onEventChangeTo","onDisable","off","start","index","onMoveCircle","toString","e","customEventData","currentIndex","Number","getX","to2DConvertOtherNodeSpaceAR","getButton","node","x","goTarget","startAction","emit","get","getCircleScale","getScale","actionDic","isAction","update","dt","speed","放","setPosition","setScale","oneSclaeVec3"],"mappings":"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","sourcesContent":["import { Button, Node, UITransform, v3, Vec3, _decorator } from \"cc\";\r\nimport { PageAction } from \"../../Enum/PageAction\";\r\nimport { PageMenu } from \"../../Enum/PageMenu\";\r\nimport ButtonMng from \"../../Manager/ButtonMng\";\r\nimport BaseComponent from \"../../Model/ComponentBase\";\r\nimport PublicData from \"../../Model/PublicData\";\r\nimport PublicModel from \"../../Model/PublicModel\";\r\nimport PageControll from \"./PageControll\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PanelBottomNavigationBar')\r\nexport default class PanelBottomNavigationBar extends BaseComponent {\r\n    @property(Button)\r\n    btnHome: Button;\r\n    @property(Button)\r\n    btnPoint: Button;\r\n    @property(Button)\r\n    btnChooeseBall: Button;\r\n    @property(Button)\r\n    btnClientInfo: Button;\r\n    @property(Button)\r\n    btnSetting: Button;\r\n    @property(Node)\r\n    btnLayout: Node;\r\n    @property(Node)\r\n    nodeCircle: Node;\r\n    circleY: number;\r\n    mapButton: Map<number, Button> = new Map()\r\n    currentIndex: number = 0\r\n\r\n    //#region 動畫參數\r\n    isAction: boolean = false\r\n    actionDic: ActionDic = ActionDic.縮;\r\n    @property\r\n    speed: number = 3\r\n    goTarget: Vec3;\r\n    getCircleScale: number\r\n    //#endregion\r\n    onLoad() {\r\n        // PageControll.instance.pageEvnet.on(PageAction.ChangeTo, this.onMoveCircle, this)\r\n\r\n        this.mapButton.set(0, this.btnHome);\r\n        this.mapButton.set(1, this.btnPoint);\r\n        this.mapButton.set(2, this.btnChooeseBall);\r\n        this.mapButton.set(3, this.btnClientInfo);\r\n        this.mapButton.set(4, this.btnSetting);\r\n        this.circleY = -(PublicData.getInstance.BaseViewHeight / 2) + (this.nodeCircle.getComponent(UITransform).height / 2)\r\n    }\r\n    onEnable() {\r\n        PageControll.instance.pageEvnet.on(PageAction.ChangeTo, this.onEventChangeTo, this)\r\n    }\r\n    onDisable() {\r\n        PageControll.instance.pageEvnet.off(PageAction.ChangeTo, this.onEventChangeTo, this)\r\n    }\r\n    start() {\r\n        // for (let index = 0; index < this.btnLayout.children.length; index++) {\r\n        //     ButtonMng.addEvent(this, \"onMoveCircle\", this.getButton(index), index.toString())\r\n        // }\r\n    }\r\n    onEventChangeTo(index: PageMenu) {\r\n        this.onMoveCircle(null, index.toString())\r\n    }\r\n    onMoveCircle(e: Event, customEventData?: string) {\r\n        if (this.currentIndex == Number(customEventData)) return;\r\n        this.currentIndex = Number(customEventData)\r\n        let getX = PublicModel.getInstance.to2DConvertOtherNodeSpaceAR(this.nodeCircle, this.getButton(this.currentIndex).node).x\r\n        this.goTarget = v3(getX, this.circleY)\r\n        this.startAction()\r\n        PageControll.instance.pageEvnet.emit(PageAction.ChangeTo, this.currentIndex)\r\n    }\r\n    getButton(index: number) {\r\n        return this.mapButton.get(index)\r\n    }\r\n    startAction() {\r\n        this.getCircleScale = this.nodeCircle.getScale().x\r\n        this.actionDic = ActionDic.縮\r\n        this.isAction = true\r\n    }\r\n    update(dt: number) {\r\n        if (this.isAction) {\r\n            switch (this.actionDic) {\r\n                case ActionDic.縮:\r\n                    this.getCircleScale = this.getCircleScale - (dt * this.speed)\r\n                    if (this.getCircleScale < 0) {\r\n                        this.getCircleScale = 0\r\n                        this.actionDic = ActionDic.放;\r\n                        this.nodeCircle.setPosition(this.goTarget)\r\n                    }\r\n                    break;\r\n                case ActionDic.放:\r\n                    this.getCircleScale = this.getCircleScale + (dt * this.speed)\r\n                    if (this.getCircleScale > 1) {\r\n                        this.getCircleScale = 1\r\n                        this.isAction = false\r\n                    }\r\n                    break;\r\n            }\r\n            this.nodeCircle.setScale(PublicModel.getInstance.oneSclaeVec3(this.getCircleScale))\r\n        }\r\n    }\r\n}\r\nenum ActionDic {\r\n    縮,\r\n    放\r\n}"]}
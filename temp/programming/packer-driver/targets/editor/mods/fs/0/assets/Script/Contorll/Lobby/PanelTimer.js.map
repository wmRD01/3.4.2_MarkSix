{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/PanelTimer.ts"],"names":["Label","Tween","_decorator","MyMath","GameEvent","GameStateEvent","BaseComponent","PublicModel","ccclass","property","PanelTimer","onEnable","setEvent","ResetView","allReset","CloseBet","OpenBet","setTimer","UpdataSence","changeState","start","window","isPhone","phoneInit","update","dt","labelTime","node","active","currentTime","minus","convetTime","getInstance","formatSecond","string","eventEmit","UpdateTime","onDisable","deletEvent","stopAllByTarget","str","_gs11","console","log","betTime","toString"],"mappings":"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","sourcesContent":["import { Label, Sprite, Tween, tween, _decorator } from \"cc\";\r\nimport MyMath from \"../../../Plug/MyMath\";\r\nimport { GameEvent } from \"../../Enum/GameEvent\";\r\nimport { GameStateEvent } from \"../../Enum/GameStateEvent\";\r\nimport BaseComponent from \"../../Model/ComponentBase\";\r\nimport PublicModel from \"../../Model/PublicModel\";\r\nimport { gs11 } from \"../Api/ResponeCommand\";\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PanelTimer')\r\nexport default class PanelTimer extends BaseComponent {\r\n    @property(Label)\r\n    labelTime: Label;\r\n    isStartTime: boolean\r\n    currentTime: number\r\n    onEnable() {\r\n        this.setEvent(GameEvent.ResetView, this.allReset)\r\n        this.setEvent(GameStateEvent.CloseBet, this.allReset)\r\n        this.setEvent(GameStateEvent.OpenBet, this.setTimer)\r\n        this.setEvent(GameStateEvent.UpdataSence, this.changeState)\r\n    }\r\n\r\n    start() {\r\n        if (window.isPhone)\r\n            this.phoneInit()\r\n    }\r\n    update(dt: number) {\r\n        if (this.labelTime.node.active) {\r\n            this.currentTime = MyMath.minus(this.currentTime, dt)\r\n            let convetTime: string = PublicModel.getInstance.formatSecond(this.currentTime)\r\n            this.labelTime.string = PublicModel.getInstance.formatSecond(this.currentTime)\r\n            this.eventEmit(GameStateEvent.UpdateTime, convetTime)\r\n\r\n            if (MyMath.minus(this.currentTime, dt) < 0) {\r\n                this.eventEmit(GameStateEvent.UpdateTime, \"0\")\r\n                this.labelTime.node.active = false\r\n            }\r\n        }\r\n    }\r\n    onDisable() {\r\n        this.deletEvent(GameStateEvent.OpenBet, this.setTimer)\r\n        this.deletEvent(GameStateEvent.CloseBet, this.allReset)\r\n        this.deletEvent(GameEvent.ResetView, this.allReset)\r\n        this.deletEvent(GameStateEvent.UpdataSence, this.changeState)\r\n    }\r\n    allReset() {\r\n        this.labelTime.node.active = false\r\n        Tween.stopAllByTarget(this.labelTime)\r\n    }\r\n    changeState(str: string) {\r\n        // this.labelState.string = str\r\n    }\r\n\r\n    setTimer(_gs11: gs11) {\r\n        this.labelTime.node.active = true\r\n        console.log(\"time設定\", _gs11.betTime);\r\n        this.currentTime = _gs11.betTime\r\n        this.eventEmit(GameStateEvent.UpdateTime, this.currentTime.toString())\r\n    }\r\n\r\n}\r\n"]}
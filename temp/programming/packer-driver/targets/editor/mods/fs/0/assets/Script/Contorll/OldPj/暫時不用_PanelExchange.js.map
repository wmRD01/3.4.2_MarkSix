{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/OldPj/%E6%9A%AB%E6%99%82%E4%B8%8D%E7%94%A8_PanelExchange.ts"],"names":["Button","EditBox","find","Label","Sprite","_decorator","LisnerEditBox","ButtonMng","EditBoxMng","PublicData","GameEvent","SocketSetting","LangType","MyMath","CommandType","excc","excr","WebSocketEvent","GameData","PublicModel","PanelLoading","CheckLoading","CheckLoadingType","DataExchange","PointBtn","ccclass","property","PanelExchange","onLoad","editBoxEnterNumber","node","getComponent","contentBntton","buttonClose","buttonBlock","buttonConfirm","buttonRefreshView","buttongoStaoredValue","buttonCanelText","labelConfirm","labelTitle","labelWalletHave_Title","labelWalletHaveNumber","labelChangeScaleTitle","labelChangeScaleNumber","labelClinetHaveTitle","labelClinetHaveNumber","index","children","length","btn","Btn","spriteButtonBG","labelNumber","string","getInstance","exChangeLib","Intl","NumberFormat","format","Number","toString","arrayPointButton","push","setEvent","ShowExchange","show","setEditboxEevent","setButtonEvent","viewInit","start","hide","checkState","isGameSence","eventEmit","InGameRoom","refreshWallet","refreshClinetHave","onRefreshClintMoney","staoredValueUrl","undefined","active","requestMoney","instance","openLoading","_excr","coinType","WebSocketSendCommand","updataMoney","_wallet","_clinetHave","isClearEdit","wallet","clinetHave","refreshEditBoxState","closeLoading","setLanguage","t","Game","defaultPlaceholderLabel","placeholderLabel","addEvent","EditBox_Start","EditBox_End","EditBox_Editing","e","customEventData","onGoStaoredValue","StaoredValue","onAddPoint","getNum","isNaN","refreshNum","editWrite","filterNumberDot","count","add","onExChagne","_excc","money","change","isOn","convertNumber","setState","minus","refreshChangeScale","num","onClearEditBoxString","onEditBoxStart","console","log","onEditBoxEditing","document","getElementById","type","window","value","onEditBoxEnd"],"mappings":"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","sourcesContent":["import { Button, EditBox, find, Label, Sprite, _decorator } from \"cc\";\r\nimport { LisnerEditBox } from \"../../Enum/LisnerEditBox\";\r\nimport ButtonMng from \"../../Manager/ButtonMng\";\r\nimport EditBoxMng from \"../../Manager/EditBoxMng\";\r\nimport PublicData from \"../../Model/PublicData\";\r\nimport { GameEvent } from \"../../Enum/GameEvent\";\r\nimport SocketSetting from \"../../Socket/SocketSetting\";\r\nimport { LangType } from \"../../Enum/LangType\";\r\nimport MyMath from \"../../../Plug/MyMath\";\r\nimport { CommandType } from \"../../Enum/CommandType\";\r\nimport { excc, excr } from \"../Api/SendCommand\";\r\nimport { WebSocketEvent } from \"../../Enum/WebSocketEvent\";\r\nimport GameData from \"../../Model/GameData\";\r\nimport PublicModel from \"../../Model/PublicModel\";\r\nimport PanelLoading from \"../NoClearNode/PanelLoading\";\r\nimport CheckLoading from \"../../Model/CheckLoading\";\r\nimport { CheckLoadingType } from \"../../Enum/CheckLoadingType\";\r\nimport DataExchange, { PointBtn } from \"../Data/Panel/DataExchange\";\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PanelExchange')\r\nexport default class PanelExchange extends DataExchange {\r\n    protected onLoad() {\r\n        super.onLoad()\r\n        this.editBoxEnterNumber = find(\"editBox_EnterNum\", this.node).getComponent(EditBox)\r\n        this.contentBntton = find(\"con_Btn\", this.node)\r\n        this.buttonClose = find(\"btn_Close\", this.node).getComponent(Button)\r\n        this.buttonBlock = find(\"BlockBG\", this.node).getComponent(Button)\r\n        this.buttonConfirm = find(\"btn_Confirm\", this.node).getComponent(Button)\r\n        this.buttonRefreshView = find(\"btn_RefreshView\", this.node).getComponent(Button)\r\n        this.buttongoStaoredValue = find(\"btn_goStaoredValue\", this.node).getComponent(Button)\r\n        this.buttonCanelText = find(\"btn_CanelText\", this.editBoxEnterNumber.node).getComponent(Button)\r\n        this.labelConfirm = find(\"label_Confirm\", this.buttonConfirm.node).getComponent(Label)\r\n        this.labelTitle = find(\"label_Title\", this.node).getComponent(Label)\r\n        this.labelWalletHave_Title = find(\"label_WalletHave_Title\", this.node).getComponent(Label)\r\n        this.labelWalletHaveNumber = find(\"label_WalletHave_Num\", this.node).getComponent(Label)\r\n        this.labelChangeScaleTitle = find(\"label_ChangeScale_Title\", this.node).getComponent(Label)\r\n        this.labelChangeScaleNumber = find(\"label_ChangeScale_Num\", this.node).getComponent(Label)\r\n        this.labelClinetHaveTitle = find(\"label_ClinetHave_Title\", this.node).getComponent(Label)\r\n        this.labelClinetHaveNumber = find(\"label_ClinetHave_Num\", this.node).getComponent(Label)\r\n\r\n        for (let index = 0; index < this.contentBntton.children.length; index++) {\r\n            let btn = new PointBtn.Btn()\r\n            btn.btn = this.contentBntton.children[index].getComponent(Button)\r\n            btn.spriteButtonBG = this.contentBntton.children[index].getComponent(Sprite)\r\n            btn.labelNumber = find(\"label_Num\", this.contentBntton.children[index]).getComponent(Label)\r\n            if (index == this.contentBntton.children.length - 1)\r\n                btn.labelNumber.string = GameData.getInstance.exChangeLib[index]\r\n            else\r\n                btn.labelNumber.string = Intl.NumberFormat().format(Number(GameData.getInstance.exChangeLib[index])).toString()\r\n            this.arrayPointButton.push(btn)\r\n        }\r\n        this.setEvent(GameEvent.ShowExchange, this.show)\r\n        this.setEditboxEevent();\r\n        this.setButtonEvent()\r\n        this.viewInit()\r\n    }\r\n    start() {\r\n    }\r\n\r\n\r\n    hide() {\r\n        super.hide()\r\n        if (!CheckLoading.getInstance.checkState(CheckLoadingType.isGameSence))\r\n            this.eventEmit(GameEvent.InGameRoom)\r\n    }\r\n    show() {\r\n        super.show()\r\n        this.refreshWallet(\"-\")\r\n        this.refreshClinetHave(\"-\")\r\n        this.editBoxEnterNumber.string = \"\"\r\n        this.onRefreshClintMoney();\r\n        if (PublicData.getInstance.staoredValueUrl == \"\" || PublicData.getInstance.staoredValueUrl == undefined)\r\n            this.buttongoStaoredValue.node.active = false\r\n\r\n        // if (window.isEditor)\r\n        //     this.endRefresh(300, 10000)\r\n    }\r\n    requestMoney() {\r\n        PanelLoading.instance.openLoading()\r\n        let _excr = new excr()\r\n        _excr.coinType = GameData.getInstance.coinType\r\n        this.eventEmit(WebSocketEvent.WebSocketSendCommand, CommandType.excr, _excr)\r\n    }\r\n    updataMoney(_wallet: number, _clinetHave: number, isClearEdit?: boolean) {\r\n        this.wallet = _wallet\r\n        this.clinetHave = _clinetHave\r\n        this.refreshClinetHave(Intl.NumberFormat().format(_clinetHave))\r\n        this.refreshWallet(Intl.NumberFormat().format(_wallet))\r\n        this.refreshEditBoxState(0)\r\n        this.editBoxEnterNumber.string = \"\"\r\n        // let temp = this.editBox_EnterNum.string == \"\" ? 0 : Number(MainModel.filterNumberDot(this.editBox_EnterNum.string))\r\n        // this.refreshClinetHave(Intl.NumberFormat().format(MyMath.minus(_clinetHave, temp)))\r\n        // this.refreshWallet(Intl.NumberFormat().format(MyMath.add(_wallet, temp)))\r\n        // this.refreshEditBoxState(temp)\r\n        PanelLoading.instance.closeLoading()\r\n    }\r\n\r\n    setLanguage() {\r\n        this.labelTitle.string = SocketSetting.t(\"001\", LangType.Game)\r\n        this.labelWalletHave_Title.string = SocketSetting.t(\"017\", LangType.Game)\r\n        this.labelClinetHaveTitle.string = SocketSetting.t(\"021\", LangType.Game)\r\n        this.labelChangeScaleTitle.string = SocketSetting.t(\"015\", LangType.Game)\r\n        this.labelConfirm.string = SocketSetting.t(\"018\", LangType.Game)\r\n        this.defaultPlaceholderLabel = SocketSetting.t(\"016\", LangType.Game)\r\n        this.editBoxEnterNumber.placeholderLabel.string = this.defaultPlaceholderLabel\r\n    }\r\n    private setButtonEvent() {\r\n        ButtonMng.addEvent(this, \"onClearEditBoxString\", this.buttonCanelText)\r\n        ButtonMng.addEvent(this, \"onExChagne\", this.buttonConfirm)\r\n        ButtonMng.addEvent(this, \"hide\", this.buttonClose)\r\n        ButtonMng.addEvent(this, \"hide\", this.buttonBlock)\r\n        ButtonMng.addEvent(this, \"onRefreshClintMoney\", this.buttonRefreshView)\r\n        ButtonMng.addEvent(this, \"onGoStaoredValue\", this.buttongoStaoredValue)\r\n\r\n        for (let index = 0; index < this.arrayPointButton.length; index++) {\r\n            ButtonMng.addEvent(\r\n                this,\r\n                \"onAddPoint\",\r\n                this.arrayPointButton[index].btn,\r\n                index.toString())\r\n        }\r\n    }\r\n    private setEditboxEevent() {\r\n        EditBoxMng.addEvent(\r\n            this,\r\n            \"onEditBoxStart\",\r\n            this.editBoxEnterNumber,\r\n            LisnerEditBox.EditBox_Start)\r\n        EditBoxMng.addEvent(\r\n            this,\r\n            \"onEditBoxEnd\",\r\n            this.editBoxEnterNumber,\r\n            LisnerEditBox.EditBox_End)\r\n        EditBoxMng.addEvent(\r\n            this,\r\n            \"onEditBoxEditing\",\r\n            this.editBoxEnterNumber,\r\n            LisnerEditBox.EditBox_Editing)\r\n    }\r\n    private onRefreshClintMoney(e?: Event, customEventData?: string) {\r\n        this.requestMoney()\r\n    }\r\n    private onGoStaoredValue(e: Event, customEventData?: string) {\r\n        this.eventEmit(WebSocketEvent.StaoredValue)\r\n    }\r\n    private onAddPoint(e: Event, customEventData?: string) {\r\n        let getNum = Number(GameData.getInstance.exChangeLib[Number(customEventData)])\r\n\r\n        if (isNaN(getNum)) {\r\n            this.editBoxEnterNumber.string = Intl.NumberFormat().format(this.clinetHave)\r\n            this.refreshEditBoxState(this.clinetHave);//最大值就是勝0元\r\n            this.refreshNum(this.clinetHave)\r\n            return;\r\n        }\r\n        // console.log(GameData.i().exChangeLib, getNum);\r\n\r\n\r\n        let editWrite = Number(PublicModel.getInstance.filterNumberDot(this.editBoxEnterNumber.string))\r\n        // editWrite = isNaN(editWrite) ? 0 : Number(editWrite)\r\n        let count = MyMath.add(getNum, editWrite)\r\n        this.editBoxEnterNumber.string = Intl.NumberFormat().format(count)\r\n        this.refreshEditBoxState(count)\r\n        this.refreshNum(count)\r\n    }\r\n    private onExChagne(e: Event, customEventData?: string) {\r\n        let _excc = new excc()\r\n        _excc.coinType = GameData.getInstance.coinType\r\n        _excc.money = Number(PublicModel.getInstance.filterNumberDot(this.editBoxEnterNumber.string))\r\n        this.eventEmit(WebSocketEvent.WebSocketSendCommand, CommandType.excc, _excc)\r\n        PanelLoading.instance.openLoading()\r\n        //傳給Server等他回應後再關閉，並更新錢包\r\n    }\r\n    /**\r\n     * @param change 帶入異動的值\r\n     */\r\n    refreshEditBoxState(change: number) {\r\n        let isOn = true\r\n        for (let index = 0; index < this.arrayPointButton.length; index++) {\r\n            let convertNumber = Number(GameData.getInstance.exChangeLib[index])\r\n            if (isNaN(convertNumber)) {\r\n                this.arrayPointButton[index].setState(true)\r\n                return\r\n            }\r\n            if (!isNaN(convertNumber) && convertNumber > MyMath.minus(this.clinetHave, change)) isOn = false\r\n            this.arrayPointButton[index].setState(isOn)\r\n        }\r\n    }\r\n    refreshNum(change: number) {\r\n        // if (isNaN(Number(Intl.NumberFormat().format(MyMath.minus(this.clinetHave, change))))\r\n        this.labelClinetHaveNumber.string = Intl.NumberFormat().format(MyMath.minus(this.clinetHave, change))\r\n        this.labelWalletHaveNumber.string = Intl.NumberFormat().format(MyMath.add(this.wallet, change))\r\n    }\r\n\r\n    private refreshChangeScale(num: number) {\r\n        this.labelChangeScaleNumber.string = num.toString()\r\n    }\r\n\r\n    private refreshClinetHave(num: string) {\r\n        this.labelClinetHaveNumber.string = num.toString()\r\n    }\r\n\r\n    private refreshWallet(num: string) {\r\n        this.labelWalletHaveNumber.string = num.toString();\r\n    }\r\n    private onClearEditBoxString(e: Event, customEventData?: string) {\r\n        this.editBoxEnterNumber.string = \"\"\r\n        this.refreshNum(0)\r\n        this.refreshEditBoxState(0)\r\n    }\r\n\r\n    private onEditBoxStart(e: EditBox, customEventData?: string) {\r\n        console.log(e);\r\n        e.placeholderLabel.string = \"\"\r\n    }\r\n    private onEditBoxEditing(e: string, customEventData?: string) {\r\n        //判斷是否為空，空職如果不return會顯示0\r\n        if (e == \"\") {\r\n            return;\r\n        }\r\n        //初始coocs會設定type Number，再有小數點的時候會有問題\r\n        if (document.getElementById(\"EditBoxId_1\").type != \"text\")\r\n            document.getElementById(\"EditBoxId_1\").type = \"text\"\r\n\r\n        //重新組合，不判斷長度，原因為如果玩家打非數字時，在轉換Intl.NumberFormat時會顯示非數值\r\n        let getNum = Number(PublicModel.getInstance.filterNumberDot(e))\r\n        if (getNum > this.clinetHave) getNum = this.clinetHave\r\n        this.editBoxEnterNumber.string = Intl.NumberFormat().format(getNum)\r\n        //暫時不知道怎抓，只能手動去看Editbox的名稱\r\n        window.document.getElementById(\"EditBoxId_1\").value = Intl.NumberFormat().format(getNum)\r\n        // this.refreshEditBoxState(MyMath.minus(this.clinetHave, getNum))\r\n        this.refreshEditBoxState(getNum)\r\n    }\r\n\r\n    private onEditBoxEnd(e: EditBox, customEventData?: string) {\r\n        // console.log(e);\r\n        e.placeholderLabel.string = this.defaultPlaceholderLabel\r\n        let getNum = Number(PublicModel.getInstance.filterNumberDot(e.string))\r\n        this.refreshNum(getNum)\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n"]}
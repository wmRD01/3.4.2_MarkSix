{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Model/AutoFollow.ts"],"names":["Node","_decorator","BaseComponent","PublicModel","ccclass","property","AutoFollow","setTarget","_node","target","createNewTarget","node","parent","addChild","setPosition","position","setScale","scale","setAutoScale","isbool","isAutoScale","update","equals","getInstance","to2DConvertOtherNodeSpaceAR","active"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAoBA,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AACnBC,MAAAA,a;;AACAC,MAAAA,W;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;yBAETK,U,WADpBF,OAAO,CAAC,iBAAD,C,yBAAR,MACqBE,UADrB;AAAA;AAAA,0CACsD;AAAA;AAAA;;AAAA;;AAAA,+CAE3B,IAF2B;AAAA;;AAGlDC,QAAAA,SAAS,CAACC,KAAD,EAAc;AACnB,eAAKC,MAAL,GAAcD,KAAd;AACA,iBAAO,IAAP;AACH;;AACDE,QAAAA,eAAe,GAAG;AACd,eAAKD,MAAL,GAAc,IAAIT,IAAJ,EAAd;AACA,eAAKW,IAAL,CAAUC,MAAV,CAAiBC,QAAjB,CAA0B,KAAKJ,MAA/B;AACA,eAAKA,MAAL,CAAYK,WAAZ,CAAwB,KAAKH,IAAL,CAAUI,QAAlC;AACA,eAAKN,MAAL,CAAYO,QAAZ,CAAqB,KAAKL,IAAL,CAAUM,KAA/B;AACA,iBAAO,IAAP;AACH;;AACDC,QAAAA,YAAY,CAACC,MAAD,EAAkB;AAC1B,eAAKC,WAAL,GAAmBD,MAAnB;AACA,iBAAO,IAAP;AACH;;AAEDE,QAAAA,MAAM,GAAG;AACL,cAAI,CAAC,KAAKV,IAAL,CAAUI,QAAV,CAAmBO,MAAnB,CAA0B;AAAA;AAAA,0CAAYC,WAAZ,CAAwBC,2BAAxB,CAAoD,KAAKb,IAAzD,EAA+D,KAAKF,MAApE,CAA1B,CAAL,EACI,KAAKE,IAAL,CAAUI,QAAV,GAAqB;AAAA;AAAA,0CAAYQ,WAAZ,CAAwBC,2BAAxB,CAAoD,KAAKb,IAAzD,EAA+D,KAAKF,MAApE,CAArB,CAFC,CAGL;;AACA,cAAI,CAAC,KAAKE,IAAL,CAAUM,KAAV,CAAgBK,MAAhB,CAAuB,KAAKb,MAAL,CAAYQ,KAAnC,CAAD,IAA8C,KAAKG,WAAvD,EACI,KAAKT,IAAL,CAAUM,KAAV,GAAkB,KAAKR,MAAL,CAAYQ,KAA9B;AAEJ,cAAI,KAAKR,MAAL,CAAYgB,MAAZ,IAAsB,KAAKd,IAAL,CAAUc,MAApC,EACI,KAAKd,IAAL,CAAUc,MAAV,GAAmB,KAAKhB,MAAL,CAAYgB,MAA/B;AACP;;AA5BiD,O","sourcesContent":["import { Component, Node, _decorator } from \"cc\";\r\nimport BaseComponent from \"./ComponentBase\";\r\nimport PublicModel from \"./PublicModel\";\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('LabelAutoFollow')\r\nexport default class AutoFollow extends BaseComponent {\r\n    target: Node;\r\n    isAutoScale: boolean = true;\r\n    setTarget(_node: Node) {\r\n        this.target = _node;\r\n        return this\r\n    }\r\n    createNewTarget() {\r\n        this.target = new Node();\r\n        this.node.parent.addChild(this.target)\r\n        this.target.setPosition(this.node.position)\r\n        this.target.setScale(this.node.scale)\r\n        return this\r\n    }\r\n    setAutoScale(isbool: boolean) {\r\n        this.isAutoScale = isbool;\r\n        return this\r\n    }\r\n\r\n    update() {\r\n        if (!this.node.position.equals(PublicModel.getInstance.to2DConvertOtherNodeSpaceAR(this.node, this.target)))\r\n            this.node.position = PublicModel.getInstance.to2DConvertOtherNodeSpaceAR(this.node, this.target)\r\n        // console.log(\"改座標\");\r\n        if (!this.node.scale.equals(this.target.scale) && this.isAutoScale)\r\n            this.node.scale = this.target.scale\r\n\r\n        if (this.target.active != this.node.active)\r\n            this.node.active = this.target.active\r\n    }\r\n}"]}
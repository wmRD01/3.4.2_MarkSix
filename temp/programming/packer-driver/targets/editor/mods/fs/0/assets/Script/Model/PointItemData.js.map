{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Model/PointItemData.ts"],"names":["instantiate","Label","Node","Prefab","Size","UITransform","_decorator","BallData","BaseComponent","AutoFollow","PublicModel","ccclass","property","PointItemData","onLoad","clientPointLayout","removeAllChildren","openDrawCodeLayout","ui","node","getComponent","itemSize","UIbg","contentSize","width","height","itemState","setLabelContent","_node","labelContent","setOutlineContent","outlineContent","setButtonBGContent","buttonBGContent","setShadowContent","shadowContent","setDayData","day","issueID","labelDayData","string","getInstance","convertDateDay","toString","addComponent","createNewTarget","addChild","setOpenNumber","numbers","console","log","drawCode","index","length","maxNumberCount","specialBallItem","prefabBallItem","setScale","oneSclaeVec3","_class","init","Number","setButtonAuto","setShadowAuto","label","button","shoadow","setSelfNumber","children","indexOf","setEffect","changeEffectColor","setScore","num","labelPoint","labelOpenNumberTitle","labelMyChooeseNumber","bool","setContentSize","halfSize","active","randomBall","Math","floor","random"],"mappings":"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","sourcesContent":["import { instantiate, Label, log, Node, Prefab, Size, Sprite, UITransform, _decorator } from 'cc';\r\nimport BallData from './BallData';\r\nimport BaseComponent from './ComponentBase';\r\nimport AutoFollow from './AutoFollow';\r\nimport PublicModel from './PublicModel';\r\nconst { ccclass, property } = _decorator;\r\n//TODO 缺乏優化DrawCode\r\n@ccclass('PointItemData')\r\nexport default class PointItemData extends BaseComponent {\r\n    @property(UITransform)\r\n    ui: UITransform;\r\n    @property(UITransform)\r\n    UIbg: UITransform;\r\n    @property(Prefab)\r\n    prefabBallItem: Prefab;\r\n    @property(Label)\r\n    labelMyChooeseNumber: Label;\r\n    @property(Label)\r\n    labelOpenNumberTitle: Label;\r\n    @property(Label)\r\n    labelPoint: Label;\r\n    maxNumberCount: number = 6\r\n    @property(Label)\r\n    labelDayData: Label;\r\n    @property(Node)\r\n    openDrawCodeLayout: Node\r\n    @property(Node)\r\n    clientPointLayout: Node\r\n    @property(Node)\r\n    specialBallItem: Node\r\n    labelContent: Node\r\n    outlineContent: Node;\r\n    buttonBGContent: Node;\r\n    shadowContent: Node;\r\n\r\n    drawCode: string[] = [];\r\n\r\n    itemSize: Size;\r\n\r\n    onLoad() {\r\n        this.clientPointLayout.removeAllChildren();\r\n        this.openDrawCodeLayout.removeAllChildren();\r\n        this.ui = this.node.getComponent(UITransform);\r\n        this.itemSize = new Size(this.UIbg.contentSize.width, this.UIbg.contentSize.height)\r\n        this.itemState(false)\r\n    }\r\n    setLabelContent(_node: Node) {\r\n        this.labelContent = _node\r\n        return this;\r\n    }\r\n    setOutlineContent(_node: Node) {\r\n        this.outlineContent = _node\r\n        return this;\r\n    }\r\n    setButtonBGContent(_node: Node) {\r\n        this.buttonBGContent = _node\r\n        return this;\r\n    }\r\n    setShadowContent(_node: Node) {\r\n        this.shadowContent = _node\r\n        return this;\r\n    }\r\n    /**\r\n     * \r\n     * @param day 日期 \r\n     * @param issueID 期號\r\n     */\r\n    setDayData(day: string, issueID: number) {\r\n        this.labelDayData.string = `${PublicModel.getInstance.convertDateDay(day)} 第${issueID.toString()}期`\r\n        this.labelDayData.addComponent(AutoFollow).createNewTarget()\r\n        this.labelContent.addChild(this.labelDayData.node)\r\n        return this\r\n    }\r\n    setOpenNumber(numbers: string[]) {\r\n        console.log(`當期號碼${numbers}`);\r\n\r\n        this.drawCode = numbers;\r\n        for (let index = 0; index < numbers.length; index++) {\r\n            let _node: Node;\r\n            if (index == this.maxNumberCount) _node = this.specialBallItem;\r\n            else {\r\n                _node = instantiate(this.prefabBallItem)\r\n                _node.setScale(PublicModel.getInstance.oneSclaeVec3(.6))\r\n                this.openDrawCodeLayout.addChild(_node)\r\n            }\r\n            let _class = _node.getComponent(BallData)\r\n            _class.init(Number(numbers[index]))\r\n                .setButtonAuto()\r\n                .setShadowAuto()\r\n            this.labelContent.addChild(_class.label.node)\r\n            this.buttonBGContent.addChild(_class.button.node)\r\n            this.shadowContent.addChild(_class.shoadow.node)\r\n        }\r\n        return this\r\n    }\r\n    setSelfNumber(numbers: number[]) {\r\n        if (this.clientPointLayout.children.length >= this.maxNumberCount) return;\r\n        this.itemState(true)\r\n        for (let index = 0; index < numbers.length; index++) {\r\n            let _node = instantiate(this.prefabBallItem)\r\n            this.clientPointLayout.addChild(_node)\r\n            let _class = _node.getComponent(BallData)\r\n            _class.init(numbers[index])\r\n                .setShadowAuto()\r\n                .setButtonAuto()\r\n            this.labelContent.addChild(_class.label.node)\r\n            this.buttonBGContent.addChild(_class.button.node)\r\n            this.shadowContent.addChild(_class.shoadow.node)\r\n            if (this.drawCode.indexOf(numbers[index].toString()) != -1) {\r\n                _class.setEffect(true);\r\n                _class.changeEffectColor();\r\n            }\r\n        }\r\n    }\r\n    setScore(num: number) {\r\n        this.labelPoint.string = `+${num.toString()}`;\r\n    }\r\n    init() {\r\n        this.labelOpenNumberTitle.addComponent(AutoFollow).createNewTarget()\r\n        this.labelContent.addChild(this.labelOpenNumberTitle.node)\r\n        this.labelMyChooeseNumber.addComponent(AutoFollow).createNewTarget()\r\n        this.outlineContent.addChild(this.labelMyChooeseNumber.node)\r\n        this.labelPoint.string = \"+0\"\r\n        this.labelPoint.addComponent(AutoFollow).createNewTarget()\r\n        this.labelContent.addChild(this.labelPoint.node)\r\n        return this\r\n    }\r\n\r\n    itemState(bool: boolean) {\r\n        if (bool) {\r\n            console.log(this.itemSize.height);\r\n\r\n            this.ui.setContentSize(this.itemSize)\r\n            this.UIbg.setContentSize(this.itemSize)\r\n        }\r\n        else {\r\n            let halfSize = new Size(this.itemSize.width, this.itemSize.height / 2)\r\n\r\n            this.ui.setContentSize(halfSize)\r\n            this.UIbg.setContentSize(halfSize)\r\n        }\r\n        this.clientPointLayout.active = bool;\r\n        this.labelMyChooeseNumber.node.active = bool;\r\n    }\r\n    /**測試用 */\r\n    randomBall() {\r\n        return 1 + (Math.floor(Math.random() * 49))\r\n    }\r\n}"]}
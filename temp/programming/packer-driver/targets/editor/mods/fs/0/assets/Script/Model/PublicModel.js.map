{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Model/PublicModel.ts"],"names":["PublicModel","director","dynamicAtlasManager","UITransform","Vec2","Vec3","BaseSingleton","MyMath","CryptoES","PublicData","to2DConvertOtherNodeSpaceAR","targetNode","moveToNode","worldPoint","parent","getComponent","convertToWorldSpaceAR","position","convertToNodeSpaceAR","convertVec2ToVec3","vec2","x","y","convertVec3ToVec2","vec3","oneSclaeVec3","num","changParent","undefined","getScene","getChildByName","addChild","orgPos","formatSecond","secs","isHR","console","log","Math","floor","hours","minutes","seconds","hrStr","toString","padStart","minStr","secStr","formatMillisecond","millisecs","remainingSeconds","convertMilliToSecond","divide","checkNicknameCondition","str","rules","test","checkNameLen","name","len","word","split","filter","notWord","countLen","length","reName","changeNameLen","count_name","index","count","cut_name","TwoClassCheckData","_self","_data","key","Object","prototype","hasOwnProperty","call","filterNumberDot","getStrArr","formatStr","_base64ToBytes","base64","binary_string","window","atob","bytes","Uint8Array","i","charCodeAt","convertByteToBinary","n","getBin","pokerNumberChange","baccaratCount","getLast","Number","changeKMB","digits","suffixes","isNaN","String","exp","format","pow","decimalIndex","indexOf","slice","endsWith","getEnumValueFromString","enumObject","enumValues","keys","k","value","toLowerCase","getEnumValue","openShader","enabled","convertSign","body","_class","isDelete","sign","getInstance","dataWithApiKey","sortObj","gpgApi","MD5","convertMD5","obj","apiKey","keyA","sort","querystring","convertDateDay","dateObj","Date","year","convertToROC","getFullYear","month","getMonth","day","getDate","daysOfWeek","dayOfWeek","getDay","convertDateTime","sec","getSeconds","min","getMinutes","getHours","yearAD","ROC_OFFSET","isLeapYear","yearROC","checkStringNull","convertDateDiff","_date","offsetDay","oDate1","setDate","getMonthAllDay"],"mappings":"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","sourcesContent":["import { director, dynamicAtlasManager, Node, UITransform, Vec2, Vec3, _decorator } from \"cc\";\r\nimport BaseSingleton from \"../../Patten/Singleton/BaseSingleton\";\r\nimport MyMath from \"../../Plug/MyMath\";\r\nimport CryptoES from 'crypto-es';\r\nimport { RequestGPG } from \"../Contorll/Api/GPGAPI/RequestGPG\";\r\nimport PublicData from \"./PublicData\";\r\nexport default class PublicModel extends BaseSingleton<PublicModel>() {\r\n    /**\r\n     * @param targetNode 需要移動的物件\r\n     * @param moveToNode 移動的目的地\r\n     * @returns \r\n     */\r\n    to2DConvertOtherNodeSpaceAR(targetNode: Node, moveToNode: Node) {\r\n        // console.log(pos);\r\n        //轉成世界座標\r\n        let worldPoint = moveToNode.parent.getComponent(UITransform).convertToWorldSpaceAR(moveToNode.position);\r\n        // console.log(worldPoint);\r\n        return targetNode.parent.getComponent(UITransform).convertToNodeSpaceAR(worldPoint);\r\n    }\r\n    convertVec2ToVec3(vec2: Vec2) {\r\n        return new Vec3(vec2.x, vec2.y, 0)\r\n    }\r\n    convertVec3ToVec2(vec3: Vec3) {\r\n        return new Vec2(vec3.x, vec3.y)\r\n    }\r\n    oneSclaeVec3(num: number) {\r\n        return new Vec3(num, num, num)\r\n    }\r\n\r\n\r\n    changParent(moveToNode: Node, targetNode: Node, parent: Node) {\r\n        // console.log(node.parent);\r\n        if (moveToNode.parent == null || moveToNode.parent == undefined)\r\n            director.getScene().getChildByName(\"Canvas\").addChild(moveToNode)\r\n        // console.log(node.parent);\r\n\r\n        let orgPos = this.to2DConvertOtherNodeSpaceAR(targetNode, moveToNode)\r\n        parent.addChild(moveToNode)\r\n        moveToNode.position = orgPos\r\n    }\r\n    // /**秒數時間轉換 */\r\n    formatSecond(secs: number, isHR?: boolean) {\r\n        // if (isMilli) secs = this.convertMilliToSecond(secs);\r\n        // let min = Math.floor(secs / 60).toString()\r\n        // let sec = Math.floor((secs - (Number(min) * 60))).toString()\r\n        // while (min.length < 2) min = \"0\" + min\r\n        // while (sec.length < 2) sec = \"0\" + sec\r\n        // return min + \":\" + sec\r\n\r\n        // const hours = isHR ? Math.floor(secs / 3600000) : 0;\r\n        // const minutes = Math.floor((secs - hours * 3600000) / 60000);\r\n        // const seconds = Math.floor(secs - hours * 3600000 - minutes * 60000);\r\n        console.log(secs);\r\n        secs = Math.floor(secs / 1000);\r\n\r\n        const hours = isHR ? Math.floor(secs / 3600) : 0;\r\n        const minutes = Math.floor((secs - hours * 3600) / 60);\r\n        const seconds = Math.floor(secs - hours * 3600 - minutes * 60);\r\n\r\n        const hrStr = isHR ? hours.toString().padStart(2, '0') + ':' : '';\r\n        const minStr = minutes.toString().padStart(2, '0');\r\n        const secStr = seconds.toString().padStart(2, '0');\r\n\r\n        return hrStr + minStr + ':' + secStr;\r\n    }\r\n    formatMillisecond(millisecs: number, isHR?: boolean) {\r\n        const seconds = Math.floor(millisecs / 1000);\r\n        const hours = isHR ? Math.floor(seconds / 3600) : 0;\r\n        const minutes = Math.floor((seconds - hours * 3600) / 60);\r\n        const remainingSeconds = seconds - hours * 3600 - minutes * 60;\r\n\r\n        const hrStr = isHR ? hours.toString().padStart(2, '0') + ':' : '';\r\n        const minStr = minutes.toString().padStart(2, '0');\r\n        const secStr = remainingSeconds.toString().padStart(2, '0');\r\n\r\n        return hrStr + minStr + ':' + secStr;\r\n    }\r\n\r\n    convertMilliToSecond(num: number) {\r\n        return MyMath.divide(num, 1000)\r\n    }\r\n    /*\r\n    *確認匿名條件式是否在數字、分數、箭頭、數學運算符號、技術符號以及字母符號的 Unicode 字元\r\n    */\r\n    checkNicknameCondition(str: string) {\r\n        // let rex = /[\\p{P}+\\u2100-\\u214F]/u\r\n        const rules = /([\\s]|[\\u3000]|[\\u260E-\\u26FF]|[\\u270A-\\u270D]|\\ud83c[\\ud000-\\udfff]|\\ud83d[\\ud000-\\udfff]|\\ud83e[\\ud000-\\udfff])/\r\n        return rules.test(str)\r\n    }\r\n    checkNameLen(name: string, len: number) {\r\n        let word = name.split(/\\w*/).filter(x => x != \"\")\r\n        let notWord = name.split(/\\W*/).filter(x => x != \"\")\r\n        let countLen = word.length + (Math.floor(notWord.length / 2))//英文數字兩個字元=1個中文字長度\r\n        if (countLen > len)\r\n            name = this.reName(name, len);\r\n        return name\r\n\r\n    }\r\n    /**確認名稱長度 */\r\n    changeNameLen(name: string) {\r\n        let word = name.split(/\\w*/).filter(x => x != \"\")\r\n        let notWord = name.split(/\\W*/).filter(x => x != \"\")\r\n        let countLen = word.length + (Math.floor(notWord.length / 2))//英文數字兩個字元=1個中文字長度\r\n        return countLen\r\n    }\r\n    /** 將8位數之後的文字\"...\"化 */\r\n    private reName(name: string, len: number) {\r\n        let count_name = ''\r\n        let index = 0\r\n        let count = 0\r\n        let cut_name = name.split('');\r\n        while (count < len) {\r\n            count_name = count_name + cut_name[index]\r\n            if (/\\w/.test(cut_name[index])) //如果遇到英文 只+0.5\r\n                count += 0.5\r\n            else\r\n                count++\r\n            index++\r\n        }\r\n        name = count_name + \"...\"\r\n        return name\r\n    }\r\n    /**封包整合，自身封包如果與傳遞的封包有相同Key值，自身封包會更新制最新Value \r\n     * @param _self 需整合封包\r\n     * @param _data 傳遞封包\r\n     */\r\n    TwoClassCheckData(_self: Object, _data: Object) {\r\n        // console.log(_self);\r\n        // console.log(_data);\r\n\r\n        for (const key in _data) {\r\n            if (Object.prototype.hasOwnProperty.call(_self, key)) {\r\n                _self[key] = _data[key];\r\n            }\r\n        }\r\n    }\r\n    /**將,文字刪除 */\r\n    filterNumberDot(num: number | string) {\r\n        let getStrArr = num.toString().split(\"\").filter(x => x != \",\");\r\n        let formatStr = \"\"\r\n        for (let index = 0; index < getStrArr.length; index++) {\r\n            if (/^[0-9]*$/.test(getStrArr[index]))\r\n                formatStr += getStrArr[index]\r\n        }\r\n        return formatStr\r\n    }\r\n    /**將Server傳遞封包轉換成Byte */\r\n    _base64ToBytes(base64: string) {\r\n        var binary_string = window.atob(base64);\r\n        var len = binary_string.length;\r\n        var bytes = new Uint8Array(len);\r\n        for (var i = 0; i < len; i++) {\r\n            bytes[i] = binary_string.charCodeAt(i);\r\n        }\r\n\r\n        return bytes;\r\n    }\r\n    /**將Byte轉換成Binary */\r\n    convertByteToBinary(n: number) {\r\n        let getBin = n.toString(2)\r\n        // do getBin = \"0\" + getBin\r\n        // while (getBin.length < 8)\r\n        return getBin\r\n    }\r\n    /**從52號碼變換成撲克13 */\r\n    pokerNumberChange(num: number) {\r\n        return num = num % 13 == 0 ? 13 : num % 13\r\n\r\n    }\r\n    /**百家規則9之後就是0，因此不會計算*/\r\n    baccaratCount(count: number, num: number) {\r\n        num > 9 ? count += 0 : count += num\r\n        let getLast: string | string[] = count.toString().split(\"\")\r\n        getLast = getLast[getLast.length - 1]\r\n\r\n        return Number(getLast)\r\n    }\r\n    /**\r\n     * \r\n     * @param num 數字\r\n     * @param digits 小數點位數 預設0\r\n     * @returns string\r\n     */\r\n    changeKMB(num: number, digits: number = 0): string {\r\n        const suffixes = ['K', 'M', 'B', 'T', 'P', 'E'];\r\n        if (!num || Number.isNaN(num))\r\n            return String(0);\r\n        if (num < 10000)\r\n            return num.toString();\r\n        const exp = Math.floor(Math.log(num) / Math.log(1000));\r\n        let format = (num / Math.pow(1000, exp)).toString();\r\n        const decimalIndex = format.indexOf('.');\r\n        if (decimalIndex !== -1 && decimalIndex + digits + 1 < format.length)\r\n            format = format.slice(0, decimalIndex + digits + 1);\r\n        if (format.endsWith('.')) {\r\n            format = format.slice(0, -1);\r\n        }\r\n        // console.warn(format + suffixes[exp - 1]);\r\n        return format + suffixes[exp - 1]\r\n    }\r\n    /**只能回傳num */\r\n    getEnumValueFromString<T>(str: string, enumObject: T): T[keyof T] | undefined {\r\n        const enumValues = Object.keys(enumObject).filter(k => typeof enumObject[k as keyof T] === 'number');\r\n        for (const value of enumValues) {\r\n            if (value.toLowerCase() === str.toLowerCase()) {\r\n                return enumObject[value as keyof T];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    /*可回傳num與str(須測試) */\r\n    getEnumValue<T>(str: string, enumObject: T): T[keyof T] | undefined {\r\n        const enumValues = Object.keys(enumObject);\r\n        for (const value of enumValues) {\r\n            if (value.toLowerCase() === str.toLowerCase()) {\r\n                return enumObject[value as keyof T];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    openShader() {\r\n        dynamicAtlasManager.enabled = false//打開Shader合批(????)\r\n    }\r\n    convertSign<T extends RequestGPG.Body.NeedToken.base>(body: Object, _class: { new(): T }, isDelete: boolean = true) {\r\n        let sign = new _class();\r\n        PublicModel.getInstance.TwoClassCheckData(sign, body)\r\n        if (isDelete)\r\n            delete sign.sign\r\n        const dataWithApiKey = this.sortObj(sign, PublicData.getInstance.gpgApi);\r\n        // console.log(dataWithApiKey);\r\n        // console.log(CryptoES.MD5(dataWithApiKey).toString());\r\n        return CryptoES.MD5(dataWithApiKey).toString()\r\n    }\r\n    convertMD5(str: string) {\r\n        return CryptoES.MD5(str).toString()\r\n    }\r\n    /**排序物件順序並且queryString */\r\n    private sortObj<T>(obj: T, apiKey: string) {\r\n        var keyA = Object.keys(obj).sort();\r\n        var querystring = \"\"\r\n        for (let index = 0; index < keyA.length; index++) {\r\n            querystring += `${keyA[index]}=${obj[keyA[index]]}`\r\n            if (index != keyA.length - 1) {\r\n                querystring += \"&\"\r\n            }\r\n        }\r\n        // for (var i in keyA) {\r\n        //encodeURIComponent是ASCII轉換\\，但是@也會被轉換所以不使用此方式\r\n        //     // sortObj[keyA[i]] = encodeURIComponent(obj[keyA[i]])\r\n\r\n        // }\r\n        querystring += apiKey\r\n        return querystring\r\n    }\r\n    convertDateDay(str: string) {\r\n        // 將字串轉換為Date物件\r\n        const dateObj = new Date(str);\r\n\r\n        // 取得日期資訊\r\n        const year = this.convertToROC(dateObj.getFullYear());\r\n        const month = dateObj.getMonth() + 1; // 月份是從0開始的，所以要加1\r\n        const day = dateObj.getDate();\r\n        const daysOfWeek = ['日', '一', '二', '三', '四', '五', '六'];\r\n        const dayOfWeek = daysOfWeek[dateObj.getDay()];\r\n        // 格式化日期\r\n        return `${year}/${month}/${day} (${dayOfWeek})`;\r\n\r\n    }\r\n    convertDateTime(str: string) {\r\n        // 將字串轉換為Date物件\r\n        const dateObj = new Date(str);\r\n        const sec = dateObj.getSeconds()\r\n        const min = dateObj.getMinutes()\r\n        const hours = dateObj.getHours()\r\n\r\n        // 格式化日期\r\n        return `${hours}:${min}:${sec}`;\r\n\r\n    }\r\n    /**轉換國立 */\r\n    convertToROC(yearAD) {\r\n        const ROC_OFFSET = 1911;\r\n        const isLeapYear = (year) => (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\r\n        const yearROC = yearAD - ROC_OFFSET + (isLeapYear(yearAD) ? 1 : 0);\r\n        return yearROC;\r\n    }\r\n    checkStringNull(str: string) {\r\n        return str == \"\" || str == null || str == undefined ? true : false\r\n    }\r\n    convertDateDiff(_date: string, offsetDay: number) { // sDate1 和 sDate2 是 2016-06-18 格式\r\n        var oDate1 = new Date(_date)\r\n        return new Date(oDate1.setDate(oDate1.getDate() + offsetDay));\r\n    };\r\n    getMonthAllDay(day: string) {\r\n        const getDay = new Date(day)\r\n        return new Date(getDay.getFullYear(), getDay.getMonth() + 1, 0).getDate()\r\n    }\r\n}\r\n\r\n"]}
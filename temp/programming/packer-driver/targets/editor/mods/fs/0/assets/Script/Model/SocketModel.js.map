{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Model/SocketModel.ts"],"names":["SocketModel","BaseComponent","IsBuildSelfServer","IsEditor","IsGitHub","IsGPGServer","IsInpokerBestServer","IsPhone","IsVAServer","undefined","Setting","serverhost","connectionType","serverport","LoginState","httpServerURL","UserLanguage","libPath","checkLanguagePath","loadLanguageCount","backHomeURL","account","usertoken","companyIcon","urlData","handleURLData","window","location","href","ContainLanguage","filter","L","length","judgePlatorm","checkGPG","getURL","indexOf","isVAServer","isInpokerServer","isGitServer","_url","split","arr","obj","Object","index","cut","eventClarity","c","l","a","r","i","t","y","q","push","arguments","createElement","async","src","getElementsByTagName","parentNode","insertBefore"],"mappings":"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","sourcesContent":["import { URLVlaue } from \"../Contorll/Api/SendCommand\";\r\nimport BaseComponent from \"./ComponentBase\";\r\nimport { IsBuildSelfServer, IsEditor, IsGitHub, IsGPGServer, IsInpokerBestServer, IsPhone, IsVAServer } from \"./JudgePlatform\";\r\n\r\nexport default class SocketModel extends BaseComponent {\r\n    /**\r\n     * 網址\r\n     */\r\n    serverhost: string;\r\n    /**\r\n     * Port號\r\n     */\r\n    serverport: number;\r\n    /**\r\n     * 連線網址類型(ws/wss)(網址加密)\r\n     */\r\n    connectionType: string;\r\n    /**\r\n     * 登入帳號類型\r\n     */\r\n    LoginState: string;\r\n    /**\r\n     * ServerAPI位置\r\n     */\r\n    httpServerURL: string;\r\n    /**\r\n     * 語系tw(繁)cn(簡)en(英)vn(越)th(泰)id(印)\r\n     */\r\n    UserLanguage: string;\r\n    /**\r\n     * 全部語系tw(繁)cn(簡)en(英)vn(越)th(泰)id(印)\r\n     */\r\n    ContainLanguage: string[] = [\"NTD\", \"CNY\", \"USD\", \"VND\", \"THB\", \"IND\", \"JPY\"];\r\n    /**\r\n     * 重新拼湊後的網址\r\n     */\r\n    FormatLanguageURL: string;\r\n    /**\r\n     * Server語言包路徑\r\n     */\r\n    libPath: string;\r\n    /**\r\n     * Server語言包路徑\r\n     */\r\n    loadServerLanguage: string;\r\n    /**\r\n     * Game語言包路徑\r\n     */\r\n    loadGameLanguage: string;\r\n    /**\r\n     * 使用者名稱\r\n     */\r\n    account: string;\r\n    /**\r\n    * 代理帳號\r\n    */\r\n    agentId: string;\r\n    /**\r\n     * Token登入金鑰\r\n     */\r\n    usertoken: string;\r\n    /**\r\n     * 玩家回到首頁網址\r\n     */\r\n    backHomeURL: string;\r\n    /** \r\n     * 後台查帳網址\r\n     */\r\n    recordeURL: string;\r\n    /*\r\n    *網頁上變數\r\n    */\r\n    urlData: URLVlaue | Object = undefined;\r\n    /** \r\n     * 儲值網址\r\n     */\r\n    staoredValueUrl: string;\r\n    /**\r\n     * 對接公司的名稱\r\n     */\r\n    companyIcon: string;\r\n    /**\r\n     * 語言包載入數\r\n     */\r\n    loadLanguageCount: number;\r\n    /**\r\n     * 金幣類型(接收資料時使用)\r\n     */\r\n    coinType: number = 0;\r\n    DepositURL: string;\r\n    /**部分循環檢查時需要用到的參數 */\r\n    isClose: boolean = false;\r\n\r\n    webSocket: WebSocket;\r\n\r\n    // layout: string;\r\n    // /**\r\n    //  * 是否有手勢\r\n    //  */\r\n    // windows: String;\r\n    // Game Server\r\n    Setting() {\r\n        // this.serverhost = \"211.22.137.96\"; // server host\r\n        // this.ConnectionType = \"ws\"\r\n        this.serverhost = \"inpoker.va-game.com\"; // server host\r\n        this.connectionType = \"ws\"\r\n\r\n        this.serverport = 10004; // 創防版本port server port\r\n        this.LoginState = \"2\"; // 0註冊 1登入 2遊客, 3:正式.\r\n        let serverhost = (this.serverhost == \"inpoker.best\" || this.serverhost == \"211.22.137.96\") ? \"inpoker.best\" : \"inpoker.fun\";\r\n        this.httpServerURL = \"http://\" + serverhost + \"/\"; // HTTP Server URL\r\n        this.UserLanguage = \"NTD\"; // \r\n        this.libPath = this.checkLanguagePath(); // 語言包路徑\r\n        // console.log(this.libPath);  \r\n        // console.log(window.location.href.indexOf(\"github\"));\r\n\r\n\r\n        this.loadLanguageCount = 0; // 語言包載入數\r\n        // Member Info\r\n        this.backHomeURL = \"\"; // 遊戲返回網址\r\n        // this.account = \"Test0\" + Math.floor(Math.random() * 24); // 會員帳號\r\n        this.account = \"2324\"\r\n        this.usertoken = \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjExMkVFRDgwNzBBMEY5RkIzRUI3RDc3RkU3NjAxMTU0IiwidHlwIjoiYXQrand0In0.eyJuYmYiOjE2OTg2MzU1MjYsImV4cCI6MTcwMTIyNzUyNiwiaXNzIjoiaHR0cHM6Ly9pZHMuY2Vpcy50dyIsImNsaWVudF9pZCI6Im1hcmtfc2l4Iiwic3ViIjoiNTc3OSIsImF1dGhfdGltZSI6MTY5ODYzNTUyNiwiaWRwIjoibG9jYWwiLCJNZW1iZXJJRCI6IjU3NzkiLCJqdGkiOiJDM0FFQ0Q3RTJFN0VEMzg3RjU2QkVFOUE1RUE2RTAwNCIsImlhdCI6MTY5ODYzNTUyNiwic2NvcGUiOlsiZ2FtZS5saW5rIiwibWFyazYuZHJhdy5oaXN0b3J5IiwibWFyazYuc2NvcmUudXNlciIsIm1lbWJlci5pbmZvLnVzZXIiLCJyZXBvcnQucmVhZCIsInJlcG9ydC53cml0ZSJdLCJhbXIiOlsibWtfcGhvbmUiXX0.xqKpRqydOApkLKiRpmriikrFjB_mXuljPeMhQ2E1w--3Xgh1oTQ-ehWjNciDHhCANicCYoCncx9nolRGdnPZWgranxF-jzD3UIEmEjUmJOxK11xgdLanMGVgO2SrA9DetkJU7xSF3gvZxcwDSwnGoPK205ohhsRrc0rudVQHURqZbk8_ShJTYtQfDrayTXXZet_O88mILkQUh0bwT745IiFrsdq5MNgXoI9uGvGT1LnZ37uKDyle58jCFzbQ4JqDUnnRAhluUDJgp1E2FNKvV_azcV3zrfFAWChH7fCY7_vTE2Xq0uxMzGyJs6ERs7RpXL99olhBnor8A8N7VwST6A\"\r\n        this.companyIcon = \"WM\"; // 公司Icon名稱\r\n        this.urlData = this.handleURLData(window.location.href)\r\n\r\n        this.UserLanguage = this.urlData == undefined ? this.UserLanguage : this.UserLanguage\r\n        this.UserLanguage = (this.ContainLanguage.filter(L => L == this.UserLanguage).length <= 0) ? \"tw\" : this.UserLanguage;\r\n\r\n    }\r\n    judgePlatorm() {\r\n        new IsGPGServer(window.location.href)\r\n        new IsInpokerBestServer(window.location.href)\r\n        new IsVAServer(window.location.href)\r\n        new IsEditor(window.location.href)\r\n        new IsBuildSelfServer(window.location.href)\r\n        new IsGitHub(window.location.href)\r\n        new IsPhone()\r\n    }\r\n    checkGPG() {\r\n\r\n        let getURL = window.location.href;\r\n        if (getURL.indexOf(\"inpoker.best\") != -1)\r\n            return true\r\n        else\r\n            return false\r\n    }\r\n    checkLanguagePath() {\r\n        if (window.isVAServer || window.isInpokerServer)\r\n            return \"../../lib/\"; // 語言包路徑\r\n        else if (window.isGitServer)\r\n            return \"https://wmrd01.github.io/BaccaratPlay/lib/\"\r\n        else//預設 // 本地端\r\n            return \"http://10.20.13.141/JaiJaiTest/lib/\"\r\n        // return \"http://192.168.4.61/JaiJaiTest/lib/\"\r\n        // return \"http://192.168.89.61/JaiJaiTest/lib/\"\r\n        // return \"http://192.168.0.238/JaiJaiTest/lib/\"\r\n    }\r\n\r\n    handleURLData(_url: string) {\r\n        //  _url = \"https://play1.godplay.app/10001/index.html?loginType=web&token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJ0aW1lIjoxNjY4NzYyMjcwMDQ1LCJ1aWQiOiJYUGpST1oiLCJkYyI6IkdQRyIsImFnZW50SWQiOiJ0ckUzeW1XaURMYjIiLCJicmFuZElkIjoiR1BHIiwiYnJhbmRUaXRsZSI6IkdQRyIsImdhbWVJZCI6IjEwMDAxIiwiaWF0IjoxNjY4NzYyMjcwLCJleHAiOjE2Njg3NjU4NzB9.k_GVGPiQCjWxhFG3SGM2zoSy_ggN2cZXuUQ5GvqZib_0TCJ2ul9K5xbTKkgwm7OUw7nMCWLWlwERHc0MMF586SgjuQe9W7SoRSMaBtw_AkiKNn4S1NMvhemgNAdIyjL7I1Gg5xyT-x110RF73lF-yt-n6KKTP3TGkd7wR9_fPz8&record=https://backendsystem.godplay.app/wList&dc=GPG&agentId=trE3ymWiDLb2&GGID=1&lang=tw&forceExchange=true&providerlogo=true\"\r\n        // console.log(_url.split(\"?\")[1].split(\"&\"));\r\n        // console.log(_url.split(\"?\")[1]);\r\n\r\n        if (_url.split(\"?\")[1] == undefined) return undefined\r\n\r\n        let arr = _url.split(\"?\")[1].split(\"&\")\r\n        let obj = new Object()\r\n        for (let index = 0; index < arr.length; index++) {\r\n            let cut = arr[index].split(\"=\")\r\n            obj[cut[0]] = cut[1]\r\n        }\r\n        // console.log(obj);\r\n        return obj\r\n    }\r\n    eventClarity(c, l, a, r, i, t, y) {\r\n        c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };\r\n        t = l.createElement(r); t.async = 1;\r\n        t.src = \"https://www.clarity.ms/tag/\" + i;\r\n        y = l.getElementsByTagName(r)[0];\r\n        y.parentNode.insertBefore(t, y);\r\n    }\r\n\r\n}\r\n"]}
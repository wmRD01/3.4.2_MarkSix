{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/BarChart.ts"],"names":["_decorator","Node","Graphics","Color","log","Label","v3","UITransform","BaseComponent","ccclass","property","BarChart","start","paint","node","addComponent","list","i","roundMax","push","Math","random","drawLineChart","listY","listX","color","max","apply","min","yd","height","xd","width","length","lineWidth","strokeColor","moveTo","_data","lineTo","putLabel","floor","stroke","x","y","str","size","textNode","text","addChild","string","position","layer","orgSize","getComponent","contentSize","setContentSize","fontSize","BLACK","putPoint","r","fillColor","circle","fill"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, PageView, ScrollView, Graphics, Color, log, Label, v3, UITransform } from 'cc';\r\nimport BaseComponent from './Script/Model/ComponentBase';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('BarChart')\r\nexport default class BarChart extends BaseComponent {\r\n    paint: Graphics;\r\n    //數據分層\r\n    _data: number = 3;\r\n    height: number = 300;\r\n    width: number = 600;\r\n    //局數量\r\n    roundMax: number = 100;\r\n    start() {\r\n        this.paint = this.node.addComponent(Graphics);\r\n        // 這行程式碼為當前組件（可能是一個Node）添加一個Graphics組件，用於繪製圖形。\r\n\r\n        let list = [];\r\n        for (let i = 0; i < this.roundMax; i++) {\r\n            list.push(Math.random() * 100);\r\n        }\r\n        // 創建一個空數組list，並在其中生成隨機數值，總數為this.roundMax次。\r\n\r\n        this.drawLineChart(list, null, new Color(255, 66, 66, 255));\r\n        // 呼叫drawLineChart函數，傳遞生成的數組list以及一些其他參數，用來畫折線圖。\r\n    }\r\n\r\n    drawLineChart(listY, listX, color) {\r\n        //計算數據\r\n        let max = Math.max.apply(null, listY);\r\n        let min = Math.min.apply(null, listY);\r\n        let yd = this.height / (max - min);\r\n        let xd = this.width / listY.length;\r\n        // 計算最大值max、最小值min，以及y軸和x軸的單位距離yd和xd。\r\n\r\n        //畫橫軸\r\n        this.paint.lineWidth = 5;\r\n        this.paint.strokeColor = new Color(66, 66, 66, 66);\r\n        // 設置繪圖筆的寬度和顏色。\r\n\r\n        this.paint.moveTo(0, 0);\r\n        for (let i = 0; i <= this._data; i++) {\r\n            this.paint.moveTo(0, i * this.height / this._data);\r\n            this.paint.lineTo(this.width, i * this.height / this._data);\r\n            this.putLabel(-20, i * this.height / this._data - 15, Math.floor((i * (max - min) / this._data) + min), 25)\r\n        }\r\n        // 使用繪圖筆繪製橫軸，包括刻度和對應的數字。\r\n\r\n        this.paint.stroke();\r\n\r\n        return\r\n        //畫數據線\r\n        this.paint.lineWidth = 5;\r\n        this.paint.strokeColor = color;\r\n        // 設置繪圖筆的寬度和顏色，這次用不同的顏色繪製數據線。\r\n\r\n        this.paint.moveTo(0, (listY[0] - min) * yd);\r\n        for (let i = 1; i < listY.length; i++) {\r\n            this.paint.lineTo(i * xd, (listY[i] - min) * yd);\r\n        }\r\n        // 使用繪圖筆繪製數據線。\r\n\r\n        this.paint.stroke();\r\n\r\n\r\n        //畫 刻度,點,字\r\n        this.paint.lineWidth = 4;\r\n        this.paint.strokeColor = new Color(66, 66, 66, 66);\r\n        // 設置繪圖筆的寬度和顏色。\r\n\r\n        for (let i = 0; i < listY.length; i++) {\r\n            this.paint.moveTo(i * xd, 0);\r\n            this.paint.lineTo(i * xd, -10);\r\n            this.paint.stroke();\r\n\r\n            // this.putPoint(i * xd, (listY[i] - min) * yd, 7, color)\r\n            // 該行程式碼註解掉了，不再使用。\r\n\r\n            if (!!listX && !!listX[i]) {\r\n                this.putLabel(i * xd, -40, listX[i], 25)\r\n            }\r\n            else {\r\n                this.putLabel(i * xd, -40, i, 25)\r\n            }\r\n            // 使用putLabel函數在折線圖上標記刻度和數字。\r\n\r\n        }\r\n        log(listY);\r\n    }\r\n\r\n    //字\r\n    putLabel(x, y, str, size) {\r\n        let textNode = new Node();\r\n        let text = textNode.addComponent(Label);\r\n        this.node.addChild(textNode);\r\n        // 創建一個新的Node和Label組件，用於顯示文字標籤。\r\n\r\n        text.string = str;\r\n        textNode.position = v3(x, y)\r\n        textNode.layer = this.node.layer;\r\n        let orgSize = textNode.getComponent(UITransform).contentSize\r\n        textNode.getComponent(UITransform).setContentSize(orgSize.width, size);\r\n        text.fontSize = textNode.getComponent(UITransform).contentSize.height - 3;\r\n        text.color = Color.BLACK;\r\n        // 設置文字內容、位置、大小和顏色等屬性。\r\n    }\r\n\r\n    //畫實心點\r\n    putPoint(x, y, r, color) {\r\n        this.paint.fillColor = color;\r\n        this.paint.circle(x, y, r);\r\n        this.paint.fill();\r\n        // 使用繪圖筆繪製一個實心圓點。\r\n    }\r\n\r\n}"]}
{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/GameRoom/PanelTextAnimation/PanelTextAnimation.ts"],"names":["instantiate","Label","Layout","Node","Prefab","Sprite","Tween","tween","UIOpacity","v3","Vec3","_decorator","AssetType","GameEvent","GameStateEvent","TextAnimationType","AssetMng","BaseComponent","TextData","ccclass","property","PanelTextAnimation","onLoad","nodeOpacity","node","getComponent","onEnable","setEvent","ResetView","reset","TextAnimation","actionProcess","start","onDisable","deletEvent","textLayout","enabled","spriteBG","active","content","removeAllChildren","opacity","stopAllByTarget","fadeOut","_node","callback","_tween","to","call","bind","clone","str","actionDoBefore","delay","START","startAction","FINISH","finishAction","WAITING","waitingAction","console","warn","getText","splitText","split","spriteStar","chooseBG","index","length","item","string","name","font","textData","font_silver_alpha","font_gold","addChild","timeindex","position","ZERO","initX","children","x","set","parallel","by","e","initY","font_silver","isAllOK","spriteStr","spriteFrame","AssetClass","get","data","AddSpacing","tempSpacing","defaultSpacing"],"mappings":"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","sourcesContent":["import { find, instantiate, Label, Layout, macro, Node, Prefab, Sprite, Tween, tween, UIOpacity, v3, Vec3, warn, _decorator } from \"cc\";\r\nimport { AssetType } from \"../../../Enum/AssetType\";\r\nimport { GameEvent } from \"../../../Enum/GameEvent\";\r\nimport { GameStateEvent } from \"../../../Enum/GameStateEvent\";\r\nimport { TextAnimationType } from \"../../../Enum/TextAnimationType\";\r\nimport AssetMng from \"../../../Manager/AssetMng\";\r\nimport BaseComponent from \"../../../Model/ComponentBase\";\r\nimport TextData from \"./TextData\";\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PanelTextAnimation')\r\nexport default class PanelTextAnimation extends BaseComponent {\r\n    @property(TextData)\r\n    textData: TextData;\r\n    @property(Node)\r\n    content: Node\r\n    @property(Prefab)\r\n    item: Prefab;\r\n    @property(Sprite)\r\n    spriteBG: Sprite;\r\n    @property(Sprite)\r\n    spriteStar: Sprite;\r\n    @property(Layout)\r\n    textLayout: Layout;\r\n\r\n    nodeOpacity: UIOpacity\r\n\r\n    getText: string\r\n    defaultSpacing: number = 8\r\n\r\n    protected onLoad(): void {\r\n        this.nodeOpacity = this.node.getComponent(UIOpacity)\r\n\r\n    }\r\n    onEnable() {\r\n\r\n        this.setEvent(GameEvent.ResetView, this.reset)\r\n        this.setEvent(GameStateEvent.TextAnimation, this.actionProcess)\r\n    }\r\n    protected start(): void {\r\n        // this.actionProcess(TextAnimationType.FINISH)\r\n    }\r\n    onDisable() {\r\n        this.deletEvent(GameEvent.ResetView, this.reset)\r\n        this.deletEvent(GameStateEvent.TextAnimation, this.actionProcess)\r\n    }\r\n    reset() {\r\n        this.textLayout.enabled = true\r\n        this.spriteBG.node.active = false;\r\n        this.content.removeAllChildren();\r\n        this.nodeOpacity.opacity = 0\r\n        Tween.stopAllByTarget(this.node)\r\n        Tween.stopAllByTarget(this.nodeOpacity)\r\n        return this\r\n    }\r\n\r\n    fadeOut(_node: Node, callback?: Function) {\r\n        let _tween = tween().to(1, { opacity: 0 })\r\n        if (callback) _tween.call(callback.bind(this)).clone(this.nodeOpacity).start()\r\n        else _tween.clone(this.nodeOpacity).start()\r\n\r\n    }\r\n    actionProcess(str: TextAnimationType | string, callback?: Function) {\r\n        this.reset()\r\n        this.actionDoBefore(str)\r\n        tween(this.node)\r\n            .delay(.15)\r\n            .call(() => {\r\n                this.textLayout.enabled = false\r\n                switch (str) {\r\n                    case TextAnimationType.START:\r\n                        this.startAction(callback)\r\n                        break;\r\n                    case TextAnimationType.FINISH:\r\n                        this.finishAction(callback);\r\n                        break;\r\n                    case TextAnimationType.WAITING:\r\n                        this.waitingAction(callback)\r\n                        break;\r\n                    default:\r\n                        console.warn(\"尚未新增請新增\");\r\n\r\n                }\r\n            })\r\n            .start()\r\n\r\n    }\r\n    private actionDoBefore(str: string | TextAnimationType) {\r\n        this.nodeOpacity.opacity = 255\r\n        this.getText = str\r\n        let splitText = this.getText.split(\"\");\r\n        this.spriteBG.node.active = true\r\n        this.spriteStar.node.active = str == TextAnimationType.FINISH ? false : true;\r\n        this.chooseBG()\r\n        for (let index = 0; index < splitText.length; index++) {\r\n            let item = instantiate(this.item)\r\n            item.getComponent(UIOpacity).opacity = 0\r\n            item.getComponent(Label).string = splitText[index]\r\n            item.name = splitText[index]\r\n            item.getComponent(Label).font = str == TextAnimationType.FINISH ? this.textData.font_silver_alpha : this.textData.font_gold\r\n\r\n            this.content.addChild(item)\r\n        }\r\n    }\r\n    private startAction(callback?: Function) {\r\n        let timeindex = 0\r\n        this.content.position = Vec3.ZERO\r\n        for (let index = 0; index < this.content.children.length; index++) {\r\n            let initX = this.content.children[index].position.x + 50\r\n            this.content.children[index].getComponent(UIOpacity).opacity = 0\r\n            tween(this.content.children[index])\r\n                .set({ position: v3(initX, 0) })\r\n                .delay(timeindex * 0.1)\r\n                .parallel(\r\n                    tween()\r\n                        .by(0.3, { position: v3(-50, 0) })\r\n                    ,\r\n                    tween()\r\n                        .call((e: Node) => {\r\n                            tween(e.getComponent(UIOpacity))\r\n                                .to(0.2, { opacity: 255 })\r\n                                .start()\r\n                        })\r\n                )\r\n                .delay(1)\r\n                .call(() => {\r\n                    if (index == this.content.children.length - 1 && callback) this.fadeOut(this.node, callback)\r\n                    else this.fadeOut(this.node)\r\n                })\r\n                .start()\r\n            timeindex++\r\n        }\r\n    }\r\n    private finishAction(callback?: Function) {\r\n        let timeindex = 0\r\n        this.content.position = v3(0, 30)\r\n        for (let index = 0; index < this.content.children.length; index++) {\r\n            let initY = index % 2 == 0 ? 50 : -50\r\n            this.content.children[index].getComponent(UIOpacity).opacity = 0\r\n            tween(this.content.children[index])\r\n                .set({ position: v3(this.content.children[index].position.x, initY) })\r\n                .delay(timeindex * 0.08)\r\n                .parallel(\r\n                    tween()\r\n                        .to(0.3, { position: v3(this.content.children[index].position.x, 0) })\r\n                    ,\r\n                    tween()\r\n                        .call((e: Node) => {\r\n                            tween(e.getComponent(UIOpacity))\r\n                                .to(0.4, { opacity: 255 })\r\n                                .start()\r\n                        })\r\n                )\r\n                .delay(0.1)\r\n                .call((_node: Node) => {\r\n                    _node.getComponent(Label).font = this.textData.font_silver\r\n                })\r\n                // .delay(2)\r\n                // .call(() => {\r\n                //     if (index == this.content.children.length - 1 && callback) this.fadeOut(this.node, callback)\r\n                //     else this.fadeOut(this.node)\r\n                // })\r\n                .start()\r\n            timeindex++\r\n        }\r\n    }\r\n    private waitingAction(callback?: Function) {\r\n        let timeindex = 0\r\n        for (let index = 0; index < this.content.children.length; index++) {\r\n            let initY = index % 2 == 0 ? 50 : -50\r\n            this.content.children[index].getComponent(UIOpacity).opacity = 0\r\n            tween(this.content.children[index])\r\n                .set({ position: v3(this.content.children[index].position.x, initY) })\r\n                .delay(timeindex * 0.08)\r\n                .parallel(\r\n                    tween()\r\n                        .to(0.3, { position: v3(this.content.children[index].position.x, 0) })\r\n                    ,\r\n                    tween()\r\n                        .call((e: Node) => {\r\n                            tween(e.getComponent(UIOpacity))\r\n                                .to(0.4, { opacity: 255 })\r\n                                .start()\r\n                        })\r\n                )\r\n\r\n                .start()\r\n            timeindex++\r\n        }\r\n    }\r\n    chooseBG() {\r\n        if (!AssetMng.isAllOK) return\r\n        let spriteStr = this.getText == TextAnimationType.FINISH ? \"finish_bg\" : \"start_bg\";\r\n        this.spriteBG.spriteFrame = AssetMng.AssetClass.get(AssetType.Sprite).data.get(spriteStr)\r\n    }\r\n    AddSpacing() {\r\n        let tempSpacing = this.defaultSpacing\r\n        for (let index = 0; index < this.content.children.length; index++) {\r\n            /**第一個文字不用增加間距 */\r\n            if (index = 0) continue\r\n\r\n        }\r\n    }\r\n}\r\n"]}
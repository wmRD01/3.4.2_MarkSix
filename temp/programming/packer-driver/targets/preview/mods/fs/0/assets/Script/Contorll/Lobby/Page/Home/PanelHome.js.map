{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/Page/Home/PanelHome.ts"],"names":["Marquee","Timer","Button","Component","instantiate","Label","Node","Prefab","UITransform","_decorator","DEV","LangType","LobbyStateEvent","NotificationType","PageAction","EventMng","BallData","BaseComponent","Player","PublicData","PublicModel","SocketSetting","RequestGPG","PanelLoading","PanelSystemMessage","ccclass","property","PanelHome","onLoad","window","isGPGServer","getInstance","isChageOnline","marquee","labelMarquee","addComponent","timer","labelTime","setBGNode","timeBG","gpgToken","handleURLData","location","href","token","setEvent","NextIssueID","reset","markSixMsg","connet","console","log","onEnable","start","onDisable","isChangeIssueID","instance","closeLoading","requestMyInfo","requestDrawHistory","requestDrawUpcoming","requesMyScore","testtotoel","loopTimer","setInterval","requestDrawUpcomingLoop","bind","loopTime","Promise","resolve","reject","body","Body","NeedToken","DrawHistory","top","sign","convertSign","convert","URLSearchParams","toString","Request","setToken","fetchData","gpgUrlPlayApi","API","responseDrawHistory","response","data","count","lastDrawCodeLayout","children","length","index","destroy","getDate","labelLastDrawIssueID","string","issueID","getday","convertDateDay","openDate","split","labelLastDrawDay","drawCode","_node","isResetPos","specialBallItem","ballItem","addChild","_class","getComponent","init","Number","cancel","labelContent","label","node","DrawUpcoming","convertMD5","gpgApiKey","responseDrawUpcoming","today","labelCurrentDrawIssueID","currentIssueID","Date_A","Date","Date_B","serverNowTime","countTime","Date_C","setTimer","getTime","error","MyScore","sDate","getFullYear","getMonth","eDate","getMonthAllDay","My_Score","responseMyScore","labelMonth","labelMyPoint","totalScore","MyInfo","showSingleConfirm","t","Game","checkIssueID","clearInterval","eventEmit","onGoPage","e","customEventData","isNaN","ChangePointPage","mapEvnet","get","Page","emit","ChangeTo","_url","undefined","arr","obj","Object","cut","bindLabel","rightBorder","parent","width","startMarque","message","updateRenderData","leftBorder","resetPos","isAction","update","dt","currentPos","getPosition","x","setPosition","speed","y","z","bg","active","setTimeNoTimer","str","num","timeUp","formatMillisecond"],"mappings":"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","sourcesContent":["import { Button, Component, EventTouch, instantiate, Label, Node, Prefab, UITransform, _decorator } from 'cc';\r\nimport { DEV } from 'cc/env';\r\nimport { LangType } from '../../../../Enum/LangType';\r\nimport { LobbyStateEvent } from '../../../../Enum/LobbyStateEvent';\r\nimport { NotificationType } from '../../../../Enum/NotificationType';\r\nimport { PageAction } from '../../../../Enum/PageAction';\r\nimport EventMng from '../../../../Manager/EventMng';\r\nimport BallData from '../../../../Model/BallData';\r\nimport BaseComponent from '../../../../Model/ComponentBase';\r\nimport Player from '../../../../Model/Player';\r\nimport PublicData from '../../../../Model/PublicData';\r\nimport PublicModel from '../../../../Model/PublicModel';\r\nimport SocketSetting from '../../../../Socket/SocketSetting';\r\nimport { RequestGPG } from '../../../Api/GPGAPI/RequestGPG';\r\nimport { ResponseGPG } from '../../../Api/GPGAPI/ResponseGPG';\r\nimport { URLVlaue } from '../../../Api/SendCommand';\r\nimport PanelLoading from '../../../NoClearNode/PanelLoading';\r\nimport PanelSystemMessage from '../../../NoClearNode/PanelSystemMessage';\r\n\r\n\r\n\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PanelHome')\r\nexport default class PanelHome extends BaseComponent {\r\n    @property(Node)\r\n    lastDrawCodeLayout: Node\r\n    @property(Node)\r\n    labelContent: Node;\r\n    @property(Node)\r\n    timeBG: Node;\r\n\r\n    @property(Prefab)\r\n    ballItem: Prefab\r\n\r\n    @property(Label)\r\n    labelTime: Label;\r\n    @property(Label)\r\n    labelCurrentTitle: Label;\r\n    @property(Label)\r\n    labelCurrentDrawIssueID: Label;\r\n    @property(Label)\r\n    labelLastDrawIssueID: Label;\r\n    @property(Label)\r\n    labelLastDrawDay: Label;\r\n    @property(Label)\r\n    labelMarquee: Label;\r\n    @property(Label)\r\n    labelMonth: Label;\r\n    @property(Label)\r\n    labelPointTitle: Label;\r\n    @property(Label)\r\n    labelMyPoint: Label;\r\n    @property(Label)\r\n    labelDetail: Label;\r\n    @property(Label)\r\n    labelGiftTitle1: Label\r\n    @property(Label)\r\n    labelGiftTitle2: Label\r\n    @property(Button)\r\n    btnMoreDraw: Button;\r\n    @property(Button)\r\n    btnPointDetail: Button;\r\n    @property(Button)\r\n    btnGoChooese: Button;\r\n    @property(Node)\r\n    specialBallItem: Node\r\n    marquee: Marquee;\r\n    timer: Timer;\r\n    isChangeIssueID: boolean;\r\n    currentIssueID: number;\r\n    loopTimer: number;\r\n    testtotoel: number = 0;\r\n    loopTime: number = 60\r\n\r\n    onLoad() {\r\n        if (window.isGPGServer)\r\n            PublicData.getInstance.isChageOnline();\r\n        this.marquee = this.labelMarquee.addComponent(Marquee)\r\n        this.timer = this.labelTime.addComponent(Timer);\r\n        this.timer.setBGNode(this.timeBG);\r\n        /**取TOKEN */\r\n\r\n        Player.getInstance.gpgToken = (this.handleURLData(window.location.href) as URLVlaue).token\r\n        this.setEvent(LobbyStateEvent.NextIssueID, this.reset)\r\n        PublicData.getInstance.markSixMsg.connet()\r\n        console.log(Player.getInstance.gpgToken);\r\n        \r\n        \r\n    }\r\n    async onEnable() {\r\n        this.reset()\r\n    }\r\n    start() {\r\n        // this.marquee.startMarque(\"HIHIHI\")\r\n        // this.timer.setTime(100)\r\n    }\r\n\r\n    onDisable() {\r\n\r\n    }\r\n    async reset() {\r\n        if (this.isChangeIssueID) {\r\n            PanelLoading.instance.closeLoading()\r\n            return;\r\n        }\r\n        await this.requestMyInfo()\r\n        await this.requestDrawHistory()\r\n        await this.requestDrawUpcoming()\r\n        await this.requesMyScore()\r\n        PanelLoading.instance.closeLoading()\r\n        if (this.isChangeIssueID) {\r\n            this.testtotoel = 0\r\n            this.loopTimer = setInterval(this.requestDrawUpcomingLoop.bind(this), this.loopTime * 1000)\r\n        }\r\n    }\r\n    //#region  DrawHistory\r\n    async requestDrawHistory() {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            const body = new RequestGPG.Body.NeedToken.DrawHistory()\r\n            body.top = \"1\"\r\n            body.sign = PublicModel.getInstance.convertSign(body, RequestGPG.Body.NeedToken.DrawHistory)\r\n            let convert = new URLSearchParams(body).toString()\r\n            await new RequestGPG.Request()\r\n                .setToken(Player.getInstance.gpgToken)\r\n                .fetchData(`${PublicData.getInstance.gpgUrlPlayApi}${RequestGPG.API.DrawHistory}?${convert}`, this.responseDrawHistory.bind(this))\r\n            resolve();\r\n        })\r\n    }\r\n    responseDrawHistory(response?: ResponseGPG.DrawHistory.DataClass) {\r\n        if (response.data) {\r\n            // this.lastDrawCodeLayout.removeAllChildren()\r\n            let count = this.lastDrawCodeLayout.children.length - 1\r\n\r\n            for (let index = count; index >= 0; index--) {\r\n                this.lastDrawCodeLayout.children[index].destroy()\r\n            }\r\n            let getDate = response.data[0]\r\n            this.labelLastDrawIssueID.string = `第${getDate.issueID}期`\r\n            /**不需要week日 */\r\n            // console.log(PublicModel.getInstance.convertDate(getDate.openDate).split(\"(\")[0]);\r\n\r\n            let getday = PublicModel.getInstance.convertDateDay(getDate.openDate).split(\"(\")[0]\r\n            this.labelLastDrawDay.string = `${getday}開獎結果`\r\n            for (let index = 0; index < getDate.drawCode.length; index++) {\r\n                let _node: Node;\r\n                let isResetPos: boolean = true;\r\n                if (index == 6) {\r\n                    _node = this.specialBallItem;\r\n                    isResetPos = false;\r\n                }\r\n                else {\r\n                    _node = instantiate(this.ballItem)\r\n                    this.lastDrawCodeLayout.addChild(_node);\r\n                }\r\n                let _class = _node.getComponent(BallData);\r\n\r\n                _class.init(Number(getDate.drawCode[index]), isResetPos).cancel()\r\n                this.labelContent.addChild(_class.label.node);\r\n            }\r\n        }\r\n    }\r\n    //#endregion\r\n    //#region  DrawUpcoming\r\n    async requestDrawUpcoming() {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            const body = new RequestGPG.Body.NeedToken.DrawUpcoming()\r\n            body.sign = PublicModel.getInstance.convertMD5(PublicData.getInstance.gpgApiKey)\r\n            let convert = new URLSearchParams(body).toString()\r\n            await new RequestGPG.Request()\r\n                .setToken(Player.getInstance.gpgToken)\r\n                .fetchData(`${PublicData.getInstance.gpgUrlPlayApi}${RequestGPG.API.DrawUpcoming}?${convert}`, this.responseDrawUpcoming.bind(this))\r\n            resolve()\r\n        })\r\n    }\r\n    responseDrawUpcoming(response?: ResponseGPG.DrawUpcoming.DataClass) {\r\n        let getDate = response.data[0]\r\n        PublicData.getInstance.today = getDate.openDate\r\n        this.labelCurrentDrawIssueID.string = `第${getDate.issueID}期`\r\n        this.currentIssueID = Number(getDate.issueID)\r\n        // this.timer.setTimeNoTimer(PublicModel.getInstance.convertDateTime(getDate.openDate))\r\n        // console.log(getDate.serverNowTime);\r\n\r\n        var Date_A = new Date(getDate.openDate);\r\n        var Date_B = 0;\r\n        if (DEV)\r\n            //@ts-ignore\r\n            Date_B = new Date(getDate.serverNowTime);\r\n        else\r\n            //@ts-ignore\r\n            Date_B = new Date(getDate.serverNowTime);\r\n        //@ts-ignore\r\n        var countTime = Date_A - Date_B\r\n        var Date_C = new Date(countTime);\r\n        console.log(countTime);\r\n        console.log(Date_C);\r\n        //TODO 如果時間到了該怎處理?\r\n        this.timer.setTimer(Date_C.getTime())\r\n        if (countTime < 0) {\r\n            console.error(\"時間到了，該開始搓報API\");\r\n            this.isChangeIssueID = true;\r\n            return\r\n        }\r\n    }\r\n    //#endregion\r\n\r\n    //#region MyScore\r\n    async requesMyScore() {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            const body = new RequestGPG.Body.NeedToken.MyScore()\r\n            const getDate = new Date(PublicData.getInstance.today)\r\n            body.sDate = `${getDate.getFullYear()}-${getDate.getMonth() + 1}-01`\r\n            body.eDate = `${getDate.getFullYear()}-${getDate.getMonth() + 1}-${PublicModel.getInstance.getMonthAllDay(PublicData.getInstance.today)}`\r\n            body.sign = PublicModel.getInstance.convertSign(body, RequestGPG.Body.NeedToken.MyScore)\r\n            let convert = new URLSearchParams(body).toString()\r\n            await new RequestGPG.Request()\r\n                .setToken(Player.getInstance.gpgToken)\r\n                .fetchData(`${PublicData.getInstance.gpgUrlPlayApi}${RequestGPG.API.My_Score}?${convert}`, this.responseMyScore.bind(this))\r\n            resolve()\r\n        })\r\n    }\r\n    responseMyScore(response?: ResponseGPG.My_Score.DataClass) {\r\n        const getDate = new Date(PublicData.getInstance.today)\r\n        this.labelMonth.string = `(${getDate.getMonth() + 1}/1~${getDate.getMonth() + 1}/${PublicModel.getInstance.getMonthAllDay(PublicData.getInstance.today)})`\r\n        if (response.data) {\r\n            console.log(\"玩家紀錄\", response);\r\n            this.labelMyPoint.string = response.data.totalScore.toString();\r\n        }\r\n        else {\r\n            this.labelMyPoint.string = \"0\"\r\n        }\r\n    }\r\n    //#endregion\r\n    //#region  MyInfo\r\n    async requestMyInfo() {\r\n        return new Promise<void>(async (resolve, reject) => {\r\n            const body = new RequestGPG.Body.NeedToken.MyInfo()\r\n            body.sign = PublicModel.getInstance.convertMD5(PublicData.getInstance.gpgApiKey)\r\n            let convert = new URLSearchParams(body).toString()\r\n            await new RequestGPG.Request()\r\n                .setToken(Player.getInstance.gpgToken)\r\n                .fetchData(`${PublicData.getInstance.gpgUrlPlayApi}${RequestGPG.API.MyInfo}?${convert}`, (response: ResponseGPG.MyInfo.DataClass) => {\r\n                    console.log(\"MyInfo\", response)\r\n                    console.log(\"確認玩家token登入無異常\");\r\n                    if (!response || !response.data) {\r\n                        PanelSystemMessage.instance.showSingleConfirm(SocketSetting.t(\"E_0007\", LangType.Game))\r\n                    }\r\n                    else resolve()\r\n                })\r\n        })\r\n    }\r\n\r\n    //#endregion\r\n    //#region \r\n    async requestDrawUpcomingLoop() {\r\n        const body = new RequestGPG.Body.NeedToken.DrawUpcoming()\r\n        body.sign = PublicModel.getInstance.convertMD5(PublicData.getInstance.gpgApiKey)\r\n        let convert = new URLSearchParams(body).toString()\r\n        await new RequestGPG.Request()\r\n            .setToken(Player.getInstance.gpgToken)\r\n            .fetchData(`${PublicData.getInstance.gpgUrlPlayApi}${RequestGPG.API.DrawUpcoming}?${convert}`, this.checkIssueID.bind(this))\r\n    }\r\n    checkIssueID(response?: ResponseGPG.DrawUpcoming.DataClass) {\r\n        console.log(\"打拉打拉\");\r\n        console.log(DEV);\r\n        console.log(this.testtotoel);\r\n\r\n        if (DEV) {\r\n\r\n            this.testtotoel++\r\n            if (this.testtotoel == 3) {\r\n                console.error(\"終於換天拉!!!!\");\r\n                this.isChangeIssueID = false;\r\n                clearInterval(this.loopTimer)\r\n                this.eventEmit(LobbyStateEvent.NextIssueID)\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n\r\n        if (this.currentIssueID != Number(response.data[0].issueID)) {\r\n            console.error(\"終於換天拉!!!!\");\r\n            this.isChangeIssueID = false;\r\n            clearInterval(this.loopTimer)\r\n            this.eventEmit(LobbyStateEvent.NextIssueID)\r\n        }\r\n    }\r\n    //#endregion\r\n    onGoPage(e: EventTouch, customEventData?: string) {\r\n        let split = customEventData.split('-')\r\n        if (isNaN(Number(split[0])))\r\n            console.error(\"錯誤啦!!!是不是忘記設定\");\r\n        this.eventEmit(LobbyStateEvent.ChangePointPage, null, split[1])\r\n        EventMng.getInstance.mapEvnet.get(NotificationType.Page).emit(PageAction.ChangeTo, Number(split[0]))\r\n    }\r\n    handleURLData(_url: string) {\r\n        //  _url = \"https://play1.godplay.app/10001/index.html?loginType=web&token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJ0aW1lIjoxNjY4NzYyMjcwMDQ1LCJ1aWQiOiJYUGpST1oiLCJkYyI6IkdQRyIsImFnZW50SWQiOiJ0ckUzeW1XaURMYjIiLCJicmFuZElkIjoiR1BHIiwiYnJhbmRUaXRsZSI6IkdQRyIsImdhbWVJZCI6IjEwMDAxIiwiaWF0IjoxNjY4NzYyMjcwLCJleHAiOjE2Njg3NjU4NzB9.k_GVGPiQCjWxhFG3SGM2zoSy_ggN2cZXuUQ5GvqZib_0TCJ2ul9K5xbTKkgwm7OUw7nMCWLWlwERHc0MMF586SgjuQe9W7SoRSMaBtw_AkiKNn4S1NMvhemgNAdIyjL7I1Gg5xyT-x110RF73lF-yt-n6KKTP3TGkd7wR9_fPz8&record=https://backendsystem.godplay.app/wList&dc=GPG&agentId=trE3ymWiDLb2&GGID=1&lang=tw&forceExchange=true&providerlogo=true\"\r\n        // console.log(_url.split(\"?\")[1].split(\"&\"));\r\n        // console.log(_url.split(\"?\")[1]);\r\n\r\n        if (_url.split(\"?\")[1] == undefined) return undefined\r\n\r\n        let arr = _url.split(\"?\")[1].split(\"&\")\r\n        let obj = new Object()\r\n        for (let index = 0; index < arr.length; index++) {\r\n            let cut = arr[index].split(\"=\")\r\n            obj[cut[0]] = cut[1]\r\n        }\r\n        // console.log(obj);\r\n        return obj\r\n    }\r\n}\r\n\r\nclass Marquee extends Component {\r\n    bindLabel: Label;\r\n    leftBorder: number;\r\n    rightBorder: number;\r\n    isAction: boolean;\r\n    /**基本上100 OK */\r\n    speed: number = 100;\r\n    onLoad() {\r\n        this.bindLabel = this.node.getComponent(Label)\r\n        this.rightBorder = this.bindLabel.node.parent.getComponent(UITransform).width + 10//額外預留\r\n    }\r\n    startMarque(message: string) {\r\n        this.bindLabel.string = message\r\n        this.bindLabel.updateRenderData(true)\r\n        this.leftBorder = -(this.bindLabel.getComponent(UITransform).width + 10)\r\n        this.resetPos()\r\n        this.isAction = true;\r\n    }\r\n    update(dt: number) {\r\n\r\n        if (this.isAction) {\r\n            let currentPos = this.bindLabel.node.getPosition()\r\n            if (currentPos.x < this.leftBorder) {\r\n                this.resetPos()\r\n                currentPos = this.bindLabel.node.getPosition()\r\n            }\r\n            // console.log(currentPos.x);\r\n\r\n            // console.log(currentPos.x - (dt * this.speed));\r\n            // \r\n            this.bindLabel.node.setPosition(currentPos.x - (dt * this.speed), currentPos.y, currentPos.z)\r\n\r\n        }\r\n    }\r\n    resetPos() {\r\n        let currentPos = this.bindLabel.node.getPosition()\r\n        this.bindLabel.node.setPosition(this.rightBorder, currentPos.y, currentPos.z)\r\n    }\r\n}\r\n\r\nclass Timer extends Component {\r\n    bindLabel: Label;\r\n    countTime: number;\r\n    isAction: boolean;\r\n    bg: Node;\r\n    onLoad() {\r\n        this.bindLabel = this.node.getComponent(Label)\r\n        this.bindLabel.string = \"\"\r\n    }\r\n    reset() {\r\n        this.countTime = 0\r\n        this.isAction = false\r\n        this.bg.active = true\r\n    }\r\n    setTimeNoTimer(str: string) {\r\n        this.bindLabel.string = str\r\n    }\r\n    setTimer(num: number) {\r\n        this.reset()\r\n        this.countTime = num\r\n        this.isAction = true\r\n    }\r\n    setBGNode(_node: Node) {\r\n        this.bg = _node\r\n    }\r\n    timeUp() {\r\n        this.reset()\r\n        this.bindLabel.string = \"開獎中...\"\r\n        this.bg.active = false;\r\n    }\r\n\r\n    update(dt: number) {\r\n        if (this.isAction) {\r\n            this.countTime -= (dt * 1000)\r\n            if (this.countTime < 0) {\r\n                this.timeUp()\r\n                return\r\n            }\r\n            this.bindLabel.string = PublicModel.getInstance.formatMillisecond(this.countTime, true)\r\n        }\r\n    }\r\n\r\n\r\n}"]}
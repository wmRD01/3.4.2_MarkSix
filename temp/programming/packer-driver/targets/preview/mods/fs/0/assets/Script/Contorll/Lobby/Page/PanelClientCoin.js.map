{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/Page/PanelClientCoin.ts"],"names":["Button","Label","_decorator","CommandType","GameStateEvent","WebSocketEvent","ButtonMng","BaseComponent","Player","PublicModel","gonm","GameData","CoinType","ccclass","property","PanelClientCoin","onEnable","setEvent","UpdateCoin","updateCoin","addEvent","btnUpdataCoin","start","adaptiveControlFrame","onDisable","deletEvent","removeEvent","num","isNaN","Number","labelCoin","string","console","warn","getInstance","changeKMB","coinType","Gold","pointGold","pointSilver","onUpdataCoin","e","customEventData","eventEmit","WebSocketSendCommand","window","isPhone","node","setPosition"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;AAAgCC,MAAAA,U,OAAAA,U;;AACxCC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,c,iBAAAA,c;;AACFC,MAAAA,S;;AACAC,MAAAA,a;;AACAC,MAAAA,M;;AAEAC,MAAAA,W;;AACEC,MAAAA,I,iBAAAA,I;;AACFC,MAAAA,Q;;AACEC,MAAAA,Q,kBAAAA,Q;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;yBAETa,e,WADpBF,OAAO,CAAC,iBAAD,C,UAEHC,QAAQ,CAACb,KAAD,C,UAERa,QAAQ,CAACd,MAAD,C,oCAJb,MACqBe,eADrB;AAAA;AAAA,0CAC2D;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAKvDC,QAAAA,QAAQ,GAAG;AACP;AACA,eAAKC,QAAL,CAAc;AAAA;AAAA,gDAAeC,UAA7B,EAAyC,KAAKC,UAA9C;AACA;AAAA;AAAA,sCAAUC,QAAV,CAAmB,IAAnB,EAAyB,cAAzB,EAAyC,KAAKC,aAA9C;AACH;;AACDC,QAAAA,KAAK,GAAG;AACJ;AACA;AACA,eAAKC,oBAAL;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,eAAKC,UAAL,CAAgB;AAAA;AAAA,gDAAeP,UAA/B,EAA2C,KAAKC,UAAhD;AACA;AAAA;AAAA,sCAAUO,WAAV,CAAsB,KAAKL,aAA3B,EAA0C,cAA1C;AACH;;AACDF,QAAAA,UAAU,CAACQ,GAAD,EAAe;AACrB;AAEA,cAAIC,KAAK,CAACC,MAAM,CAACF,GAAD,CAAP,CAAT,EACI,KAAKG,SAAL,CAAeC,MAAf,GAAwB,EAAxB,CADJ,KAEK;AACDC,YAAAA,OAAO,CAACC,IAAR,CAAaN,GAAb;AACAK,YAAAA,OAAO,CAACC,IAAR,CAAa;AAAA;AAAA,4CAAYC,WAAZ,CAAwBC,SAAxB,CAAkCR,GAAlC,EAAuC,CAAvC,CAAb;AAEA,iBAAKG,SAAL,CAAeC,MAAf,GAAwB;AAAA;AAAA,4CAAYG,WAAZ,CAAwBC,SAAxB,CAAkCR,GAAlC,EAAuC,CAAvC,CAAxB;AACA;;AACA;AAAA;AAAA,sCAASO,WAAT,CAAqBE,QAArB,IAAiC;AAAA;AAAA,sCAASC,IAA1C,GAAiD;AAAA;AAAA,kCAAOH,WAAP,CAAmBI,SAAnB,GAA+BX,GAAhF,GAAsF;AAAA;AAAA,kCAAOO,WAAP,CAAmBK,WAAnB,GAAiCZ,GAAvH;AAEH;AACJ;;AACDa,QAAAA,YAAY,CAACC,CAAD,EAAWC,eAAX,EAAqC;AAC7C,eAAKC,SAAL,CAAe;AAAA;AAAA,gDAAeC,oBAA9B,EAAoD;AAAA;AAAA,0CAAYlC,IAAhE,EAAsE;AAAA;AAAA,6BAAtE;AACH;;AAEDa,QAAAA,oBAAoB,GAAG;AACnB,cAAIsB,MAAM,CAACC,OAAX,EAAoB;AAChB,iBAAKC,IAAL,CAAUC,WAAV,CAAsB,CAAtB,EAAyB,CAAC,MAA1B,EADgB,CAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;;AAnDsD,O","sourcesContent":["import { Button, Label, Node, UITransform, Vec3, _decorator } from \"cc\";\r\nimport { CommandType } from \"../../Enum/CommandType\";\r\nimport { GameStateEvent } from \"../../Enum/GameStateEvent\";\r\nimport { WebSocketEvent } from \"../../Enum/WebSocketEvent\";\r\nimport ButtonMng from \"../../Manager/ButtonMng\";\r\nimport BaseComponent from \"../../Model/ComponentBase\";\r\nimport Player from \"../../Model/Player\";\r\nimport PublicData from \"../../Model/PublicData\";\r\nimport PublicModel from \"../../Model/PublicModel\";\r\nimport { gonm } from \"../Api/SendCommand\";\r\nimport GameData from \"../../Model/GameData\";\r\nimport { CoinType } from \"../../Enum/CoinType\";\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PanelClientCoin')\r\nexport default class PanelClientCoin extends BaseComponent {\r\n    @property(Label)\r\n    labelCoin: Label;\r\n    @property(Button)\r\n    btnUpdataCoin: Button\r\n    onEnable() {\r\n        // this.setEvent(GameEvent.ResetView, this.updateCoin)\r\n        this.setEvent(GameStateEvent.UpdateCoin, this.updateCoin)\r\n        ButtonMng.addEvent(this, \"onUpdataCoin\", this.btnUpdataCoin)\r\n    }\r\n    start() {\r\n        // if (window.isPhone)\r\n        //     this.phoneInit()\r\n        this.adaptiveControlFrame()\r\n    }\r\n\r\n    onDisable() {\r\n        this.deletEvent(GameStateEvent.UpdateCoin, this.updateCoin)\r\n        ButtonMng.removeEvent(this.btnUpdataCoin, \"onUpdataCoin\")\r\n    }\r\n    updateCoin(num?: number) {\r\n        // console.warn(\"金錢更新\",num);\r\n\r\n        if (isNaN(Number(num)))\r\n            this.labelCoin.string = \"\"\r\n        else {\r\n            console.warn(num);\r\n            console.warn(PublicModel.getInstance.changeKMB(num, 1));\r\n\r\n            this.labelCoin.string = PublicModel.getInstance.changeKMB(num, 1);\r\n            /**偷吃步作法，先這樣了等有時間在優化 */\r\n            GameData.getInstance.coinType == CoinType.Gold ? Player.getInstance.pointGold = num : Player.getInstance.pointSilver = num\r\n\r\n        }\r\n    }\r\n    onUpdataCoin(e: Event, customEventData?: string) {\r\n        this.eventEmit(WebSocketEvent.WebSocketSendCommand, CommandType.gonm, new gonm())\r\n    }\r\n\r\n    adaptiveControlFrame() {\r\n        if (window.isPhone) {\r\n            this.node.setPosition(0, -179.41)\r\n            // if (!PublicData.getInstance.isLandscape) {\r\n            //     this.node.setScale(3.01, 3.01, 3.01)\r\n            //     this.node.setPosition(356, 416)\r\n            // }\r\n            // else {\r\n            //     this.node.setScale(Vec3.ONE)\r\n            //     this.node.setPosition(-715.5, -139)\r\n            // }\r\n        }\r\n    }\r\n\r\n}\r\n"]}
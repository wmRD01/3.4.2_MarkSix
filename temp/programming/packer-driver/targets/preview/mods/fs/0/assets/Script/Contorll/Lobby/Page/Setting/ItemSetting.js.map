{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/Page/Setting/ItemSetting.ts"],"names":["Label","Sprite","_decorator","AssetType","AssetMng","MusicMng","BaseComponent","PublicModel","ccclass","property","ItemSetting","Active","on","init","type","getInstance","getEnumValueFromString","node","name","split","Type","console","log","Music","labelName","string","getMusicState","nowState","off","Effect","getEffectState","Notification","activeChange","lableState","getSprite","AssetClass","get","data","spriteBG","spriteFrame","onChangeState","e","customEventData","switchMusic","switchEffect"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAqBA,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,U,OAAAA,U;;AAC3BC,MAAAA,S,iBAAAA,S;;AACFC,MAAAA,Q;;AACAC,MAAAA,Q;;AACAC,MAAAA,a;;AACAC,MAAAA,W;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;yBAETQ,W,WADpBF,OAAO,CAAC,aAAD,C,UAGHC,QAAQ,CAACR,MAAD,C,UAERQ,QAAQ,CAACR,MAAD,C,UAERQ,QAAQ,CAACT,KAAD,C,UAERS,QAAQ,CAACT,KAAD,C,oCATb,MACqBU,WADrB;AAAA;AAAA,0CACuD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,4CAUhCC,MAAM,CAACC,EAVyB;;AAAA;AAAA;;AAYnDC,QAAAA,IAAI,GAAG;AAEH,eAAKC,IAAL,GAAY;AAAA;AAAA,0CAAYC,WAAZ,CAAwBC,sBAAxB,CAA+C,KAAKC,IAAL,CAAUC,IAAV,CAAeC,KAAf,CAAqB,SAArB,EAAgC,CAAhC,CAA/C,EAAmFC,IAAnF,CAAZ;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKR,IAAjB;;AAEA,kBAAQ,KAAKA,IAAb;AACI,iBAAKM,IAAI,CAACG,KAAV;AACI,mBAAKC,SAAL,CAAeC,MAAf,GAAwB,IAAxB;AACA;AAAA;AAAA,wCAASC,aAAT,KAA2B,KAAKC,QAAL,GAAgBhB,MAAM,CAACC,EAAlD,GAAuD,KAAKe,QAAL,GAAgBhB,MAAM,CAACiB,GAA9E;AAEA;;AACJ,iBAAKR,IAAI,CAACS,MAAV;AACI,mBAAKL,SAAL,CAAeC,MAAf,GAAwB,IAAxB;AACA;AAAA;AAAA,wCAASK,cAAT,KAA4B,KAAKH,QAAL,GAAgBhB,MAAM,CAACC,EAAnD,GAAwD,KAAKe,QAAL,GAAgBhB,MAAM,CAACiB,GAA/E;AACA;;AACJ,iBAAKR,IAAI,CAACW,YAAV;AACI,mBAAKP,SAAL,CAAeC,MAAf,GAAwB,IAAxB,CADJ,CAGI;;AACA;AAdR;;AAgBA,eAAKO,YAAL;AACH;;AACDA,QAAAA,YAAY,GAAG;AACX,eAAKC,UAAL,CAAgBR,MAAhB,GAAyB,KAAKE,QAA9B;AACA,cAAIO,SAAS,GAAG,KAAKP,QAAL,IAAiBhB,MAAM,CAACC,EAAxB,GAA6B,gBAA7B,GAAgD,gBAAhE;AACAS,UAAAA,OAAO,CAACC,GAAR,CAAY;AAAA;AAAA,oCAASa,UAAT,CAAoBC,GAApB,CAAwB;AAAA;AAAA,sCAAUnC,MAAlC,EAA0CoC,IAA1C,CAA+CD,GAA/C,CAAmDF,SAAnD,CAAZ;AAEA,eAAKI,QAAL,CAAcC,WAAd,GAA4B;AAAA;AAAA,oCAASJ,UAAT,CAAoBC,GAApB,CAAwB;AAAA;AAAA,sCAAUnC,MAAlC,EAA0CoC,IAA1C,CAA+CD,GAA/C,CAAmDF,SAAnD,CAA5B;AAEH;;AACDM,QAAAA,aAAa,CAACC,CAAD,EAAgBC,eAAhB,EAA0C;AACnD,kBAAQ,KAAK5B,IAAb;AACI,iBAAKM,IAAI,CAACG,KAAV;AACI;AAAA;AAAA,wCAASoB,WAAT;AACA;AAAA;AAAA,wCAASjB,aAAT,KAA2B,KAAKC,QAAL,GAAgBhB,MAAM,CAACC,EAAlD,GAAuD,KAAKe,QAAL,GAAgBhB,MAAM,CAACiB,GAA9E;AACA;;AACJ,iBAAKR,IAAI,CAACS,MAAV;AACI;AAAA;AAAA,wCAASe,YAAT;AACA;AAAA;AAAA,wCAASd,cAAT,KAA4B,KAAKH,QAAL,GAAgBhB,MAAM,CAACC,EAAnD,GAAwD,KAAKe,QAAL,GAAgBhB,MAAM,CAACiB,GAA/E;AACA;;AACJ,iBAAKR,IAAI,CAACW,YAAV;AACI,mBAAKE,UAAL,CAAgBR,MAAhB,IAA0Bd,MAAM,CAACC,EAAjC,GAAsC,KAAKe,QAAL,GAAgBhB,MAAM,CAACiB,GAA7D,GAAmE,KAAKD,QAAL,GAAgBhB,MAAM,CAACC,EAA1F,CADJ,CAEI;;AACA;AAZR;;AAcA,eAAKoB,YAAL;AACH;;AA3DkD,O;;;;;;;;;;;;;;;;;;;;;;iBAgElDZ,I;AAAAA,QAAAA,I,CAAAA,I;AAAAA,QAAAA,I,CAAAA,I;AAAAA,QAAAA,I,CAAAA,I;SAAAA,I,KAAAA,I;;iBAKAT,M;AAAAA,QAAAA,M;AAAAA,QAAAA,M;SAAAA,M,KAAAA,M","sourcesContent":["import { EventTouch, Label, Sprite, _decorator } from 'cc';\r\nimport { AssetType } from '../../../../Enum/AssetType';\r\nimport AssetMng from '../../../../Manager/AssetMng';\r\nimport MusicMng from '../../../../Manager/MusicMng';\r\nimport BaseComponent from '../../../../Model/ComponentBase';\r\nimport PublicModel from '../../../../Model/PublicModel';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('ItemSetting')\r\nexport default class ItemSetting extends BaseComponent {\r\n\r\n    @property(Sprite)\r\n    spriteBG: Sprite\r\n    @property(Sprite)\r\n    spriteIcon: Sprite;\r\n    @property(Label)\r\n    labelName: Label;\r\n    @property(Label)\r\n    lableState: Label;\r\n    nowState: Active = Active.on;\r\n    type: Type\r\n    init() {\r\n\r\n        this.type = PublicModel.getInstance.getEnumValueFromString(this.node.name.split(\"Setting\")[0], Type)\r\n        console.log(this.type);\r\n\r\n        switch (this.type) {\r\n            case Type.Music:\r\n                this.labelName.string = \"音樂\"\r\n                MusicMng.getMusicState() ? this.nowState = Active.on : this.nowState = Active.off\r\n\r\n                break;\r\n            case Type.Effect:\r\n                this.labelName.string = \"音效\"\r\n                MusicMng.getEffectState() ? this.nowState = Active.on : this.nowState = Active.off\r\n                break;\r\n            case Type.Notification:\r\n                this.labelName.string = \"推播\"\r\n\r\n                // MusicMng.getMusicState() ? this.lableState.string = Active.on : this.lableState.string = Active.off\r\n                break;\r\n        }\r\n        this.activeChange()\r\n    }\r\n    activeChange() {\r\n        this.lableState.string = this.nowState\r\n        let getSprite = this.nowState == Active.on ? \"Setup_button01\" : \"Setup_button00\"\r\n        console.log(AssetMng.AssetClass.get(AssetType.Sprite).data.get(getSprite));\r\n\r\n        this.spriteBG.spriteFrame = AssetMng.AssetClass.get(AssetType.Sprite).data.get(getSprite);\r\n\r\n    }\r\n    onChangeState(e: EventTouch, customEventData?: string) {\r\n        switch (this.type) {\r\n            case Type.Music:\r\n                MusicMng.switchMusic();\r\n                MusicMng.getMusicState() ? this.nowState = Active.on : this.nowState = Active.off\r\n                break;\r\n            case Type.Effect:\r\n                MusicMng.switchEffect()\r\n                MusicMng.getEffectState() ? this.nowState = Active.on : this.nowState = Active.off\r\n                break;\r\n            case Type.Notification:\r\n                this.lableState.string == Active.on ? this.nowState = Active.off : this.nowState = Active.on\r\n                // MusicMng.getMusicState() ? this.lableState.string = Active.on : this.lableState.string = Active.off\r\n                break;\r\n        }\r\n        this.activeChange()\r\n    }\r\n\r\n}\r\n\r\n\r\nenum Type {\r\n    Music,\r\n    Effect,\r\n    Notification,\r\n}\r\nenum Active {\r\n    on = \"turn on\",\r\n    off = \"turn off\",\r\n}"]}
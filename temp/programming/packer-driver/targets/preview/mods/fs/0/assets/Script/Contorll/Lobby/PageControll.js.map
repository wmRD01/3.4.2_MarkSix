{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Contorll/Lobby/PageControll.ts"],"names":["_decorator","EventTarget","PageView","Node","BaseSingletonComponent","PageAction","AssetMng","MusicMng","ccclass","property","PageControll","onLoad","startLoad","init","pageView","getComponent","pageEvnet","on","ChangeTo","onToPage","start","closeTouch","index","page","length","active","target","node","off","EventType","TOUCH_START","_onTouchBegan","TOUCH_MOVE","_onTouchMoved","TOUCH_END","_onTouchEnded","TOUCH_CANCEL","_onTouchCancelled","currnetIndex","scrollToPage","test"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,I,OAAAA,I;;AACrCC,MAAAA,sB;;AACEC,MAAAA,U,iBAAAA,U;;AAEFC,MAAAA,Q;;AACAC,MAAAA,Q;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;yBAETU,Y,WADpBF,OAAO,CAAC,cAAD,C,UAGHC,QAAQ,CAACN,IAAD,C,oCAHb,MACqBO,YADrB,SAC0C;AAAA;AAAA,6DAD1C,CACiF;AAAA;AAAA;;AAAA;;AAAA;;AAAA,6CAIpD,IAAIT,WAAJ,EAJoD;;AAAA,gDAMtD,CANsD;AAAA;;AAO7EU,QAAAA,MAAM,GAAG;AACL;AACA;AAAA;AAAA,oCAASC,SAAT;AACA;AAAA;AAAA,oCAASC,IAAT;AACA,gBAAMF,MAAN,GAJK,CAKL;;AACA,eAAKG,QAAL,GAAgB,KAAKC,YAAL,CAAkBb,QAAlB,CAAhB;AACA,eAAKc,SAAL,CAAeC,EAAf,CAAkB;AAAA;AAAA,wCAAWC,QAA7B,EAAuC,KAAKC,QAA5C,EAAsD,IAAtD,EAPK,CAQL;AACH;;AACDC,QAAAA,KAAK,GAAG;AAEJ,eAAKC,UAAL,CAAgB,KAAKP,QAArB;;AACA,eAAK,IAAIQ,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKC,IAAL,CAAUC,MAAtC,EAA8CF,KAAK,EAAnD,EAAuD;AACnD,iBAAKC,IAAL,CAAUD,KAAV,EAAiBG,MAAjB,GAA0B,KAA1B;AAEH;;AACD,eAAKN,QAAL,CAAc,CAAd;AAEH;;AACDE,QAAAA,UAAU,CAACK,MAAD,EAAmB;AACzB;AACAA,UAAAA,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBzB,IAAI,CAAC0B,SAAL,CAAeC,WAA/B,EAA4CJ,MAAM,CAACK,aAAnD,EAAkEL,MAAlE,EAA0E,IAA1E,EAFyB,CAGzB;;AACAA,UAAAA,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBzB,IAAI,CAAC0B,SAAL,CAAeG,UAA/B,EAA2CN,MAAM,CAACO,aAAlD,EAAiEP,MAAjE,EAAyE,IAAzE,EAJyB,CAKzB;;AACAA,UAAAA,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBzB,IAAI,CAAC0B,SAAL,CAAeK,SAA/B,EAA0CR,MAAM,CAACS,aAAjD,EAAgET,MAAhE,EAAwE,IAAxE,EANyB,CAOzB;;AACAA,UAAAA,MAAM,CAACC,IAAP,CAAYC,GAAZ,CAAgBzB,IAAI,CAAC0B,SAAL,CAAeO,YAA/B,EAA6CV,MAAM,CAACW,iBAApD,EAAuEX,MAAvE,EAA+E,IAA/E;AACH;AACD;;;AACAP,QAAAA,QAAQ,CAACG,KAAD,EAAkB;AACtB,eAAKC,IAAL,CAAU,KAAKe,YAAf,EAA6Bb,MAA7B,GAAsC,KAAtC;AACA,eAAKa,YAAL,GAAoBhB,KAApB;AACA,eAAKC,IAAL,CAAU,KAAKe,YAAf,EAA6Bb,MAA7B,GAAsC,IAAtC;AACA,eAAKX,QAAL,CAAcyB,YAAd,CAA2BjB,KAA3B,EAAkC,CAAlC;AAEH;;AA5C4E,O;;;;;iBAG9D,E;;;;iBA2CdkB,I;AAAAA,QAAAA,I,CAAAA,I;AAAAA,QAAAA,I,CAAAA,I;SAAAA,I,KAAAA,I","sourcesContent":["import { _decorator, EventTarget, PageView, Node } from 'cc';\r\nimport BaseSingletonComponent from '../../../Patten/Singleton/BaseSingletonComponent';\r\nimport { PageAction } from '../../Enum/PageAction';\r\nimport { PageMenu } from '../../Enum/PageMenu';\r\nimport AssetMng from '../../Manager/AssetMng';\r\nimport MusicMng from '../../Manager/MusicMng';\r\nimport PublicModel from '../../Model/PublicModel';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PageControll')\r\nexport default class PageControll extends BaseSingletonComponent<PageControll>() {\r\n    pageView: PageView;\r\n    @property(Node)\r\n    page: Node[] = []\r\n    pageEvnet: EventTarget = new EventTarget();\r\n\r\n    currnetIndex: number = 0;\r\n    onLoad() {\r\n        /**現階段測試 正是要往Loading移動 */\r\n        AssetMng.startLoad()\r\n        MusicMng.init()\r\n        super.onLoad()\r\n        // console.log(this.pageEvnet);\r\n        this.pageView = this.getComponent(PageView)\r\n        this.pageEvnet.on(PageAction.ChangeTo, this.onToPage, this)\r\n        // console.log(this.pageEvnet);\r\n    }\r\n    start() {\r\n\r\n        this.closeTouch(this.pageView)\r\n        for (let index = 0; index < this.page.length; index++) {\r\n            this.page[index].active = false\r\n\r\n        }\r\n        this.onToPage(0)\r\n\r\n    }\r\n    closeTouch(target: PageView) {\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_START, target._onTouchBegan, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_MOVE, target._onTouchMoved, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_END, target._onTouchEnded, target, true);\r\n        //@ts-ignore\r\n        target.node.off(Node.EventType.TOUCH_CANCEL, target._onTouchCancelled, target, true);\r\n    }\r\n    /**接收的值也是number，只是PageMenu是enum內存number */\r\n    onToPage(index: PageMenu) {\r\n        this.page[this.currnetIndex].active = false\r\n        this.currnetIndex = index\r\n        this.page[this.currnetIndex].active = true\r\n        this.pageView.scrollToPage(index, 0)\r\n\r\n    }\r\n}\r\nenum test {\r\n    MEEE,\r\n    HANA\r\n}"]}
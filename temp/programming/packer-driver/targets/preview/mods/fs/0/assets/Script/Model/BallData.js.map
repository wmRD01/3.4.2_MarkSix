{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Model/BallData.ts"],"names":["Button","color","Label","Node","Sprite","Tween","tween","Vec3","_decorator","AssetType","AssetMng","BaseComponent","AutoFollow","PublicModel","ccclass","property","BallData","init","_ballNumber","isResetPos","ballNumber","node","position","ZERO","type","Math","floor","label","addComponent","setTarget","string","toString","fromHEX","getColor","spriteBG","spriteFrame","AssetClass","get","data","getBGData","setEffect","getOrg","orgV3","choose","setScale","getInstance","oneSclaeVec3","repeatForever","set","angle","to","start","cancel","eulerAngles","stopAllByTarget","enabledBall","backPosition","bool","ColorType","白","灰","nodeEffect","active","setLabelScale","num","黑","綠","紅","藍","SpirteData"],"mappings":"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","sourcesContent":["import { Button, Color, color, Label, Node, Sprite, Tween, tween, v3, Vec3, _decorator } from 'cc';\r\nimport { AssetType } from '../Enum/AssetType';\r\nimport AssetMng from '../Manager/AssetMng';\r\nimport { colorTest } from '../test/colorTest';\r\nimport BaseComponent from './ComponentBase';\r\nimport AutoFollow from './AutoFollow';\r\nimport PublicModel from './PublicModel';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('BallData')\r\nexport default class BallData extends BaseComponent {\r\n    /**comp */\r\n    @property(Label)\r\n    label: Label;\r\n    @property(Button)\r\n    button: Button;\r\n    @property(Sprite)\r\n    spriteBG: Sprite;\r\n    /**data */\r\n    @property(Node)\r\n    nodeEffect: Node;\r\n    ballNumber: number = 0;\r\n    type: number = 0;\r\n    orgV3: Vec3;\r\n    init(_ballNumber: number, isResetPos: boolean = false) {\r\n        // console.log(_ballNumber);\r\n\r\n        this.ballNumber = _ballNumber\r\n        if (isResetPos)\r\n            this.node.position = Vec3.ZERO\r\n        /**一般規則 */\r\n        // this.type = _ballNumber % 6\r\n        /**符合香港規則 */\r\n        this.type = (_ballNumber + (Math.floor(_ballNumber / 10))) % 6\r\n        if (_ballNumber % 10 === 0)\r\n            this.type -= 1\r\n        this.label.addComponent(AutoFollow).setTarget(this.node)\r\n        this.label.string = this.ballNumber.toString()\r\n        this.label.color = color().fromHEX(this.getColor())\r\n        // console.log(AssetMng.AssetClass.get(AssetType.Sprite).data.get(this.getBGData()));\r\n\r\n        this.spriteBG.spriteFrame = AssetMng.AssetClass.get(AssetType.Sprite).data.get(this.getBGData())\r\n        this.setEffect(false)\r\n\r\n\r\n        // const color = ['red', 'red', 'blue', 'blue', 'green', 'green']\r\n\r\n        // const result = []\r\n        // var add = 0\r\n        // for (let num = 1; num <= 50; num++) {\r\n\r\n        //     if (num % 10 === 1) {\r\n        //         add = Math.floor(num / 10)\r\n        //     }\r\n        //     result.push(num.toString() + color[(num - 1 + add) % 6])\r\n\r\n        // }\r\n        // console.log(result)\r\n\r\n\r\n\r\n        return this\r\n    }\r\n    getOrg() {\r\n        this.orgV3 = new Vec3(this.node.position)\r\n\r\n    }\r\n    // reset() {\r\n\r\n    // }\r\n    choose() {\r\n        // this.spriteBG.spriteFrame = AssetMng.AssetClass.get(AssetType.Sprite).data.get(this.getBGData())\r\n        // this.spriteBG.color = Color.WHITE\r\n        this.node.setScale(PublicModel.getInstance.oneSclaeVec3(1.2))\r\n        // let rotai = tween()\r\n        //     .set({ angle: 0 })\r\n        //     .to(5, { angle: -360 })\r\n        tween(this.spriteBG.node)\r\n            .repeatForever(tween()\r\n                .set({ angle: 0 })\r\n                .to(5, { angle: -360 }))\r\n            .start()\r\n    }\r\n    cancel() {\r\n        // this.spriteBG.spriteFrame = AssetMng.AssetClass.get(AssetType.Sprite).data.get(SpirteData.空白)\r\n        // this.spriteBG.color = color().fromHEX(this.getColor())\r\n        this.node.setScale(PublicModel.getInstance.oneSclaeVec3(1))\r\n        this.spriteBG.node.eulerAngles = Vec3.ZERO\r\n        Tween.stopAllByTarget(this.spriteBG.node)\r\n        this.enabledBall(true)\r\n    }\r\n    backPosition() {\r\n        Tween.stopAllByTarget(this.spriteBG.node)\r\n        // console.log(this.node.position);\r\n\r\n        this.node.position = this.orgV3\r\n        // console.log(this.node.position, this.orgV3);\r\n\r\n    }\r\n    enabledBall(bool: boolean) {\r\n        this.spriteBG.color = bool ? color().fromHEX(ColorType.白) : color().fromHEX(ColorType.灰);\r\n    }\r\n    setEffect(bool: boolean) {\r\n        this.nodeEffect.active = bool\r\n    }\r\n    setLabelScale(num: number) {\r\n        this.label.node.setScale(PublicModel.getInstance.oneSclaeVec3(num))\r\n    }\r\n    private getColor() {\r\n\r\n        return ColorType.黑\r\n        switch (this.type) {\r\n            case 0:\r\n            case 5:\r\n                return ColorType.綠\r\n            case 1:\r\n            case 2:\r\n                return ColorType.紅\r\n            case 3:\r\n            case 4:\r\n                return ColorType.藍\r\n        }\r\n    }\r\n    private getBGData() {\r\n        switch (this.type) {\r\n            case 0:\r\n            case 5:\r\n                return SpirteData.綠\r\n            case 1:\r\n            case 2:\r\n                return SpirteData.紅\r\n            case 3:\r\n            case 4:\r\n                return SpirteData.藍\r\n        }\r\n    }\r\n}\r\nenum ColorType {\r\n    紅 = \"#FF3D3D\",\r\n    藍 = \"#334BD3\",\r\n    綠 = \"#61BFAD\",\r\n    灰 = \"#797979FD\",\r\n    白 = \"#FFFFFF\",\r\n    黑 = \"#000000\",\r\n\r\n}\r\nenum SpirteData {\r\n    紅 = \"Challenge_RedBall\",\r\n    藍 = \"Challenge_BlueBall\",\r\n    綠 = \"Challenge_GreenBall\",\r\n    空白 = \"Challenge_Frame\"\r\n}"]}
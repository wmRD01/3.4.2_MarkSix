{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/Model/PointItemData.ts"],"names":["instantiate","Label","Node","Prefab","_decorator","BallData","BaseComponent","AutoFollow","PublicModel","ccclass","property","PointItemData","onLoad","clientPointLayout","removeAllChildren","openDrawCodeLayout","setLabelContent","_node","labelContent","setOutlineContent","outlineContent","setDayData","day","issueID","labelDayData","string","getInstance","convertDateDay","toString","addComponent","createNewTarget","addChild","node","setOpenNumber","numbers","index","length","maxNumberCount","specialBallItem","prefabBallItem","setScale","oneSclaeVec3","_class","getComponent","init","Number","label","setSelfNumber","children","setScore","num","labelPoint","labelOpenNumberTitle","labelMyChooeseNumber","randomBall","Math","floor","random"],"mappings":"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","sourcesContent":["import { instantiate, Label, Node, Prefab, _decorator } from 'cc';\r\nimport BallData from './BallData';\r\nimport BaseComponent from './ComponentBase';\r\nimport AutoFollow from './AutoFollow';\r\nimport PublicModel from './PublicModel';\r\nconst { ccclass, property } = _decorator;\r\n//TODO 缺乏優化DrawCode\r\n@ccclass('PointItemData')\r\nexport default class PointItemData extends BaseComponent {\r\n    @property(Prefab)\r\n    prefabBallItem: Prefab;\r\n    @property(Label)\r\n    labelMyChooeseNumber: Label;\r\n    @property(Label)\r\n    labelOpenNumberTitle: Label;\r\n    @property(Label)\r\n    labelPoint: Label;\r\n    maxNumberCount: number = 6\r\n    @property(Label)\r\n    labelDayData: Label;\r\n    @property(Node)\r\n    openDrawCodeLayout: Node\r\n    @property(Node)\r\n    clientPointLayout: Node\r\n    @property(Node)\r\n    specialBallItem: Node\r\n    labelContent: Node\r\n    outlineContent: Node;\r\n\r\n    onLoad() {\r\n        this.clientPointLayout.removeAllChildren();\r\n        this.openDrawCodeLayout.removeAllChildren();\r\n    }\r\n    setLabelContent(_node: Node) {\r\n        this.labelContent = _node\r\n        return this;\r\n    }\r\n    setOutlineContent(_node: Node) {\r\n        this.outlineContent = _node\r\n        return this;\r\n    }\r\n    /**\r\n     * \r\n     * @param day 日期 \r\n     * @param issueID 期號\r\n     */\r\n    setDayData(day: string, issueID: number) {\r\n        this.labelDayData.string = `${PublicModel.getInstance.convertDateDay(day)} 第${issueID.toString()}期`\r\n        this.labelDayData.addComponent(AutoFollow).createNewTarget()\r\n        this.labelContent.addChild(this.labelDayData.node)\r\n        return this\r\n    }\r\n    setOpenNumber(numbers: string[]) {\r\n        for (let index = 0; index < numbers.length; index++) {\r\n            let _node: Node;\r\n            if (index == this.maxNumberCount) _node = this.specialBallItem;\r\n            else {\r\n                _node = instantiate(this.prefabBallItem)\r\n                _node.setScale(PublicModel.getInstance.oneSclaeVec3(.6))\r\n                this.openDrawCodeLayout.addChild(_node)\r\n            }\r\n            let _class = _node.getComponent(BallData)\r\n            _class.init(Number(numbers[index]))\r\n            this.labelContent.addChild(_class.label.node)\r\n\r\n        }\r\n        return this\r\n    }\r\n    setSelfNumber(numbers: number[]) {\r\n        if (this.clientPointLayout.children.length >= this.maxNumberCount) return;\r\n        for (let index = 0; index < numbers.length; index++) {\r\n            let _node = instantiate(this.prefabBallItem)\r\n            this.clientPointLayout.addChild(_node)\r\n            let _class = _node.getComponent(BallData)\r\n            _class.init(numbers[index])\r\n            this.labelContent.addChild(_class.label.node)\r\n        }\r\n    }\r\n    setScore(num: number) {\r\n        this.labelPoint.string = `+${num.toString()}`;\r\n    }\r\n    init() {\r\n        this.labelOpenNumberTitle.addComponent(AutoFollow).createNewTarget()\r\n        this.labelContent.addChild(this.labelOpenNumberTitle.node)\r\n        this.labelMyChooeseNumber.addComponent(AutoFollow).createNewTarget()\r\n        this.outlineContent.addChild(this.labelMyChooeseNumber.node)\r\n        this.labelPoint.string = \"+0\"\r\n        this.labelPoint.addComponent(AutoFollow).createNewTarget()\r\n        this.labelContent.addChild(this.labelPoint.node)\r\n        return this\r\n    }\r\n    /**測試用 */\r\n    randomBall() {\r\n        return 1 + (Math.floor(Math.random() * 49))\r\n    }\r\n}"]}
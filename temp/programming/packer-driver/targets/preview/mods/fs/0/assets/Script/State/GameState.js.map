{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/State/GameState.ts"],"names":["RefreshTabelData","RefreshRoomState","WaitOrEnd","StartBoot","ShuffleCrads","OpenNewGame","ReadyBet","CloseBet","SendCards","PlayerSendCardSquintStart","PlayerSendCardSquintEnd","BankerSendCardSquintStart","BankerSendCardSquintEnd","PlayerRepairCard","PlayerRepairCardSquintStart","PlayerRepairCardSquintEnd","BankerRepairCard","BankerRepairCardSquintStart","BankerRepairCardSquintEnd","ShowResoult","EndRound","EndBoot","MusicMng","State","GameData","EventMng","GameStateEvent","RoomData","GameEvent","TextAnimationType","EffectType","changeState","data","emit","UpdateTabelData","getInstance","roomStatus","status","roomTime","time","TextAnimation","WAITING","FINISH","ResetView","effectPlay","AwaitingStart","GameOver","records","sequenceID","console","log","StartBetting","START","bankerPeekSeatID","playerPeekSeatID","OpenBet","musicPlay","StopBetting","SquintCard","ShowdownCard","UpdateCoin","owner","credit","RoundResult"],"mappings":"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","sourcesContent":["import * as RP from \"../Contorll/Api/ResponeCommand\";\r\nimport MusicMng from \"../Manager/MusicMng\";\r\nimport { State } from \"../../Patten/StatePatten\";\r\nimport GameData from \"../Model/GameData\";\r\nimport EventMng from \"../Manager/EventMng\";\r\nimport { GameStateEvent } from \"../Enum/GameStateEvent\";\r\nimport PublicModel from \"../Model/PublicModel\";\r\nimport { MainGame } from \"../View/MainGame\";\r\nimport RoomData from \"../Model/RoomData\";\r\n\r\nimport { GameEvent } from \"../Enum/GameEvent\";\r\nimport { TextAnimationType } from \"../Enum/TextAnimationType\";\r\nimport { EffectType } from \"../Enum/EffectType\";\r\n\r\n// var _mainGame: MainGame;\r\n\r\nexport class RefreshTabelData extends State {\r\n\r\n    public changeState(data: RP.gbal): void {\r\n        EventMng.emit(GameStateEvent.UpdateTabelData, data)\r\n    }\r\n}\r\n\r\nexport class RefreshRoomState extends State {\r\n\r\n    public changeState(data: RP.ggs): void {\r\n        RoomData.getInstance.roomStatus = data.status\r\n        RoomData.getInstance.roomTime = data.time\r\n        switch (RoomData.getInstance.roomStatus) {\r\n            case 0:\r\n                EventMng.emit(GameStateEvent.TextAnimation, TextAnimationType.WAITING)\r\n                break;\r\n            // case 1:\r\n            //     EventMng.emit(GameStateEvent.TextAnimation, TextAnimationType.START)\r\n            //     break;\r\n            case 2:\r\n                EventMng.emit(GameStateEvent.TextAnimation, TextAnimationType.FINISH)\r\n                break;\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport class WaitOrEnd extends State {\r\n    public changeState(data: RP.gs1): void {\r\n        EventMng.emit(GameEvent.ResetView)\r\n        switch (RoomData.getInstance.roomStatus) {\r\n            case 0:\r\n                MusicMng.effectPlay(EffectType.AwaitingStart)\r\n                EventMng.emit(GameStateEvent.TextAnimation, TextAnimationType.WAITING)\r\n                break;\r\n            // case 1:\r\n            //     EventMng.emit(GameStateEvent.TextAnimation, TextAnimationType.START)\r\n            //     break;\r\n            case 2:\r\n                MusicMng.effectPlay(EffectType.GameOver)\r\n                EventMng.emit(GameStateEvent.TextAnimation, TextAnimationType.FINISH)\r\n                break;\r\n\r\n        }\r\n    }\r\n}\r\n/**一靴重啟 */\r\nexport class StartBoot extends State {\r\n    public changeState(data: RP.gs8): void {\r\n        /**無法使用監聽，避免玩家如果尚未開啟畫面導致無法清理畫面 */\r\n        RoomData.getInstance.records = []\r\n        RoomData.getInstance.sequenceID = data.sequenceID\r\n        EventMng.emit(GameEvent.ResetView)\r\n\r\n        // MainGame.instance.panelCardSequence.subDerailRoad.allClear()\r\n        // MainGame.instance.panelCardSequence.subSimpleRoad.allClear()\r\n    }\r\n}\r\n/**洗牌 */\r\nexport class ShuffleCrads extends State {\r\n    public changeState(data: RP.gs9): void {\r\n\r\n\r\n    }\r\n}\r\nexport class OpenNewGame extends State {\r\n    public changeState(data: RP.gs10): void {\r\n\r\n        //設定局號\r\n    }\r\n}\r\n\r\nexport class ReadyBet extends State {\r\n    public changeState(data: RP.gs11): void {\r\n        console.log(\"進進了Ready\", data);\r\n        MusicMng.effectPlay(EffectType.StartBetting)\r\n        EventMng.emit(GameStateEvent.TextAnimation, TextAnimationType.START)\r\n        GameData.getInstance.bankerPeekSeatID = 0\r\n        GameData.getInstance.playerPeekSeatID = 0\r\n        EventMng.emit(GameStateEvent.OpenBet, data)\r\n        // if (DEV)\r\n        // setTimeout(() => {\r\n        // let temp = new gbcf()\r\n        // EventMng.emit(WebSocketEvent.WebSocketSendCommand, CommandType.gbcf, temp)\r\n\r\n        // }, 3000);\r\n        return\r\n        MusicMng.musicPlay(\"bg_01\");\r\n        MusicMng.effectPlay(\"new_round\");\r\n\r\n\r\n    }\r\n}\r\n\r\nexport class CloseBet extends State {\r\n    public changeState(data: RP.gs12) {\r\n        MusicMng.effectPlay(EffectType.StopBetting)\r\n        EventMng.emit(GameStateEvent.CloseBet)\r\n        EventMng.emit(GameStateEvent.UpdateTabelData, data)\r\n    }\r\n}\r\n/**發牌 */\r\nexport class SendCards extends State {\r\n    public changeState(data: RP.gs13): void {\r\n\r\n        GameData.getInstance.bankerPeekSeatID = data.bankerPeekSeatID\r\n        GameData.getInstance.playerPeekSeatID = data.playerPeekSeatID\r\n    }\r\n\r\n}\r\n\r\nexport class PlayerSendCardSquintStart extends State {\r\n    public changeState(data: RP.gs14): void {\r\n        EventMng.emit(GameStateEvent.SquintCard, data)\r\n    }\r\n\r\n}\r\nexport class PlayerSendCardSquintEnd extends State {\r\n    public changeState(data: RP.gs15): void {\r\n        EventMng.emit(GameStateEvent.ShowdownCard, data)\r\n\r\n    }\r\n\r\n}\r\nexport class BankerSendCardSquintStart extends State {\r\n    public changeState(data: RP.gs16): void {\r\n        EventMng.emit(GameStateEvent.SquintCard, data)\r\n    }\r\n\r\n}\r\nexport class BankerSendCardSquintEnd extends State {\r\n    public changeState(data: RP.gs17): void {\r\n\r\n        EventMng.emit(GameStateEvent.ShowdownCard, data)\r\n    }\r\n\r\n}\r\n\r\nexport class PlayerRepairCard extends State {\r\n    public changeState(data: RP.gs18): void {\r\n\r\n    }\r\n\r\n}\r\nexport class PlayerRepairCardSquintStart extends State {\r\n    public changeState(data: RP.gs19): void {\r\n        EventMng.emit(GameStateEvent.SquintCard, data)\r\n    }\r\n\r\n\r\n}\r\nexport class PlayerRepairCardSquintEnd extends State {\r\n    public changeState(data: RP.gs20): void {\r\n\r\n        EventMng.emit(GameStateEvent.ShowdownCard, data)\r\n    }\r\n\r\n}\r\nexport class BankerRepairCard extends State {\r\n    public changeState(data: RP.gs21): void {\r\n\r\n    }\r\n\r\n}\r\nexport class BankerRepairCardSquintStart extends State {\r\n    public changeState(data: RP.gs22): void {\r\n        EventMng.emit(GameStateEvent.SquintCard, data)\r\n    }\r\n\r\n}\r\nexport class BankerRepairCardSquintEnd extends State {\r\n    public changeState(data: RP.gs23): void {\r\n\r\n        EventMng.emit(GameStateEvent.ShowdownCard, data)\r\n    }\r\n\r\n}\r\n\r\nexport class ShowResoult extends State {\r\n    public changeState(data: RP.gs24): void {\r\n        EventMng.emit(GameStateEvent.UpdateCoin, data.owner.credit)\r\n        EventMng.emit(GameStateEvent.RoundResult, data)\r\n    }\r\n}\r\n\r\nexport class EndRound extends State {\r\n    public changeState(data: RP.gs25): void {\r\n        EventMng.emit(GameStateEvent.EndRound)\r\n    }\r\n}\r\nexport class EndBoot extends State {\r\n    public changeState(data: RP.gs30): void {\r\n        EventMng.emit(GameStateEvent.EndBoot)\r\n    }\r\n}"]}
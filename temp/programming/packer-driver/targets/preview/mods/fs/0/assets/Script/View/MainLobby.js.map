{"version":3,"sources":["file:///C:/CocosProject/3.4.2_MarkSix/assets/Script/View/MainLobby.ts"],"names":["CreatorRoomData","random","_decorator","DEV","BaseSingletonComponent","lbll","lbrl","lbsr","PanelLoading","CommandType","GameSceneName","WebSocketEvent","EventMng","GameData","Player","PublicData","RoomData","ccclass","property","MainLobby","onLoad","getInstance","currentScene","Lobby","start","instance","openLoading","closeLoading","inLobby","_lbll","contentId","type","gameType","emit","WebSocketSendCommand","inRoomLevel","_lbrl","level","inGame","roomNo","console","log","_lbsr","undefined","seatNo","password","creatorRoom","data","playMinute","roomName","Math","floor","toString","betMin","betOptions","thinkSecond","vlcr"],"mappings":"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","sourcesContent":["import { Game, game, random, sys, _decorator } from \"cc\";\r\nimport { DEV } from \"cc/env\";\r\nimport BaseSingletonComponent from \"../../Patten/Singleton/BaseSingletonComponent\";\r\nimport { lbll, lbrl, lbsr } from \"../Contorll/Api/SendCommand\";\r\nimport PanelLoading from \"../Contorll/NoClearNode/PanelLoading\";\r\nimport { CommandType } from \"../Enum/CommandType\";\r\nimport { GameEvent } from \"../Enum/GameEvent\";\r\nimport { GameSceneName } from \"../Enum/GameSenceName\";\r\nimport { WebSocketEvent } from \"../Enum/WebSocketEvent\";\r\nimport EventMng from \"../Manager/EventMng\";\r\nimport GameData from \"../Model/GameData\";\r\nimport Player from \"../Model/Player\";\r\nimport PublicData from \"../Model/PublicData\";\r\nimport RoomData from \"../Model/RoomData\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n@ccclass('MainLobby')\r\nexport default class MainLobby extends BaseSingletonComponent<MainLobby>() {\r\n    onLoad() {\r\n        PublicData.getInstance.currentScene = GameSceneName.Lobby\r\n        super.onLoad()\r\n    }\r\n    start() {\r\n        if (!DEV)\r\n            PanelLoading.instance.openLoading()\r\n        else\r\n            PanelLoading.instance.closeLoading()\r\n        // this.inLobby()\r\n    }\r\n    inLobby() {\r\n        let _lbll = new lbll()\r\n        _lbll.contentId = GameData.getInstance.contentId\r\n        _lbll.type = GameData.getInstance.gameType\r\n        EventMng.emit(WebSocketEvent.WebSocketSendCommand, CommandType.lbll, _lbll)\r\n    }\r\n\r\n    inRoomLevel() {\r\n        let _lbrl = new lbrl()\r\n        _lbrl.contentId = GameData.getInstance.contentId\r\n        _lbrl.type = GameData.getInstance.gameType\r\n        _lbrl.level = 1\r\n        EventMng.emit(WebSocketEvent.WebSocketSendCommand, CommandType.lbrl, _lbrl)\r\n    }\r\n    inGame(roomNo?: number) {\r\n        console.log(\"開始送?\");\r\n        let _lbsr = new lbsr()\r\n        _lbsr.roomNo = roomNo == undefined || roomNo == null ? GameData.getInstance.roomNo : roomNo//先寫死，到時候再做活\r\n        _lbsr.contentId = GameData.getInstance.contentId\r\n        _lbsr.seatNo = RoomData.getInstance.seatNo\r\n        _lbsr.password = Player.getInstance.password\r\n        EventMng.emit(WebSocketEvent.WebSocketSendCommand, CommandType.lbsr, _lbsr)\r\n    }\r\n    creatorRoom() {\r\n        let data = new CreatorRoomData()\r\n        data.playMinute = 1\r\n        data.roomName = Math.floor(random() * 100000).toString()\r\n        data.betMin = 10\r\n        data.betMin = 10000\r\n        data.betOptions = [10, 200, 500, 1000, 10000]\r\n        data.thinkSecond = 1\r\n        EventMng.emit(WebSocketEvent.WebSocketSendCommand, CommandType.vlcr, data)\r\n    }\r\n\r\n\r\n}\r\n\r\nclass CreatorRoomData {\r\n    public contentId: string = \"10\";\r\n\r\n    public roomType: number = 1;\r\n    public roomLevel: number = 1;\r\n\r\n    public roomName: string = \"\";    // 房間名稱.\r\n    public currency: number = 0;        // 幣別. 0:金幣, 1:銀幣\r\n    public modeNonComm: boolean = false; // 是否為免佣模式.\r\n    public playMinute: number = 0;      // 開房時長 單位:分鐘.\r\n    public charge: number = 0;      // 開房費用.(admin不適用)\r\n    public enableBothBet: boolean = false;   // 是否允許兩邊對押;\r\n\r\n    public betMin: number = 0;      // 最小下注額;\r\n    public betMax: number = 0;      // 最大下注額;\r\n    public betOptions: number[] = null;   // 下注選項\r\n\r\n    public seat: number = 100;            // 座位(允許進入人數);\r\n    public thinkSecond: number = 0;     // 下注思考時間.單位:秒\r\n\r\n}"]}